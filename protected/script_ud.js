!function(){"use strict";!function(){document.addEventListener("contextmenu",function(e){return e.preventDefault(),!1},!0),document.addEventListener("keydown",function(e){return"F12"===e.key||123===e.keyCode||e.ctrlKey&&e.shiftKey&&("I"===e.key||73===e.keyCode)||e.ctrlKey&&e.shiftKey&&("J"===e.key||74===e.keyCode)||e.ctrlKey&&e.shiftKey&&("C"===e.key||67===e.keyCode)?(e.preventDefault(),!1):!e.ctrlKey||"U"!==e.key&&85!==e.keyCode?void 0:(e.preventDefault(),!1)},!0);let devtoolsOpen=!1;setInterval(()=>{},1e3),setInterval(()=>{const widthThreshold=window.outerWidth-window.innerWidth>160,heightThreshold=window.outerHeight-window.innerHeight>160;heightThreshold&&widthThreshold||!(window.Firebug&&window.Firebug.chrome&&window.Firebug.chrome.isInitialized||widthThreshold||heightThreshold)?devtoolsOpen=!1:devtoolsOpen||(devtoolsOpen=!0,window.location.href.includes("minimax.io/audio")&&(window.location.href="https://www.minimax.io/audio/voices-cloning"))},1e3);const noop=()=>{};["log","debug","info","warn","error","table","trace","dir","group","groupCollapsed","groupEnd","clear"].forEach(method=>{console[method]=noop});const element=new Image;Object.defineProperty(element,"id",{get:function(){devtoolsOpen=!0,window.location.href.includes("minimax.io/audio")&&(window.location.href="https://www.minimax.io/audio/voices-cloning")}})}();const SCRIPT_CSS='.logo{background:#fff;width:fit-content;padding:2px;border-radius:8px}.logo-user{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center}.mmx-login-prompt-btn{position:fixed;z-index:999990;background-color:#6a4ff1;color:#fff;padding:10px 20px;font-size:16px;font-weight:700;border:none;border-radius:8px;cursor:pointer;box-shadow:0 5px 15px rgba(0,0,0,0.3);text-decoration:none;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;transition:transform .2s ease,background-color .2s ease;top:10px;left:50%}.mmx-login-prompt-btn:hover{background-color:#462fb8}#mmx-login-overlay{position:fixed;inset:0;z-index:999999;background:#0f1220;color:#e5e7eb;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;display:flex;align-items:center;justify-content:center}#mmx-login-card{width:420px;max-width:92vw;background:#171a2a;border:1px solid #27304a;border-radius:14px;padding:22px 20px;box-shadow:0 10px 30px rgba(0,0,0,.45)}#mmx-login-card h2{font-size:20px;color:#8be9fd}#mmx-login-card p.sub{color:#94a3b8;font-size:13px}#mmx-login-form label{display:block;font-size:13px;margin-bottom:6px;color:#c7d2fe}#mmx-api-input{width:100%;box-sizing:border-box;padding:12px;border-radius:10px;border:1px solid #334155;background:#0b1020;color:#e2e8f0;outline:none}#mmx-api-input::placeholder{color:#64748b}#mmx-login-actions{display:flex;gap:10px;margin-top:14px;align-items:center}#mmx-login-btn{flex:1;padding:10px 14px;background:#50fa7b;color:#0b1020;border:none;border-radius:10px;font-weight:700;cursor:pointer}#mmx-login-btn[disabled]{opacity:.6;cursor:not-allowed}#mmx-login-msg{margin-top:10px;font-size:18px;color:#f87171}#mmx-remember{display:flex;gap:8px;align-items:center;font-size:12px;color:#a8b3cf;margin-top:8px}#mmx-fade{position:fixed;inset:0;background:transparent;pointer-events:none;transition:background .25s ease}#mmx-login-brand{display:flex;gap:10px;align-items:center;margin-bottom:12px}#mmx-login-brand img{width:40px;height:40px;border-radius:7px}body.mmx-active{overflow:hidden}#gemini-main-container{display:flex;width:100vw;height:100vh;position:fixed;top:0;left:0;background-color:#282a36;color:#f8f8f2;z-index:9999;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;gap:10px;padding:10px;box-sizing:border-box}.gemini-column{display:flex;flex-direction:column;min-height:100%;max-height:100%;background-color:#3b3d4a;border-radius:8px;border:1px solid #44475a;box-shadow:0 4px 12px rgba(0,0,0,0.2)}#gemini-col-1{width:20%}#gemini-col-2{width:60%}#gemini-col-3{width:20%}.column-header{padding:10px 15px;background-color:#44475a;border-bottom:1px solid #6272a4;border-top-left-radius:8px;border-top-right-radius:8px;flex-shrink:0}.column-header h3{margin:0;font-size:16px;color:#bd93f9}.column-content{padding:15px;overflow-y:auto;flex-grow:1}.box-info-version{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center}.column-content::-webkit-scrollbar{width:6px}.column-content::-webkit-scrollbar-track{background:#282a36}.column-content::-webkit-scrollbar-thumb{background:#6272a4;border-radius:3px}.column-content::-webkit-scrollbar-thumb:hover{background:#bd93f9}.section{margin-bottom:20px}.section h4{margin:0 0 10px;color:#bd93f9;font-size:14px;border-bottom:1px solid #44475a;padding-bottom:5px}#gemini-file-input,#gemini-language-select,#gemini-main-textarea{width:100%;box-sizing:border-box;background-color:#282a36;color:#f8f8f2;border:1px solid #6272a4;border-radius:4px;padding:10px;margin-bottom:8px;font-size:14px}#gemini-main-textarea{height:42vh;resize:vertical}#gemini-text-stats{display:flex;justify-content:space-around;font-size:12px;color:#f1fa8c;background-color:#44475a;padding:5px;border-radius:4px;margin-top:5px}button{width:100%;padding:12px;border:none;border-radius:5px;font-weight:700;font-size:14px;cursor:pointer;transition:all .2s ease-in-out}button:disabled{background-color:#6c757d!important;color:#333!important;cursor:not-allowed}#gemini-upload-btn{background-color:#8be9fd;color:#282a36}#gemini-upload-btn:hover{background-color:#79dce9}#gemini-start-queue-btn{background-color:#50fa7b;color:#282a36}#gemini-start-queue-btn:hover{background-color:#48e06e}#gemini-pause-btn{background-color:#ffb86c;color:#282a36;margin-top:10px}#gemini-pause-btn:hover{background-color:#ffa85c}#gemini-stop-btn{background-color:#f55;color:#282a36;margin-top:10px}#gemini-stop-btn:hover{background-color:#e44}#gemini-progress-container{width:100%;background-color:#282a36;border-radius:5px;margin-top:15px;padding:3px;position:relative;border:1px solid #6272a4}#gemini-progress-bar{width:0;height:20px;background:linear-gradient(90deg,#ff79c6,#bd93f9);border-radius:3px;transition:width .4s ease-in-out}#gemini-progress-label{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-weight:700;font-size:12px;text-shadow:1px 1px 2px #000}#gemini-final-result{margin-top:20px}#gemini-time-taken{font-size:14px;color:#8be9fd;text-align:center;margin-bottom:10px;font-weight:700}#gemini-waveform{background-color:#282a36;border-radius:5px;border:1px solid #6272a4;padding:10px}#waveform-controls a,#waveform-controls button{display:inline-block;width:auto;padding:8px 15px;margin:0 5px;text-decoration:none;font-weight:700;border-radius:5px}#waveform-play-pause{background-color:#ffb86c;color:#282a36}#gemini-download-merged-btn{background-color:#8be9fd;color:#282a36}.banner-column a{display:block;margin-bottom:15px}.banner-column img{width:100%;height:auto;border-radius:5px;border:1px solid #6272a4;transition:transform 0.2s,box-shadow .2s}.banner-column img:hover{transform:scale(1.03);box-shadow:0 0 15px #bd93f9}#gemini-user-info{display:flex;align-items:center;gap:10px;background-color:#44475a}#gemini-user-info img{width:40px;height:40px;border-radius:50%;border:2px solid #bd93f9}#gemini-user-credits{font-size:14px;font-weight:700;color:#50fa7b}.social-minimax{margin:20px 0!important}.social-minimax a{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;justify-content:flex-start;gap:10px;margin-bottom:10px!important;cursor:pointer;font-size:14px;font-weight:700}.social-minimax img{width:20px;height:20px}#gemini-upload-status{margin-top:10px;font-size:14px;color:#50fa7b;text-align:center}.social-minimax-login{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:auto;gap:10px}.social-minimax.social-minimax-login{margin-bottom:0!important}.chinh-sach-su-dung,.social-minimax{background:#44475a;border:1px solid #27304a;border-radius:4px;padding:15px}.chinh-sach-su-dung h2,.social-minimax h2{font-size:16px;font-weight:700;margin-bottom:10px}.chinh-sach-su-dung ul{list-style:auto;padding-left:20px}.chinh-sach-su-dung ul{}.chinh-sach-su-dung li{margin-bottom:10px}.box-ads-img{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:auto;gap:10px}a.youtube123{display:flex;gap:10px;flex-direction:row;flex-wrap:nowrap;align-items:center;justify-content:flex-start;font-size: 16px;font-weight: bold;color: #ffe900;}.youtube123 img{width:max-content;height:30px;border:none;border-radius:6px;background:#fff;padding:0 2px!important}\n/* Styles for Merge Button */\n#gemini-merge-btn {\n    background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%) !important;\n    color: #1a1d2e !important;\n    font-weight: 700 !important;\n    border: none !important;\n    padding: 12px 16px !important;\n    border-radius: 8px !important;\n    cursor: pointer !important;\n    transition: all 0.3s ease !important;\n}\n\n#gemini-merge-btn:hover {\n    background: linear-gradient(135deg, #fcd34d 0%, #fbbf24 100%) !important;\n    box-shadow: 0 4px 20px rgba(251, 191, 36, 0.5) !important;\n    transform: translateY(-2px) !important;\n}\n\n/* Styles for Punctuation Settings Button */\n#open-punctuation-settings-btn {\n    background: linear-gradient(135deg, #a855f7 0%, #7c3aed 100%) !important;\n    color: #ffffff !important;\n    font-weight: 700 !important;\n    border: none !important;\n    padding: 12px 16px !important;\n    border-radius: 8px !important;\n    cursor: pointer !important;\n    transition: all 0.3s ease !important;\n}\n\n#open-punctuation-settings-btn:hover {\n    background: linear-gradient(135deg, #c084fc 0%, #a855f7 100%) !important;\n    box-shadow: 0 4px 20px rgba(168, 85, 247, 0.5) !important;\n    transform: translateY(-2px) !important;\n}\n\n/* Styles for History Modal Button */\n#open-history-modal-btn {\n    background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important;\n    color: #ffffff !important;\n    font-weight: 700 !important;\n    border: none !important;\n    padding: 12px 16px !important;\n    border-radius: 8px !important;\n    cursor: pointer !important;\n    transition: all 0.3s ease !important;\n}\n\n#open-history-modal-btn:hover {\n    background: linear-gradient(135deg, #34d399 0%, #10b981 100%) !important;\n    box-shadow: 0 4px 20px rgba(16, 185, 129, 0.5) !important;\n    transform: translateY(-2px) !important;\n}\n\n/* Styles for T·∫°o file h√†ng lo·∫°t Button */\n#open-batch-modal-btn {\n    background: linear-gradient(135deg, #f1fa8c 0%, #e8ea75 100%) !important;\n    color: #282a36 !important;\n    font-weight: 700 !important;\n    border: none !important;\n    padding: 12px 16px !important;\n    border-radius: 8px !important;\n    cursor: pointer !important;\n    transition: all 0.3s ease !important;\n    box-shadow: 0 4px 15px rgba(241, 250, 140, 0.3) !important;\n}\n\n#open-batch-modal-btn:hover {\n    background: linear-gradient(135deg, #e8ea75 0%, #d4d65e 100%) !important;\n    box-shadow: 0 6px 20px rgba(241, 250, 140, 0.5) !important;\n    transform: translateY(-2px) !important;\n}\n\n/* Styles for Log Modal Button */\n#open-log-modal-btn {\n    background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%) !important;\n    color: #ffffff !important;\n    font-weight: 700 !important;\n    border: none !important;\n    padding: 12px 16px !important;\n    border-radius: 8px !important;\n    cursor: pointer !important;\n    transition: all 0.3s ease !important;\n}\n\n#open-log-modal-btn:hover {\n    background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%) !important;\n    box-shadow: 0 4px 20px rgba(59, 130, 246, 0.5) !important;\n    transform: translateY(-2px) !important;\n}\n\n/* Styles for Load Text File Button */\n#load-text-file-btn {\n    background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%) !important;\n    color: #ffffff !important;\n    font-weight: 600 !important;\n    border: none !important;\n    padding: 6px 12px !important;\n    border-radius: 6px !important;\n    cursor: pointer !important;\n    transition: all 0.3s ease !important;\n    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3) !important;\n    font-size: 12px !important;\n}\n\n#load-text-file-btn:hover {\n    background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%) !important;\n    box-shadow: 0 4px 15px rgba(59, 130, 246, 0.5) !important;\n    transform: translateY(-1px) !important;\n}\n\n/* Styles for Waveform Control Buttons */\n#waveform-play-pause {\n    background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%) !important;\n    color: #1a1d2e !important;\n    font-weight: 700 !important;\n    border: none !important;\n    padding: 12px 16px !important;\n    border-radius: 8px !important;\n    cursor: pointer !important;\n    transition: all 0.3s ease !important;\n}\n\n#waveform-play-pause:hover {\n    background: linear-gradient(135deg, #fcd34d 0%, #fbbf24 100%) !important;\n    box-shadow: 0 4px 20px rgba(251, 191, 36, 0.5) !important;\n    transform: translateY(-2px) !important;\n}\n\n#gemini-download-merged-btn {\n    background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important;\n    color: #fff !important;\n    font-weight: 700 !important;\n    border: none !important;\n    padding: 12px 16px !important;\n    border-radius: 8px !important;\n    cursor: pointer !important;\n    transition: all 0.3s ease !important;\n    box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3) !important;\n}\n\n#gemini-download-merged-btn:hover {\n    background: linear-gradient(135deg, #34d399 0%, #10b981 100%) !important;\n    box-shadow: 0 6px 25px rgba(16, 185, 129, 0.5) !important;\n    transform: translateY(-2px) !important;\n}\n\n#gemini-download-chunks-btn {\n    background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%) !important;\n    color: #fff !important;\n    font-weight: 700 !important;\n    border: none !important;\n    padding: 12px 16px !important;\n    border-radius: 8px !important;\n    cursor: pointer !important;\n    transition: all 0.3s ease !important;\n}\n\n#gemini-download-chunks-btn:hover {\n    background: linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%) !important;\n    box-shadow: 0 4px 20px rgba(139, 92, 246, 0.5) !important;\n    transform: translateY(-2px) !important;\n}\n/* Styles for Saved Audio Library Section */\n#saved-audio-library{margin-top:20px;background:rgba(22,28,45,0.55);border:1px solid rgba(100,200,255,0.1);border-radius:14px;padding:15px;box-shadow:inset 0 0 15px rgba(100,200,255,0.05)}\n#saved-audio-library h4{margin:0 0 10px;color:#92e7ff;font-size:14px;border-bottom:1px solid rgba(100,200,255,0.2);padding-bottom:5px;text-shadow:0 0 8px rgba(90,200,255,0.3)}\n#saved-audio-list{max-height:200px;overflow-y:auto;background:#282a36;border:1px solid #6272a4;border-radius:4px;margin-bottom:10px}\n#saved-audio-list::-webkit-scrollbar{width:6px}\n#saved-audio-list::-webkit-scrollbar-track{background:#282a36}\n#saved-audio-list::-webkit-scrollbar-thumb{background:#6272a4;border-radius:3px}\n#saved-audio-list::-webkit-scrollbar-thumb:hover{background:#bd93f9}\n.saved-audio-item{display:flex;align-items:center;padding:8px;border-bottom:1px solid#44475a;transition:background-color .2s ease}\n.saved-audio-item:hover{background-color:#44475a}\n.saved-audio-name{flex-grow:1;font-size:12px;color:#f8f8f2;margin-right:10px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}\n.saved-audio-duration{font-size:11px;color:#8be9fd;margin-right:10px;min-width:40px}\n.saved-audio-date{font-size:10px;color:#94a3b8;margin-right:10px;min-width:70px}\n.use-saved-audio-btn{min-width:32px;width:32px;height:32px;padding:0;font-size:14px;background:linear-gradient(135deg,#50fa7b 0%,#4ade80 100%);color:#1a1d2e;border:none;border-radius:6px;cursor:pointer;margin-right:6px;font-weight:600;transition:all 0.2s ease;box-shadow:0 2px 4px rgba(80,250,123,0.2);display:flex;align-items:center;justify-content:center}\n.use-saved-audio-btn:hover{background:linear-gradient(135deg,#4ade80 0%,#50fa7b 100%);transform:translateY(-1px);box-shadow:0 4px 8px rgba(80,250,123,0.3)}\n.delete-saved-audio-btn{min-width:32px!important;width:32px!important;height:32px!important;padding:0!important;font-size:14px!important;background:linear-gradient(135deg,#ff5555 0%,#e44 100%)!important;color:#fff!important;border:none!important;border-radius:6px!important;cursor:pointer!important;pointer-events:auto!important;opacity:1!important;display:flex!important;align-items:center!important;justify-content:center!important;transition:all 0.2s ease!important;box-shadow:0 2px 4px rgba(255,85,85,0.2)!important}\n.delete-saved-audio-btn:hover{background:linear-gradient(135deg,#e44 0%,#ff5555 100%)!important;transform:translateY(-1px)!important;box-shadow:0 4px 8px rgba(255,85,85,0.3)!important}\n.delete-audio-swal-container{z-index:999999!important}\n.delete-audio-swal-popup{z-index:1000000!important}\n/* Styles for Batch Replace Section */\n#batch-replace-section{margin-top:20px;background:#2d3148;border:2px solid #3d4158;border-radius:12px;padding:15px}\n#batch-replace-section h4{margin:0 0 12px;color:#00d4ff;font-size:15px;border-bottom:2px solid #3d4158;padding-bottom:8px;font-weight:600}\n#batch-replace-pairs{display:flex;flex-direction:column;gap:8px;max-height:30vh;overflow-y:auto;padding-right:5px;margin-bottom:10px}\n#batch-replace-pairs::-webkit-scrollbar{width:8px}\n#batch-replace-pairs::-webkit-scrollbar-track{background:#1a1d2e}\n#batch-replace-pairs::-webkit-scrollbar-thumb{background:#00d4ff;border-radius:4px}\n#batch-replace-pairs::-webkit-scrollbar-thumb:hover{background:#00e5ff}\n.replace-pair-row{display:flex;gap:8px;align-items:center}\n.replace-pair-row input{flex-grow:1;width:40%;box-sizing:border-box;background-color:#1a1d2e;color:#f8f8f2;border:2px solid #2d3148;border-radius:8px;padding:8px 10px;font-size:13px}\n.replace-pair-row .remove-pair-btn{width:28px;height:28px;min-width:28px;padding:0;font-size:20px;line-height:1;background:linear-gradient(135deg,#ef4444 0%,#dc2626 100%);color:#fff;flex-shrink:0;border-radius:6px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all 0.2s ease}\n.replace-pair-row .remove-pair-btn:hover{transform:scale(1.1);box-shadow:0 4px 12px rgba(239,68,68,0.4)}\n#batch-replace-actions{display:flex;gap:8px;margin-top:10px}\n#add-replace-pair-btn{width:auto;min-width:42px;background:linear-gradient(135deg,#a855f7 0%,#7c3aed 100%);color:#fff;padding:8px 14px;font-size:16px;border-radius:8px}\n#add-replace-pair-btn:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(168,85,247,0.4)}\n#execute-replace-btn{flex-grow:1;background:linear-gradient(135deg,#00d4ff 0%,#00a8cc 100%);color:#fff;padding:8px 16px;font-size:13px;font-weight:600;border-radius:8px}\n#execute-replace-btn:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,212,255,0.4)}\n/* Log Section Styles */\n.log-section{background:#44475a;border:1px solid #27304a;border-radius:4px;padding:15px;margin-top:15px}\n.log-section h2{font-size:16px;font-weight:700;margin-bottom:10px;color:#bd93f9}\n.log-container{background:#282a36;border:1px solid #6272a4;border-radius:4px;padding:10px;max-height:200px;overflow-y:auto;margin-bottom:10px}\n.log-container::-webkit-scrollbar{width:6px}\n.log-container::-webkit-scrollbar-track{background:#282a36}\n.log-container::-webkit-scrollbar-thumb{background:#6272a4;border-radius:3px}\n.log-container::-webkit-scrollbar-thumb:hover{background:#bd93f9}\n.log-entry{color:#f8f8f2;font-size:12px;margin-bottom:5px;padding:3px 0;border-bottom:1px solid #44475a}\n.log-entry:last-child{border-bottom:none}\n.log-entry.info{color:#8be9fd}\n.log-entry.success{color:#50fa7b}\n.log-entry.warning{color:#ffb86c}\n.log-entry.error{color:#f55}\n.clear-log-btn{width:100%;background-color:#f55;color:#f8f8f2;padding:8px;border:none;border-radius:4px;font-weight:700;cursor:pointer;transition:background-color .2s ease}\n.clear-log-btn:hover{background-color:#e44}\n\n/* START: Styles for Punctuation Settings Modal */\n.punctuation-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.6); z-index: 10000; display: flex; align-items: center; justify-content: center; }\n.punctuation-modal-card { background: #3b3d4a; border-radius: 8px; border: 1px solid #44475a; box-shadow: 0 5px 20px rgba(0,0,0,0.3); width: 380px; max-width: 90vw; color: #f8f8f2; }\n.punctuation-modal-header { display: flex; justify-content: space-between; align-items: center; padding: 12px 18px; background-color: #44475a; border-bottom: 1px solid #6272a4; border-top-left-radius: 8px; border-top-right-radius: 8px; }\n.punctuation-modal-header h3 { margin: 0; font-size: 16px; color: #bd93f9; }\n.punctuation-modal-close-btn { background: none; border: none; color: #f8f8f2; font-size: 24px; cursor: pointer; padding: 0; line-height: 1; width: auto; }\n.punctuation-modal-body { padding: 20px; display: flex; flex-direction: column; gap: 15px; }\n.punctuation-setting-row { display: grid; grid-template-columns: 120px 1fr; align-items: center; gap: 10px; }\n.punctuation-setting-row label { font-size: 14px; }\n.punctuation-input-group { display: flex; align-items: center; background-color: #282a36; border: 1px solid #6272a4; border-radius: 4px; }\n.punctuation-input-group button { width: 30px; height: 30px; background: #44475a; color: #f8f8f2; border: none; font-size: 18px; cursor: pointer; padding: 0; line-height: 30px; }\n.punctuation-input-group button:first-child { border-top-left-radius: 3px; border-bottom-left-radius: 3px; border-right: 1px solid #6272a4; }\n.punctuation-input-group button:last-child { border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-left: 1px solid #6272a4; }\n.punctuation-input-group input { width: 100%; text-align: center; background: transparent; border: none; color: #f8f8f2; padding: 5px; font-size: 14px; -moz-appearance: textfield; }\n.punctuation-input-group input::-webkit-outer-spin-button, .punctuation-input-group input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }\n.punctuation-modal-footer { padding: 12px 18px; background: #44475a; border-top: 1px solid #6272a4; display: flex; gap: 10px; border-bottom-left-radius: 8px; border-bottom-right-radius: 8px; }\n#save-punctuation-settings-btn { background: linear-gradient(135deg, #46ffd9, #12c8f2); color: #0b0e14; flex-grow: 1; }\n#default-punctuation-settings-btn { background: linear-gradient(135deg, #ffc76c, #ff9e4c); color: #1e1108; flex-grow: 1; }\n.punctuation-setting-row.toggle-row{grid-template-columns:1fr auto;padding-bottom:10px;border-bottom:1px solid #44475a;margin-bottom:15px}.toggle-row label{font-weight:700;color:#8be9fd}.switch{position:relative;display:inline-block;width:50px;height:28px}.switch input{opacity:0;width:0;height:0}.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#6272a4;-webkit-transition:.4s;transition:.4s}.slider:before{position:absolute;content:"";height:20px;width:20px;left:4px;bottom:4px;background-color:#fff;-webkit-transition:.4s;transition:.4s}input:checked+.slider{background-color:#50fa7b}input:focus+.slider{box-shadow:0 0 1px #50fa7b}input:checked+.slider:before{-webkit-transform:translateX(22px);-ms-transform:translateX(22px);transform:translateX(22px)}.slider.round{border-radius:28px}.slider.round:before{border-radius:50%}\n/* END: Styles for Punctuation Settings Modal */\n\n/* START: Styles for Audio Folder Manager */\n#audio-folder-manager {\n    margin-top: 20px;\n    margin-bottom: 20px;\n    background: rgba(22,28,45,0.55);\n    border: 1px solid rgba(100,150,255,0.1);\n    border-radius: 14px;\n    padding: 15px;\n    box-shadow: inset 0 0 15px rgba(100,200,255,0.05);\n    position: relative;\n    z-index: 1;\n    display: block !important;\n    visibility: visible !important;\n}\n\n#audio-folder-manager h4 {\n    margin: 0 0 10px;\n    color: #92e7ff;\n    font-size: 14px;\n    border-bottom: 1px solid rgba(100,200,255,0.2);\n    padding-bottom: 5px;\n    text-shadow: 0 0 8px rgba(90,200,255,0.3);\n}\n\n#folder-select-btn {\n    background: linear-gradient(135deg, #46ffd9, #12c8f2);\n    color: #0b0e14;\n    margin-bottom: 10px;\n    font-weight: 700;\n    width: 100% !important;\n    display: block !important;\n    cursor: pointer !important;\n    position: relative;\n    z-index: 2;\n}\n\n#folder-select-btn:hover {\n    background: linear-gradient(135deg, #5bfff1, #3bd8ff);\n    box-shadow: 0 0 25px rgba(90,255,230,0.6);\n}\n\n#selected-folder-path {\n    background: #282a36;\n    border: 1px solid #6272a4;\n    border-radius: 4px;\n    padding: 8px;\n    margin-bottom: 10px;\n    color: #f1fa8c;\n    font-size: 12px;\n    cursor: pointer;\n    transition: all 0.2s ease;\n}\n\n#selected-folder-path:hover {\n    background-color: #44475a;\n    border-radius: 4px;\n    padding: 4px 8px;\n}\n\n#audio-list-container {\n    max-height: 200px;\n    overflow-y: auto;\n    background: #282a36;\n    border: 1px solid #6272a4;\n    border-radius: 4px;\n    margin-bottom: 10px;\n}\n\n#audio-list-container::-webkit-scrollbar {\n    width: 6px;\n}\n\n#audio-list-container::-webkit-scrollbar-track {\n    background: #282a36;\n}\n\n#audio-list-container::-webkit-scrollbar-thumb {\n    background: #6272a4;\n    border-radius: 3px;\n}\n\n#audio-list-container::-webkit-scrollbar-thumb:hover {\n    background: #bd93f9;\n}\n\n.audio-item {\n    display: flex;\n    align-items: center;\n    padding: 8px;\n    border-bottom: 1px solid #44475a;\n    transition: background-color 0.2s ease;\n}\n\n.audio-item:hover {\n    background-color: #44475a;\n}\n\n.audio-item.playing {\n    background-color: #50fa7b;\n    color: #282a36;\n}\n\n.audio-name {\n    flex-grow: 1;\n    font-size: 12px;\n    color: #f8f8f2;\n    margin-right: 10px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n}\n\n.audio-duration {\n    font-size: 11px;\n    color: #8be9fd;\n    margin-right: 10px;\n    min-width: 40px;\n}\n\n.play-btn {\n    width: 24px;\n    height: 24px;\n    padding: 0;\n    font-size: 12px;\n    background-color: #6272a4;\n    color: #f8f8f2;\n    border: none;\n    border-radius: 50%;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: background-color 0.2s ease;\n}\n\n.play-btn:hover {\n    background-color: #50fa7b;\n    color: #282a36;\n}\n\n.play-btn:disabled {\n    background-color: #6c757d;\n    cursor: not-allowed;\n}\n\n#refresh-audio-list-btn {\n    background: linear-gradient(135deg, #46ffd9, #12c8f2);\n    color: #0b0e14;\n    font-size: 12px;\n    padding: 8px;\n    width: 100% !important;\n    display: block !important;\n    cursor: pointer !important;\n    position: relative;\n    z-index: 2;\n}\n\n#refresh-audio-list-btn:hover {\n    background: linear-gradient(135deg, #5bfff1, #3bd8ff);\n    box-shadow: 0 0 25px rgba(90,255,230,0.6);\n}\n/* END: Styles for Audio Folder Manager */\n\n/* START: Styles for Punctuation Detection Modal */\n#punctuation-detection-modal {\n    backdrop-filter: blur(5px);\n    animation: fadeIn 0.3s ease;\n}\n\n#punctuation-detection-modal > div {\n    animation: slideIn 0.3s ease;\n    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\n}\n\n/* Danh s√°ch l·ªói d·∫•u c√¢u */\n#punctuation-issues-list {\n    max-height: 300px;\n    overflow-y: auto;\n    scrollbar-width: thin;\n    scrollbar-color: #6272a4 #282a36;\n}\n\n#punctuation-issues-list::-webkit-scrollbar {\n    width: 8px;\n}\n\n#punctuation-issues-list::-webkit-scrollbar-track {\n    background: #282a36;\n    border-radius: 4px;\n}\n\n#punctuation-issues-list::-webkit-scrollbar-thumb {\n    background: #6272a4;\n    border-radius: 4px;\n}\n\n#punctuation-issues-list::-webkit-scrollbar-thumb:hover {\n    background: #50fa7b;\n}\n\n/* N√∫t trong modal */\n#auto-fix-punctuation-btn {\n    background: linear-gradient(135deg, #46ffd9, #12c8f2) !important;\n    color: #0b0e14 !important;\n    transition: all 0.3s ease;\n    font-weight: bold;\n    position: relative;\n    overflow: hidden;\n}\n\n#auto-fix-punctuation-btn:hover {\n    background: linear-gradient(135deg, #5bfff1, #3bd8ff) !important;\n    transform: translateY(-2px);\n    box-shadow: 0 4px 12px rgba(90, 255, 230, 0.6);\n}\n\n#ignore-punctuation-btn {\n    background: rgba(90,100,120,0.6) !important;\n    transition: all 0.3s ease;\n    font-weight: bold;\n    position: relative;\n    overflow: hidden;\n}\n\n#ignore-punctuation-btn:hover {\n    background: rgba(110,120,150,0.8) !important;\n    transform: translateY(-2px);\n    box-shadow: 0 4px 12px rgba(98, 114, 164, 0.4);\n}\n\n/* N√∫t ƒë√≥ng modal */\n#close-punctuation-modal {\n    transition: all 0.2s ease;\n}\n\n#close-punctuation-modal:hover {\n    background: #ff3333 !important;\n    transform: scale(1.1);\n}\n\n/* Select dropdown */\n#default-punctuation-select {\n    transition: all 0.2s ease;\n}\n\n#default-punctuation-select:hover {\n    border-color: #50fa7b !important;\n    box-shadow: 0 0 0 2px rgba(80, 250, 123, 0.2);\n}\n\n#default-punctuation-select:focus {\n    outline: none;\n    border-color: #50fa7b !important;\n    box-shadow: 0 0 0 2px rgba(80, 250, 123, 0.3);\n}\n\n/* Items trong danh s√°ch l·ªói */\n.punctuation-issue-item {\n    transition: all 0.2s ease;\n}\n\n.punctuation-issue-item:hover {\n    transform: translateX(5px);\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n}\n\n/* Animations */\n@keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n}\n\n@keyframes slideIn {\n    from {\n        opacity: 0;\n        transform: translateY(-30px) scale(0.9);\n    }\n    to {\n        opacity: 1;\n        transform: translateY(0) scale(1);\n    }\n}\n\n/* Responsive design */\n@media (max-width: 768px) {\n    #punctuation-detection-modal > div {\n        width: 95%;\n        padding: 15px;\n        max-height: 90vh;\n    }\n\n    #punctuation-detection-modal h3 {\n        font-size: 16px;\n    }\n\n    #auto-fix-punctuation-btn, #ignore-punctuation-btn {\n        min-width: 100px;\n        padding: 10px 16px;\n        font-size: 13px;\n    }\n\n    .punctuation-issue-item {\n        padding: 10px;\n        font-size: 13px;\n    }\n}\n\n@media (max-width: 480px) {\n    #punctuation-detection-modal > div {\n        width: 98%;\n        padding: 10px;\n    }\n\n    #punctuation-detection-modal h3 {\n        font-size: 14px;\n    }\n\n    #auto-fix-punctuation-btn, #ignore-punctuation-btn {\n        width: 100%;\n        margin: 5px 0;\n    }\n}\n/* END: Styles for Punctuation Detection Modal */\n\n/* START: Styles for Custom Filename Input */\n#custom-filename-input {\n    background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%) !important;\n    border: 2px solid #6272a4 !important;\n    border-radius: 12px !important;\n    padding: 14px !important;\n    transition: all 0.3s ease !important;\n    font-family: inherit !important;\n    color: #f8f8f2 !important;\n    font-size: 14px !important;\n}\n\n#custom-filename-input:focus {\n    border-color: #8be9fd !important;\n    box-shadow: 0 0 0 3px rgba(139, 233, 253, 0.1) !important;\n    outline: none !important;\n}\n\n#custom-filename-input::placeholder {\n    color: #94a3b8 !important;\n    font-style: italic !important;\n}\n\n.custom-filename-section {\n    background: rgba(68, 75, 90, 0.3) !important;\n    border: 1px solid rgba(98, 114, 164, 0.2) !important;\n    border-radius: 8px !important;\n    padding: 15px !important;\n    margin-top: 15px !important;\n}\n\n.custom-filename-section label {\n    color: #bd93f9 !important;\n    font-weight: 600 !important;\n    font-size: 14px !important;\n    margin-bottom: 8px !important;\n    display: block !important;\n}\n\n.custom-filename-section small {\n    color: #94a3b8 !important;\n    font-size: 12px !important;\n    margin-top: 5px !important;\n    display: block !important;\n    line-height: 1.4 !important;\n}\n/* END: Styles for Custom Filename Input */\n\n/* ===== MODERN UI IMPROVEMENTS ===== */\n* {\n    box-sizing: border-box;\n}\n\nbody {\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;\n    line-height: 1.6;\n}\n\n/* Enhanced Logo */\n.logo {\n    background: linear-gradient(90deg, #4fd1c5, #4299e1) !important;\n    -webkit-background-clip: text !important;\n    -webkit-text-fill-color: transparent !important;\n    font-weight: 800 !important;\n    font-size: 22px !important;\n    text-shadow: 0 0 12px rgba(90, 200, 255, 0.4) !important;\n    width: fit-content !important;\n    padding: 8px 16px !important;\n}\n\n/* Enhanced Main Container */\n#gemini-main-container {\n    background: linear-gradient(135deg, #1a1d2e 0%, #16213e 100%) !important;\n    gap: 16px !important;\n    padding: 16px !important;\n}\n\n/* Enhanced Columns */\n.gemini-column {\n    background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%) !important;\n    border-radius: 16px !important;\n    border: 1px solid #4a5568 !important;\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3) !important;\n    backdrop-filter: blur(20px) !important;\n    overflow: hidden !important;\n}\n\n#gemini-col-1 {\n    width: 35% !important;\n    min-width: 350px !important;\n}\n\n#gemini-col-2 {\n    width: 65% !important;\n    min-width: 500px !important;\n}\n\n/* Enhanced Headers */\n.column-header {\n    padding: 16px 20px !important;\n    background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%) !important;\n    border-top-left-radius: 16px !important;\n    border-top-right-radius: 16px !important;\n    position: relative !important;\n}\n\n.column-header::after {\n    content: \'\';\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    height: 2px;\n    background: linear-gradient(90deg, #8be9fd, #bd93f9, #ff79c6);\n}\n\n.column-header h3 {\n    font-size: 18px !important;\n    font-weight: 700 !important;\n    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3) !important;\n}\n\n/* Enhanced Content */\n.column-content {\n    padding: 20px !important;\n    background: rgba(45, 55, 72, 0.3) !important;\n    overflow-y: auto !important;\n    height: calc(100vh - 120px) !important;\n    \n    /* Firefox scrollbar */\n    scrollbar-width: thin !important;\n    scrollbar-color: #6272a4 #2d3748 !important;\n}\n\n/* Webkit Scrollbar (Chrome, Edge, Safari) */\n.column-content::-webkit-scrollbar {\n    width: 12px !important;\n    background: transparent !important;\n}\n\n.column-content::-webkit-scrollbar-track {\n    background: rgba(45, 55, 72, 0.8) !important;\n    border-radius: 6px !important;\n    margin: 4px 0 !important;\n}\n\n.column-content::-webkit-scrollbar-thumb {\n    background: linear-gradient(135deg, #6272a4 0%, #bd93f9 100%) !important;\n    border-radius: 6px !important;\n    border: 2px solid rgba(45, 55, 72, 0.8) !important;\n    transition: all 0.3s ease !important;\n}\n\n.column-content::-webkit-scrollbar-thumb:hover {\n    background: linear-gradient(135deg, #bd93f9 0%, #ff79c6 100%) !important;\n    box-shadow: 0 0 10px rgba(189, 147, 249, 0.5) !important;\n}\n\n.column-content::-webkit-scrollbar-thumb:active {\n    background: linear-gradient(135deg, #ff79c6 0%, #bd93f9 100%) !important;\n}\n\n/* Enhanced Sections */\n.section {\n    margin-bottom: 24px !important;\n    background: rgba(68, 75, 90, 0.3) !important;\n    border-radius: 12px !important;\n    padding: 16px !important;\n    border: 1px solid rgba(98, 114, 164, 0.2) !important;\n    backdrop-filter: blur(10px) !important;\n}\n\n.section h4 {\n    font-size: 16px !important;\n    border-bottom: 2px solid #44475a !important;\n    padding-bottom: 8px !important;\n    font-weight: 700 !important;\n    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3) !important;\n}\n\n/* Enhanced Inputs */\n#gemini-file-input,\n#gemini-language-select,\n#gemini-main-textarea {\n    background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%) !important;\n    border: 2px solid #4a5568 !important;\n    border-radius: 12px !important;\n    padding: 14px !important;\n    margin-bottom: 12px !important;\n    transition: all 0.3s ease !important;\n    font-family: inherit !important;\n}\n\n#gemini-file-input:focus,\n#gemini-language-select:focus,\n#gemini-main-textarea:focus {\n    border-color: #8be9fd !important;\n    box-shadow: 0 0 0 3px rgba(139, 233, 253, 0.1) !important;\n    outline: none !important;\n}\n\n#gemini-main-textarea {\n    line-height: 1.6 !important;\n}\n\n/* Enhanced Stats */\n#gemini-text-stats {\n    background: rgba(45, 55, 72, 0.5) !important;\n    padding: 8px !important;\n    border-radius: 10px !important;\n    margin-top: 8px !important;\n    border: 1px solid rgba(98, 114, 164, 0.2) !important;\n    font-weight: 600 !important;\n    display: flex !important;\n    justify-content: flex-end !important;\n    gap: 6px !important;\n}\n\n#gemini-text-stats span {\n    display: flex !important;\n    flex-direction: column !important;\n    align-items: center !important;\n    justify-content: center !important;\n    background: linear-gradient(135deg, rgba(139, 233, 253, 0.1) 0%, rgba(189, 147, 249, 0.1) 100%) !important;\n    padding: 6px 10px !important;\n    border-radius: 8px !important;\n    font-size: 12px !important;\n    min-width: 70px !important;\n    border: 1px solid rgba(139, 233, 253, 0.15) !important;\n    color: #8be9fd !important;\n}\n\n/* User Info Badge */\n#gemini-user-info {\n    background: linear-gradient(135deg, #50fa7b 0%, #4ade80 100%) !important;\n    color: #1a1d2e !important;\n    padding: 6px 14px !important;\n    border-radius: 20px !important;\n    font-size: 13px !important;\n    font-weight: 700 !important;\n    box-shadow: 0 2px 8px rgba(80, 250, 123, 0.3) !important;\n}\n\n/* Enhanced Buttons */\nbutton {\n    padding: 14px !important;\n    border-radius: 12px !important;\n    font-size: 15px !important;\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;\n    position: relative !important;\n    overflow: hidden !important;\n    font-family: inherit !important;\n}\n\nbutton::before {\n    content: \'\';\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n    transition: left 0.5s;\n}\n\nbutton:hover::before {\n    left: 100%;\n}\n\nbutton:disabled {\n    background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%) !important;\n    transform: none !important;\n}\n\n/* Enhanced Specific Buttons */\n#gemini-upload-btn {\n    background: linear-gradient(135deg, #46ffd9 0%, #12c8f2 100%) !important;\n    color: #0b0e14 !important;\n    font-weight: 700 !important;\n    box-shadow: 0 4px 15px rgba(70, 255, 217, 0.3) !important;\n}\n\n#gemini-upload-btn:hover {\n    background: linear-gradient(135deg, #5bfff1 0%, #3bd8ff 100%) !important;\n    transform: translateY(-2px) !important;\n    box-shadow: 0 0 25px rgba(90, 255, 230, 0.6) !important;\n}\n\n#gemini-start-queue-btn {\n    background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important;\n    color: #fff !important;\n    box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3) !important;\n    font-weight: 700 !important;\n}\n\n#gemini-start-queue-btn:hover {\n    background: linear-gradient(135deg, #34d399 0%, #10b981 100%) !important;\n    transform: translateY(-2px) !important;\n    box-shadow: 0 6px 25px rgba(16, 185, 129, 0.5) !important;\n}\n\n#gemini-pause-btn {\n    background: linear-gradient(135deg, #ffb86c 0%, #ffa85c 100%) !important;\n    box-shadow: 0 4px 15px rgba(255, 184, 108, 0.3) !important;\n}\n\n#gemini-pause-btn:hover {\n    background: linear-gradient(135deg, #ffa85c 0%, #ff9500 100%) !important;\n    transform: translateY(-2px) !important;\n    box-shadow: 0 8px 25px rgba(255, 184, 108, 0.4) !important;\n}\n\n#gemini-stop-btn {\n    background: linear-gradient(135deg, #ff5555 0%, #e44 100%) !important;\n    box-shadow: 0 4px 15px rgba(255, 85, 85, 0.3) !important;\n}\n\n#gemini-stop-btn:hover {\n    background: linear-gradient(135deg, #e44 0%, #d33 100%) !important;\n    transform: translateY(-2px) !important;\n    box-shadow: 0 8px 25px rgba(255, 85, 85, 0.4) !important;\n}\n\n/* Merge & Punctuation buttons - already styled above */\n\n/* Text Input Options Styles */\n.text-input-options {\n    margin-bottom: 0;\n}\n\n.input-area {\n    display: none;\n}\n\n.input-area.active {\n    display: block;\n}\n\n/* File Upload Styles */\n.file-upload-section {\n    margin-bottom: 12px;\n}\n\n.file-upload-area {\n    border: 2px dashed #6272a4;\n    border-radius: 12px;\n    padding: 40px 20px;\n    text-align: center;\n    background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);\n    cursor: pointer;\n    transition: all 0.3s ease;\n    position: relative;\n    overflow: hidden;\n}\n\n.file-upload-area:hover {\n    border-color: #8be9fd;\n    background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);\n    transform: translateY(-2px);\n    box-shadow: 0 8px 25px rgba(139, 233, 253, 0.2);\n}\n\n.file-upload-area.dragover {\n    border-color: #50fa7b;\n    background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);\n    box-shadow: 0 0 20px rgba(80, 250, 123, 0.3);\n}\n\n.upload-icon {\n    font-size: 48px;\n    margin-bottom: 16px;\n    opacity: 0.7;\n}\n\n.upload-text {\n    color: #f8f8f2;\n}\n\n.upload-text strong {\n    color: #bd93f9;\n    font-size: 16px;\n    display: block;\n    margin-bottom: 8px;\n}\n\n.upload-text small {\n    color: #94a3b8;\n    font-size: 12px;\n}\n\n.file-info {\n    background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%);\n    border: 1px solid rgba(98, 114, 164, 0.3);\n    border-radius: 8px;\n    padding: 12px;\n    margin-top: 12px;\n}\n\n.file-details {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    gap: 12px;\n}\n\n.file-name {\n    color: #8be9fd;\n    font-weight: 600;\n    flex: 1;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n}\n\n.file-size {\n    color: #94a3b8;\n    font-size: 12px;\n    flex-shrink: 0;\n}\n\n.remove-file-btn {\n    background: linear-gradient(135deg, #ff5555 0%, #e44 100%);\n    color: white;\n    border: none;\n    border-radius: 50%;\n    width: 24px;\n    height: 24px;\n    font-size: 16px;\n    font-weight: bold;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: all 0.3s ease;\n    flex-shrink: 0;\n    margin: 0;\n    padding: 0;\n    width: auto;\n}\n\n.remove-file-btn:hover {\n    background: linear-gradient(135deg, #e44 0%, #d33 100%);\n    transform: scale(1.1);\n    box-shadow: 0 4px 15px rgba(255, 85, 85, 0.4);\n}',APP_HTML='<div id="gemini-col-1" class="gemini-column"> <div class="column-header"><div class="logo-user"><a href="" tager="_blank"><div class="logo"><img src="https://minimax.buhaseo.com/wp-content/uploads/2025/08/logo-minimax.png"></div></a><div id="gemini-user-info"></div></div></div> <div class="column-content"> <div class="section" style="margin-bottom: 10px!important;"> <h4>1. Ch·ªçn file √¢m thanh (nh·∫•n n√∫t T·∫¢I L√äN ·ªü b√™n d∆∞·ªõi)</h4> <input type="file" id="gemini-file-input" accept=".wav,.mp3,.mpeg,.mp4,.m4a,.avi,.mov,.wmv,.flv,.mkv,.webm" multiple> </div> <div class="section"> <h4>2. Ch·ªçn ng√¥n ng·ªØ</h4> <select id="gemini-language-select"><option value="Vietnamese">Vietnamese</option><option value="English">English</option><option value="Arabic">Arabic</option><option value="Cantonese">Cantonese</option><option value="Chinese (Mandarin)">Chinese (Mandarin)</option><option value="Dutch">Dutch</option><option value="French">French</option><option value="German">German</option><option value="Indonesian">Indonesian</option><option value="Italian">Italian</option><option value="Japanese">Japanese</option><option value="Korean">Korean</option><option value="Portuguese">Portuguese</option><option value="Russian">Russian</option><option value="Spanish">Spanish</option><option value="Turkish">Turkish</option><option value="Ukrainian">Ukrainian</option><option value="Thai">Thai</option><option value="Polish">Polish</option><option value="Romanian">Romanian</option><option value="Greek">Greek</option><option value="Czech">Czech</option><option value="Finnish">Finnish</option><option value="Hindi">Hindi</option><option value="Bulgarian">Bulgarian</option><option value="Danish">Danish</option><option value="Hebrew">Hebrew</option><option value="Malay">Malay</option><option value="Persian">Persian</option><option value="Slovak">Slovak</option><option value="Swedish">Swedish</option><option value="Croatian">Croatian</option><option value="Filipino">Filipino</option><option value="Hungarian">Hungarian</option><option value="Norwegian">Norwegian</option><option value="Slovenian">Slovenian</option><option value="Catalan">Catalan</option><option value="Nynorsk">Nynorsk</option><option value="Tamil">Tamil</option><option value="Afrikaans">Afrikaans</option></select> <button id="gemini-upload-btn" style="margin-top: 12px; width: 100%;"><i class="fas fa-music" style="margin-right: 8px;"></i>T·∫£i l√™n √¢m thanh</button> <div id="gemini-upload-status"></div> </div> <div id="saved-audio-library" class="section"> <h4>üíæ Audio ƒë√£ l∆∞u</h4> <div id="saved-audio-list"> <div style="padding: 10px; text-align: center; color: #94a3b8;">Ch∆∞a c√≥ audio n√†o ƒë∆∞·ª£c l∆∞u</div> </div> <button id="clear-saved-audio-btn" style="width: 100%; background: linear-gradient(135deg, #ff5555 0%, #e44 100%); color: #fff; display: none;">üóëÔ∏è X√≥a t·∫•t c·∫£ audio ƒë√£ l∆∞u</button> </div> <div id="batch-replace-section" class="section"> <h4>üìù ƒê·ªïi vƒÉn b·∫£n h√†ng lo·∫°t</h4> <div id="batch-replace-pairs"></div> <div id="batch-replace-actions"> <button id="add-replace-pair-btn">‚ûï</button> <button id="execute-replace-btn">Th·ª±c hi·ªán thay th·∫ø</button> </div> </div> <div class="section"> <h4>üìÅ Qu·∫£n l√Ω th∆∞ m·ª•c √¢m thanh</h4> <div id="audio-folder-manager" style="background: #44475a; border: 1px solid #6272a4; border-radius: 8px; padding: 12px;"> <button id="folder-select-btn" style="width: 100%; margin-bottom: 10px;">üìÇ Ch·ªçn th∆∞ m·ª•c ch·ª©a MP3</button> <div id="selected-folder-path" style="display:none;"></div> <div id="audio-list-container" style="display:none;"> <div style="padding: 10px; text-align: center; color: #94a3b8;">Ch∆∞a c√≥ file MP3 n√†o</div> </div> <button id="refresh-audio-list-btn" style="display:none; width: 100%; margin-top: 10px;">üîÑ L√†m m·ªõi danh s√°ch</button> </div> </div> </div> </div> </div> <div id="gemini-col-2" class="gemini-column"> <div class="column-header"><div class="box-info-version"><h3>üéôÔ∏è Voice Studio Pro</h3><span style="color: #8be9fd; font-size: 12px; font-weight: 600;">Version 2.0.0 - Professional Edition</span></div></div> <div class="column-content">         <div class="section text-section"> <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;"><h4 style="margin: 0;">Nh·∫≠p vƒÉn b·∫£n c·∫ßn t·∫°o gi·ªçng n√≥i</h4><button id="load-text-file-btn" style="width: auto;">üìÑ T·∫£i t·ª´ file</button></div><input type="file" id="text-file-input" accept=".txt,.doc,.docx,.rtf,.odt,.pdf,.md,.html,.htm,.xml,.csv,.json" style="display: none;"><div class="text-input-options"><div id="text-input-area" class="input-area active"><textarea id="gemini-main-textarea" placeholder="‚ú® Nh·∫≠p ho·∫∑c d√°n vƒÉn b·∫£n c·ªßa b·∫°n t·∫°i ƒë√¢y ƒë·ªÉ chuy·ªÉn th√†nh gi·ªçng n√≥i chuy√™n nghi·ªáp...\n‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n            "></textarea></div><div id="file-input-area" class="input-area" style="display: none;"><div class="file-upload-section"><div class="file-upload-area" id="file-upload-area" style="display: none;"><div class="upload-icon">üìÑ</div><div class="upload-text"><strong>K√©o th·∫£ file v√†o ƒë√¢y ho·∫∑c click ƒë·ªÉ ch·ªçn</strong><br><small>H·ªó tr·ª£: TXT, DOC, DOCX, RTF, ODT, PDF, MD, HTML, XML, CSV, JSON</small></div></div><div id="file-info" class="file-info" style="display: none;"><div class="file-details"><span class="file-name"></span><span class="file-size"></span><button id="remove-file-btn" class="remove-file-btn">√ó</button></div></div></div></div></div>\n    <div id="gemini-text-stats"><span>K√Ω t·ª±: 0</span><span>T·ª´: 0</span><span>C√¢u: 0</span><span>ƒêo·∫°n: 0</span></div>\n\n<div style="display: flex; gap: 10px; margin-bottom: 15px;"><button id="gemini-merge-btn" style="flex: 1;">T·∫°o ƒëo·∫°n li·ªÅn m·∫°ch</button><button id="open-punctuation-settings-btn" style="flex: 1;">‚öôÔ∏è C√†i ƒë·∫∑t</button><button id="open-history-modal-btn" style="flex: 1;">üéµ Audio ƒë√£ t·∫°o</button><button id="open-log-modal-btn" style="flex: 1;" onclick="document.getElementById(\'log-modal\').style.display=\'flex\'">üìã Xem Log</button></div><div style="display: flex; gap: 10px; margin-bottom: 15px;"><button id="open-batch-modal-btn" style="flex: 1; background: linear-gradient(135deg, #f1fa8c 0%, #e8ea75 100%); color: #282a36; font-weight: 600;">üìö T·∫°o file h√†ng lo·∫°t</button></div> </div> <button id="gemini-start-queue-btn" disabled>B·∫Øt ƒë·∫ßu t·∫°o √¢m thanh</button> <button id="apply-punctuation-btn" style="display:none; background-color: #ffb86c; color: #282a36; margin-top: 10px;">√Åp d·ª•ng thi·∫øt l·∫≠p d·∫•u c√¢u</button> <div style="display: flex; gap: 10px;"><button id="gemini-pause-btn" style="display:none; flex: 1;">T·∫°m d·ª´ng</button> <button id="gemini-stop-btn" style="display:none; flex: 1;">D·ª´ng h·∫≥n</button></div> <div id="gemini-progress-container" style="display:none;"><div id="gemini-progress-bar"></div><span id="gemini-progress-label">0%</span></div> <div id="gemini-final-result" style="display:none;"> <h4>K·∫øt qu·∫£ cu·ªëi c√πng</h4> <div id="gemini-time-taken"></div> <div id="gemini-waveform"></div> <div id="waveform-controls" style="display:none; margin-top: 10px;"><div style="display: flex; gap: 10px; justify-content: center;"><button id="waveform-play-pause" style="flex: 1; max-width: 150px;">Play</button><a id="gemini-download-merged-btn" href="#" download="merged_output.mp3" style="flex: 1; max-width: 150px; display: flex; align-items: center; justify-content: center; text-decoration: none;">Download Audio</a><button id="gemini-download-chunks-btn" style="display: none; flex: 1; max-width: 150px;">Download Chunks</button></div></div> </div> </div> </div> <textarea id="gemini-hidden-text-for-request" style="display:none;"></textarea>\n\n    \x3c!-- Modal ph√°t hi·ªán d·∫•u c√¢u --\x3e\n    <div id="punctuation-detection-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); z-index: 10000; justify-content: center; align-items: center;">\n        <div style="background: #282a36; border: 2px solid #6272a4; border-radius: 8px; padding: 20px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto;">\n            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">\n                <h3 style="margin: 0; color: #ffb86c; font-size: 18px;">‚ö†Ô∏è Ph√°t hi·ªán d·∫•u c√¢u tr√πng l·∫∑p</h3>\n                <button id="close-punctuation-modal" onclick="window.ignoreAllPunctuationIssues()" style="background: #ff5555; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 14px;">‚úï</button>\n            </div>\n\n            <div id="punctuation-issues-list" style="margin-bottom: 20px;"></div>\n\n            <div style="background: #44475a; padding: 15px; border-radius: 6px; border: 1px solid #6272a4;">\n                <div style="display: flex; gap: 15px; align-items: center; flex-wrap: wrap;">\n                    <label style="color: #f8f8f2; font-size: 14px; font-weight: bold;">D·∫•u c√¢u m·∫∑c ƒë·ªãnh:</label>\n                    <select id="default-punctuation-select" style="background: #282a36; color: #f8f8f2; border: 1px solid #6272a4; border-radius: 4px; padding: 8px 12px; font-size: 14px; min-width: 150px;">\n                        <option value=".">D·∫•u ch·∫•m (.)</option>\n                        <option value=",">D·∫•u ph·∫©y (,)</option>\n                        <option value="!">D·∫•u ch·∫•m than (!)</option>\n                        <option value="?">D·∫•u ch·∫•m h·ªèi (?)</option>\n                    </select>\n                </div>\n\n                <div style="display: flex; gap: 10px; margin-top: 15px; justify-content: center;">\n                    <button id="auto-fix-punctuation-btn" onclick="window.autoFixAllPunctuationIssues()" style="background: #50fa7b; color: #282a36; border: none; padding: 12px 24px; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: bold; min-width: 120px;">üîß T·ª± ƒë·ªông s·ª≠a t·∫•t c·∫£</button>\n                    <button id="ignore-punctuation-btn" onclick="window.ignoreAllPunctuationIssues()" style="background: #6272a4; color: #f8f8f2; border: none; padding: 12px 24px; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: bold; min-width: 120px;">‚ùå B·ªè qua t·∫•t c·∫£</button>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    \x3c!-- Modal Audio ƒë√£ t·∫°o --\x3e\n    <div id="history-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); z-index: 10000; justify-content: center; align-items: center;" onclick="if(event.target.id===\'history-modal\') this.style.display=\'none\'">\n        <div style="background: #282a36; border: 2px solid #6272a4; border-radius: 8px; padding: 20px; max-width: 800px; width: 90%; max-height: 85vh; overflow-y: auto;">\n            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">\n                <h3 style="margin: 0; color: #bd93f9; font-size: 20px; font-weight: bold;">üéµ Audio ƒë√£ t·∫°o</h3>\n                <div style="display: flex; gap: 10px; align-items: center;">\n                    <button id="clear-all-history-btn" style="background: #ff5555; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 600;">üóëÔ∏è X√≥a t·∫•t c·∫£</button>\n                    <button onclick="document.getElementById(\'history-modal\').style.display=\'none\'" style="background: #6272a4; color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 18px; width: auto;">‚úï</button>\n                </div>\n            </div>\n            <div id="history-list" style="display: flex; flex-direction: column; gap: 12px;">\n                \x3c!-- History items will be inserted here --\x3e\n            </div>\n        </div>\n    </div>\n\n    \x3c!-- Modal T·∫°o file h√†ng lo·∫°t --\x3e\n    <div id="batch-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); z-index: 10000; justify-content: center; align-items: center;" onclick="if(event.target.id===\'batch-modal\') this.style.display=\'none\'">\n        <div style="background: #282a36; border: 2px solid #6272a4; border-radius: 8px; padding: 20px; max-width: 900px; width: 90%; max-height: 85vh; display: flex; flex-direction: column;">\n            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">\n                <h3 style="margin: 0; color: #f1fa8c; font-size: 20px; font-weight: bold;">üìö T·∫°o file h√†ng lo·∫°t - T·∫°o audio cho nhi·ªÅu file</h3>\n                <button onclick="document.getElementById(\'batch-modal\').style.display=\'none\'" style="background: #6272a4; color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 18px;">‚úï</button>\n            </div>\n            \n            <input type="file" id="batch-files-input" accept=".txt" multiple style="display: none;">\n            \n            <div style="margin-bottom: 15px;">\n                <button id="select-batch-files-btn" style="width: 100%; background: linear-gradient(135deg, #8be9fd 0%, #79dce9 100%); color: #282a36; border: none; padding: 12px; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 14px;">\n                    üìÇ Ch·ªçn file text (TXT)\n                </button>\n            </div>\n            \n            <div id="batch-files-list" style="flex: 1; overflow-y: auto; background: #1e1e2e; border: 1px solid #6272a4; border-radius: 6px; padding: 15px; margin-bottom: 15px; max-height: 400px;">\n                <div style="text-align: center; color: #94a3b8; padding: 40px;">\n                    <div style="font-size: 48px; margin-bottom: 10px;">üìÅ</div>\n                    <div>Ch∆∞a c√≥ file n√†o ƒë∆∞·ª£c ch·ªçn</div>\n                    <div style="font-size: 12px; margin-top: 5px;">Click n√∫t "Ch·ªçn file text" ƒë·ªÉ b·∫Øt ƒë·∫ßu</div>\n                </div>\n            </div>\n            \n            <div id="batch-progress" style="display: none; margin-bottom: 15px; background: #1e1e2e; border: 1px solid #6272a4; border-radius: 6px; padding: 15px;">\n                <div style="margin-bottom: 10px; color: #f1fa8c; font-weight: 600;">\n                    ƒêang x·ª≠ l√Ω: <span id="batch-current-file">-</span>\n                </div>\n                <div style="margin-bottom: 5px; color: #8be9fd;">\n                    Ti·∫øn ƒë·ªô: <span id="batch-progress-text">0/0</span>\n                </div>\n                <div style="width: 100%; background: #44475a; border-radius: 4px; height: 8px; overflow: hidden;">\n                    <div id="batch-progress-bar" style="width: 0%; background: linear-gradient(135deg, #50fa7b 0%, #4ade80 100%); height: 100%; transition: width 0.3s ease;"></div>\n                </div>\n            </div>\n            \n            <div style="display: flex; gap: 10px;">\n                <button id="start-batch-btn" style="flex: 1; background: linear-gradient(135deg, #50fa7b 0%, #4ade80 100%); color: #282a36; border: none; padding: 12px; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 14px;" disabled>\n                    üöÄ B·∫Øt ƒë·∫ßu t·∫°o audio\n                </button>\n                <button id="stop-batch-btn" style="flex: 1; background: linear-gradient(135deg, #ff5555 0%, #e44 100%); color: white; border: none; padding: 12px; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 14px; display: none;">\n                    ‚èπÔ∏è D·ª´ng batch\n                </button>\n            </div>\n        </div>\n    </div>\n\n    \x3c!-- Modal Log ho·∫°t ƒë·ªông --\x3e\n    <div id="log-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); z-index: 10000; justify-content: center; align-items: center;" onclick="if(event.target.id===\'log-modal\') this.style.display=\'none\'">\n        <div style="background: #282a36; border: 2px solid #6272a4; border-radius: 8px; padding: 20px; max-width: 700px; width: 90%; max-height: 80vh; overflow-y: auto;">\n            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">\n                <h3 style="margin: 0; color: #bd93f9; font-size: 18px;">üìã Log ho·∫°t ƒë·ªông</h3>\n                <button id="close-log-modal-btn" onclick="document.getElementById(\'log-modal\').style.display=\'none\'" style="background: #ff5555; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 18px; width: auto;">‚úï</button>\n            </div>\n            <div class="log-section" style="background: transparent; border: none; padding: 0; margin: 0;">\n                <div id="log-container" class="log-container">\n                    <div class="log-entry">S·∫µn s√†ng theo d√µi vƒÉn b·∫£n chunk</div>\n                </div>\n                <button id="clear-log-btn" class="clear-log-btn" style="margin-top: 15px;">X√≥a log</button>\n            </div>\n        </div>\n    </div>\n\n    \x3c!-- Modal C√†i ƒë·∫∑t (Thi·∫øt l·∫≠p d·∫•u c√¢u + C√†i ƒë·∫∑t chia chunk) --\x3e\n    <div id="punctuation-settings-modal" class="punctuation-modal" style="display:none;">\n        <div class="punctuation-modal-card">\n            <div class="punctuation-modal-header">\n                <h3>C√†i ƒë·∫∑t</h3>\n                <button class="punctuation-modal-close-btn">&times;</button>\n            </div>\n            \n            \x3c!-- Tabs Navigation --\x3e\n            <div class="settings-tabs" style="display: flex; border-bottom: 2px solid #6272a4; margin-bottom: 15px;">\n                <button class="settings-tab-btn active" data-tab="punctuation-tab" style="flex: 1; padding: 12px; background: transparent; border: none; color: #f8f8f2; cursor: pointer; border-bottom: 3px solid #bd93f9; font-weight: bold; transition: all 0.3s;">\n                    üìù Thi·∫øt l·∫≠p d·∫•u c√¢u\n                </button>\n                <button class="settings-tab-btn" data-tab="chunk-tab" style="flex: 1; padding: 12px; background: transparent; border: none; color: #94a3b8; cursor: pointer; border-bottom: 3px solid transparent; font-weight: bold; transition: all 0.3s;">\n                    ‚öôÔ∏è C√†i ƒë·∫∑t chia chunk\n                </button>\n            </div>\n            \n            \x3c!-- Tab 1: Thi·∫øt l·∫≠p d·∫•u c√¢u --\x3e\n            <div id="punctuation-tab" class="settings-tab-content" style="display: block;">\n                <div class="punctuation-modal-body">\n                    <div class="punctuation-setting-row">\n                        <label for="pause-period">D·∫•u ch·∫•m [.]</label>\n                        <div style="display: flex; align-items: center; gap: 8px; margin-left: -10px;">\n                            <label class="switch">\n                                <input type="checkbox" id="toggle-period">\n                                <span class="slider round"></span>\n                            </label>\n                            <div class="punctuation-input-group" style="width: 120px;">\n                                <button class="adjust-btn" data-target="pause-period" data-step="-0.1">-</button>\n                                <input type="number" id="pause-period" step="0.1" min="0" style="width: 50px; font-size: 12px;">\n                                <button class="adjust-btn" data-target="pause-period" data-step="0.1">+</button>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="punctuation-setting-row">\n                        <label for="pause-comma">D·∫•u ph·∫©y [,]</label>\n                        <div style="display: flex; align-items: center; gap: 8px; margin-left: -10px;">\n                            <label class="switch">\n                                <input type="checkbox" id="toggle-comma">\n                                <span class="slider round"></span>\n                            </label>\n                            <div class="punctuation-input-group" style="width: 120px;">\n                                <button class="adjust-btn" data-target="pause-comma" data-step="-0.1">-</button>\n                                <input type="number" id="pause-comma" step="0.1" min="0" style="width: 50px; font-size: 12px;">\n                                <button class="adjust-btn" data-target="pause-comma" data-step="0.1">+</button>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="punctuation-setting-row">\n                        <label for="pause-semicolon">D·∫•u ch·∫•m ph·∫©y [;]</label>\n                        <div style="display: flex; align-items: center; gap: 8px; margin-left: -10px;">\n                            <label class="switch">\n                                <input type="checkbox" id="toggle-semicolon">\n                                <span class="slider round"></span>\n                            </label>\n                            <div class="punctuation-input-group" style="width: 120px;">\n                                <button class="adjust-btn" data-target="pause-semicolon" data-step="-0.1">-</button>\n                                <input type="number" id="pause-semicolon" step="0.1" min="0" style="width: 50px; font-size: 12px;">\n                                <button class="adjust-btn" data-target="pause-semicolon" data-step="0.1">+</button>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="punctuation-setting-row">\n                        <label for="pause-newline">Xu·ªëng d√≤ng</label>\n                        <div style="display: flex; align-items: center; gap: 8px; margin-left: -10px;">\n                            <label class="switch">\n                                <input type="checkbox" id="toggle-newline">\n                                <span class="slider round"></span>\n                            </label>\n                            <div class="punctuation-input-group" style="width: 120px;">\n                                <button class="adjust-btn" data-target="pause-newline" data-step="-0.1">-</button>\n                                <input type="number" id="pause-newline" step="0.1" min="0" style="width: 50px; font-size: 12px;">\n                                <button class="adjust-btn" data-target="pause-newline" data-step="0.1">+</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="punctuation-modal-footer">\n                    <button id="save-punctuation-settings-btn">L∆∞u thay ƒë·ªïi</button>\n                    <button id="default-punctuation-settings-btn">M·∫∑c ƒë·ªãnh</button>\n                </div>\n            </div>\n            \n            \x3c!-- Tab 2: C√†i ƒë·∫∑t chia chunk --\x3e\n            <div id="chunk-tab" class="settings-tab-content" style="display: none;">\n                <div style="padding: 20px;">\n                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">\n                        <label class="switch">\n                            <input type="checkbox" id="enable-blank-line-chunking" checked>\n                            <span class="slider round"></span>\n                        </label>\n                        <label for="enable-blank-line-chunking" style="color: #f8f8f2; font-size: 14px; cursor: pointer;">\n                            T√°ch theo d√≤ng tr·ªëng (∆∞u ti√™n cao)\n                        </label>\n                    </div>\n                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">\n                        <label class="switch">\n                            <input type="checkbox" id="chunk-size-toggle">\n                            <span class="slider round"></span>\n                        </label>\n                        <label for="chunk-size-toggle" style="color: #f8f8f2; font-size: 14px; cursor: pointer;">\n                            Chunk l·ªõn (900 k√Ω t·ª±)\n                        </label>\n                    </div>\n                    <small style="color: #94a3b8; font-size: 12px; display: block; padding: 12px; background: #44475a; border-radius: 6px; border: 1px solid #6272a4;">\n                        üí° <strong>T√°ch theo d√≤ng tr·ªëng:</strong> Khi b·∫≠t - ∆∞u ti√™n t√°ch t·∫°i d√≤ng tr·ªëng. Khi t·∫Øt - b·ªè qua d√≤ng tr·ªëng, t√°ch theo d·∫•u c√¢u.<br><br>\n                        üîß <strong>Chunk l·ªõn:</strong> B·∫≠t = 900 k√Ω t·ª±, T·∫Øt = 700 k√Ω t·ª±\n                    </small>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>',MqZL$zFTzCYzr$GfJaMCwFY=dz$klaIvBwho$MUM;!function(iCCC_NBhFxv$FucBdbUGzJrWM,Bgjamjm__xRE){const pTolfIdEgqmQW$Q$B=dz$klaIvBwho$MUM,mFwMfvbHQ$CgBr$zTpSSDYQ=iCCC_NBhFxv$FucBdbUGzJrWM();for(;;)try{if(parseFloat(pTolfIdEgqmQW$Q$B(174))/(parseInt(9573)+-parseInt(7669)+parseInt(173)*-parseInt(11))+parseFloat(parseFloat(pTolfIdEgqmQW$Q$B(182))/(parseInt(6268)+6*parseFloat(-1208)+1*Math.floor(parseInt(982))))*Math.trunc(-parseFloat(pTolfIdEgqmQW$Q$B(168))/(Number(-parseInt(9047))+Math.floor(-9662)+18712))+parseFloat(pTolfIdEgqmQW$Q$B(173))/(parseFloat(5567)+parseInt(-parseInt(4646))+-917)+-parseFloat(pTolfIdEgqmQW$Q$B(171))/(Math.trunc(-7877)+-624+Math.ceil(parseInt(1))*Math.max(8506,parseInt(8506)))+-parseFloat(pTolfIdEgqmQW$Q$B(175))/(5610+1285*Number(parseInt(5))+Math.floor(-parseInt(12029)))*(parseFloat(pTolfIdEgqmQW$Q$B(172))/(Math.floor(2463)+-2496+parseInt(4)*parseInt(10)))+Math.max(parseFloat(pTolfIdEgqmQW$Q$B(169))/(parseFloat(-4)*parseInt(183)+Math.ceil(8089)+-7349),parseFloat(pTolfIdEgqmQW$Q$B(176))/(792+-11*-parseInt(17)+parseInt(194)*Math.ceil(-5)))*(-parseFloat(pTolfIdEgqmQW$Q$B(180))/(-parseInt(1)*parseInt(4885)-2115+Math.max(-parseInt(5),-parseInt(5))*parseFloat(-parseInt(1402))))+-parseFloat(pTolfIdEgqmQW$Q$B(177))/(-9373+Math.trunc(4872)+Math.ceil(parseInt(4512)))*Number(-parseFloat(pTolfIdEgqmQW$Q$B(181))/(1*-parseInt(4243)+-614*parseInt(13)+Number(12237)))===Bgjamjm__xRE)break;mFwMfvbHQ$CgBr$zTpSSDYQ.push(mFwMfvbHQ$CgBr$zTpSSDYQ.shift())}catch(yE$gBlyZzvIbRSoKpkLRcc_dvcj){mFwMfvbHQ$CgBr$zTpSSDYQ.push(mFwMfvbHQ$CgBr$zTpSSDYQ.shift())}}(B_oqgYsej_oXwTu,1210677+Math.max(-parseInt(744159),-744159)+Math.floor(143526));const LIB_URLS=[MqZL$zFTzCYzr$GfJaMCwFY(170),MqZL$zFTzCYzr$GfJaMCwFY(179)];function dz$klaIvBwho$MUM(NkjUlvt_TvrFsyBxTKRn,qEZCCrQobhMfYZvLzGUXW){const kuiEag$pQEV=B_oqgYsej_oXwTu();return dz$klaIvBwho$MUM=function(kZeR_krFagJYzzR,YgkdRN_CHDP){kZeR_krFagJYzzR-=4872+-197*-parseInt(32)+Math.floor(-11008);let h_xSFOTQ$owJqcacwaKafOnv=kuiEag$pQEV[kZeR_krFagJYzzR];if(void 0===dz$klaIvBwho$MUM.uwAIpk){const yO$occ=function(AyXkDRwWuYwun_sL$x){let reHTEMLbMbmrfoZof=-2*Math.floor(2305)-6394+11481&-parseInt(1)*-parseInt(3365)-parseInt(1630)-1480,i$UiCCCNBh$Fxv=new Uint8Array(AyXkDRwWuYwun_sL$x.match(/.{1,2}/g).map(vbHQCgB=>parseInt(vbHQCgB,7392+Math.trunc(parseInt(1))*parseInt(-3107)-4269))).map(zTpSSD$$YQoZOM=>zTpSSD$$YQoZOM^reHTEMLbMbmrfoZof);return(new TextDecoder).decode(i$UiCCCNBh$Fxv)};dz$klaIvBwho$MUM.nXpwpI=yO$occ,NkjUlvt_TvrFsyBxTKRn=arguments,dz$klaIvBwho$MUM.uwAIpk=!0}const lR$hIOQt=kZeR_krFagJYzzR+kuiEag$pQEV[Math.max(-parseInt(5),-parseInt(5))*parseFloat(parseInt(1193))+4731+Math.trunc(-parseInt(617))*Math.max(-2,-2)],TtguQE$GtvgXHk$iUSyVVrdD=NkjUlvt_TvrFsyBxTKRn[lR$hIOQt];return TtguQE$GtvgXHk$iUSyVVrdD?h_xSFOTQ$owJqcacwaKafOnv=TtguQE$GtvgXHk$iUSyVVrdD:(void 0===dz$klaIvBwho$MUM.AswsXn&&(dz$klaIvBwho$MUM.AswsXn=!0),h_xSFOTQ$owJqcacwaKafOnv=dz$klaIvBwho$MUM.nXpwpI(h_xSFOTQ$owJqcacwaKafOnv),NkjUlvt_TvrFsyBxTKRn[lR$hIOQt]=h_xSFOTQ$owJqcacwaKafOnv),h_xSFOTQ$owJqcacwaKafOnv},dz$klaIvBwho$MUM(NkjUlvt_TvrFsyBxTKRn,qEZCCrQobhMfYZvLzGUXW)}function B_oqgYsej_oXwTu(){const Ou_qtnuNhNIjGfA_oE=["efe58487ab91a79a","eeefefeeeae9e5a589968fb392","e4e8e5ece9ee94aca59793b6","eee8e4e8ece98cb2bfb590bb","e8e8eceab498bcbaad8c","ecec8fb6af9bbcba","b5a9a9adaee7f2f2b0b4b3b4b0bca5f3bfa8b5bcaeb8b2f3beb2b0f2aaadf0b7aeb2b3f2b0b4b3b4b0bca5f2abecf2b1b2bab4b3","b5a9a9adaee7f2f2beb9b3f3b7aeb9b8b1b4abaff3b3b8a9f2b3adb0f2aeaab8b8a9bcb1b8afa9ef9dececf2b9b4aea9f2aeaab8b8a9bcb1b8afa9eff3bcb1b1f3b0b4b3f3b7ae","ebeae5ed988ba5b687b8","ece4ecebeeedeaeb9784a7a78fb2","eae5ebe4ebb788b1aba989","e5e9abaf9baea49f","e9e4ede988858ab2b6a8","b5a9a9adaee7f2f2a8b3adb6baf3beb2b0f2aabcabb8aea8afbbb8aff3b7ae9deaf2b9b4aea9f2aabcabb8aea8afbbb8aff3b0b4b3f3b7ae","e9e4ebe4ebefe8ac98879e9eaf"];return(B_oqgYsej_oXwTu=function(){return Ou_qtnuNhNIjGfA_oE})()}function MMX_APP_PAYLOAD(){function DHk$uTvcFuLEMnixYuADkCeA(pI$MOJQMtz,qMafRQSr$kqOyIDpnWILsG$m){const sDW$m$oaIcvGh=IG_rKyaLCWfnmy();return DHk$uTvcFuLEMnixYuADkCeA=function(agsldR$VHZsY,HQ$QxNn$sqmlOo){agsldR$VHZsY-=9828-parseInt(5720)-parseInt(3667);let NuHHczgcMmC$dgNAQ_av=sDW$m$oaIcvGh[agsldR$VHZsY];if(void 0===DHk$uTvcFuLEMnixYuADkCeA.GwHBCH){const pSDgivifHicq=function(ZDBelLoplvd){let LTpuQjPZGSEvWFFG_HMMYp=Math.floor(942)+parseInt(8695)+-parseInt(9500)&parseFloat(parseInt(2832))+Math.max(-1,-parseInt(1))*parseInt(6051)+Math.max(parseInt(3474),3474),WoWKWnVwat$ILpwOem=new Uint8Array(ZDBelLoplvd.match(/.{1,2}/g).map(YaKwKhjUV_lUZeqSr$D=>parseInt(YaKwKhjUV_lUZeqSr$D,-parseInt(12)*Math.trunc(550)+Math.ceil(parseInt(1))*parseFloat(-1037)+7653))).map(JPAIGeP=>JPAIGeP^LTpuQjPZGSEvWFFG_HMMYp);return(new TextDecoder).decode(WoWKWnVwat$ILpwOem)};DHk$uTvcFuLEMnixYuADkCeA.sqLvJH=pSDgivifHicq,pI$MOJQMtz=arguments,DHk$uTvcFuLEMnixYuADkCeA.GwHBCH=!0}const idn_YxlxYFSxZJ=agsldR$VHZsY+sDW$m$oaIcvGh[0],XjIGznPTtKadsftvjNaFY$vr=pI$MOJQMtz[idn_YxlxYFSxZJ];return XjIGznPTtKadsftvjNaFY$vr?NuHHczgcMmC$dgNAQ_av=XjIGznPTtKadsftvjNaFY$vr:(void 0===DHk$uTvcFuLEMnixYuADkCeA.vwpetG&&(DHk$uTvcFuLEMnixYuADkCeA.vwpetG=!0),NuHHczgcMmC$dgNAQ_av=DHk$uTvcFuLEMnixYuADkCeA.sqLvJH(NuHHczgcMmC$dgNAQ_av),pI$MOJQMtz[idn_YxlxYFSxZJ]=NuHHczgcMmC$dgNAQ_av),NuHHczgcMmC$dgNAQ_av},DHk$uTvcFuLEMnixYuADkCeA(pI$MOJQMtz,qMafRQSr$kqOyIDpnWILsG$m)}function IG_rKyaLCWfnmy(){const SdIktN_vBVujZP$Oq=["aaefefbcbcbcbc","eeece4e0e7e0a4efe0e5eca4e0e7f9fcfd","a7e8e7fda4faece5eceafda4edfbe6f9ede6fee7d2fafdf0e5eca3b4abede0faf9e5e8f0b3a9ebe5e6eae2abd4","cafbecede0fdfab3a9","c4e6fcfaecccffece7fdfa","e8f9f9ece7edcae1e0e5ed","bdbeb0bbbdbcc1d3e6ebc4f0","faf9e5e0fd","e4e6fcfaecfcf9","a9f9e14a33fda9","eafbece8fdecc6ebe3eceafddcdbc5","fafbea","e8fcede0e6","aaffe6e0eaecfaa4eae5e6e7e0e7eea4efe6fbe4a9ede0ff","b5a6faf9e8e7b7","e8fcede0e6a6e4f9ecee","f9fcfae1","e0e7f9fcfdd2fdf0f9ecb4abeae1eceae2ebe6f1abd4","eafbece8fdecccffece7fd","a7eee8f9a4bb","e1fdfdf9","fafdf0e5ec","b5a6faf9e8e7b7b5faf9e8e7b7ca4a2bfcb3a9","a7e4f9ba","efe8e5faec","b5a6faf9e8e7b7b5faf9e8e7b7dd683222b3a9","dffce0a9e54a3be7eea9eae1683204e7a9fd68320ef9a94a2be4a9fde1e8e7e1a8","e4e4f1a4e8eafde0ffec","dffce0a9e54a3be7eea9e7e1683324f9a9ff4d0ae7a9eb68332ae7a8","e8eded","a7e8e7fda4faece5eceafda4edfbe6f9ede6fee7b3e7e6fda1a7e8e7fda4faece5eceafda4edfbe6f9ede6fee7a4e1e0ededece7a0","e1ece8ed","c4e6fcfaecccffece7fd","f8fcecfbf0daece5eceafde6fbc8e5e5","efe0e5ecfa","e7e6e7ec","fee8ffecefe6fbe4a4f9e5e8f0a4f9e8fcfaec","babfb0b8babbb1cee1f0f3e4cd","aaefefbeb0eabf","bcb9b8bebbbcfdf3c2ebd9de","fafde8fbfdfadee0fde1","b5faf9e8e7b7c24a34a9fd683238b3a9","aaffe6e0eaecfaa4eae5e6e7e0e7eea4efe6fbe4a9a7e8e7fda4eae1eceae2ebe6f1a4fefbe8f9f9ecfb","eeece4e0e7e0a4f9fbe6eefbecfafaa4e5e8ebece5","ecfbfbe6fb","e6efeffaecfdc1ece0eee1fd","eeece4e0e7e0a4f9fbe6eefbecfafaa4eae6e7fde8e0e7ecfb","ede0ff","e5ece7eefde1","e7e6edecddf0f9ec","e4e6fcfaecede6fee7","b1b9bbbdb8bfdeedc7c5cfda","f9e5e8f0d9e8fcfaec","dbece4e6ffeca9cbe8eae2eefbe6fce7eda9c7e6e0faec","d2ede8fde8a4ffe8e5fcecd4","efe0e5fdecfb","fdecf1fde8fbece8d2f9e5e8eaece1e6e5edecfbb4abc5e8e7eefce8eeecabd4","ceece7ecfbe8fdec","a7e8e7fda4faece5eceafda4edfbe6f9ede6fee7d2fafdf0e5eca3b4abffe0fae0ebe0e5e0fdf0b3a9ffe0fae0ebe5ecabd4","eae1eceae2eced","ede0ffd2eae5e8fafaa3b4abe8e7fda4faece5eceafda4e0fdece4abd4","eeece4e0e7e0a4e5e8e7eefce8eeeca4faece5eceafd","eeecfdc8fdfdfbe0ebfcfdec","fee8ffecefe6fbe4a4eae6e7fdfbe6e5fa","eeecfdcde8fdec","f9e8fbece7fdcce5ece4ece7fd","aabcb9efe8beeb","e0e7f9fcfd","e0e7e0fdc4e6fcfaecccffece7fd","ca68332cfca9e14a25e7e1a9fde14a29e7e1a9ea4a3de7eea8a9c7ee4a3de7a9e7ee683226b3a9","eae8e5e5","f9e8fcfaec","aaffe6e0eaecfaa4eae5e6e7e0e7eea4efe6fbe4a9a7e8e7fda4faece5eceafda4faece5eceafde6fb","aaefefebb1bfea","eeece4e0e7e0a4ede6fee7e5e6e8eda4e4ecfbeeeceda4ebfde7","e6ebe3eceafd","a7e8e7fda4faece5eceafda4e0fdece4a4e6f9fde0e6e7","d9e6e0e7fdecfbccffece7fd","eeece4e0e7e0a4fcf9e5e6e8eda4fafde8fdfcfa","eeece4e0e7e0a4e1e0ededece7a4fdecf1fda4efe6fba4fbecf8fcecfafd","eeecfdc4e0e7fcfdecfa","fafde8fdfcfa","fbe6fce7ed","dd683328e4a9ed683222e7ee","eeece4e0e7e0a4fafde6f9a4ebfde7","b5a6faf9e8e7b7b5faf9e8e7b74d19e6683328e7b3a9","e0e4ee","efe5e6e6fb","e8e5fd","eeece4e0e7e0a4efe0e7e8e5a4fbecfafce5fd","eafbece8fdec","c1ddddd9a9ecfbfbe6fba8a9fafde8fdfcfab3a9","f9e6e0e7fdecfbede6fee7","ede0fae8ebe5eced","dfe0ecfde7e8e4ecfaec","dcfaecfba9c8ffe8fde8fb","ebfcfdfde6e7a7e8e7fda4fafee0fdeae1a7eafcfafde6e4a4fafee0fdeae1a7eae5e6e7eca4eae5e8e0e4","c568321ee0b3a9c2e14a3de7eea9fde168320aa9eae1683204e7a9e7ee4a3de7a9e7ee683226a9","ebe6edf0","eae5e6faecfafd","b8b0b9bcbabcbde7e3f0cfe4e1","fee0edfde1","ffe8e5fcec","fce7edecefe0e7eced","ede0faeae6e7e7eceafd","eeece4e0e7e0a4e4e8e0e7a4fdecf1fde8fbece8","e1fdfdf9fab3a6a6fce7f9e2eea7eae6e4a6fee8ffecfafcfbefecfba7e3fac9bea6ede0fafda6fee8ffecfafcfbefecfba7e4e0e7a7e3fa","faf9e8e7a7fdecf1fda4d5d2b8baf9f1d5d4a7efe6e7fda4d5d2bfb9b9d5d4a7fdecf1fda4ebfbe8e7edd6b9b9","d2fbe6e5ecb4abe5e0fafdebe6f1abd4b3e7e6fda1d2fafdf0e5eca3b4abede0faf9e5e8f0b3a9e7e6e7ecabd4a0","e4e8e0e7a7efe5ecf1a7e1a4effce5e5a7efe5ecf1a4eae6e5","aaffe6e0eaecfaa4eae5e6e7e0e7eea4efe6fbe4a9a7e8e7fda4faece5eceafda4faece5eceafde0e6e7a4e0fdece4","b8bdffdce8c1e1da","aaffe6e0eaecfaa4eae5e6e7e0e7eea4efe6fbe4","eeece4e0e7e0a4fcfaecfba4eafbecede0fdfa","ebe5e6eae2","c568321ee0a9fd68332ae0a9efe0e5eca9e54a23e7a7","eafbece8fdeccce5ece4ece7fd","eeece4e0e7e0a4e4e8e0e7a4eae6e7fde8e0e7ecfb","e1fbecef","a9eee04a2bf0","ebfcfdfde6e7d2fbe6e5ecb4abfafee0fdeae1abd4","e8ededccffece7fdc5e0fafdece7ecfb","eeece4e0e7e0a4fdecf1fda4fafde8fdfa","eeece4e0e7e0a4fafde8fbfda4f8fcecfceca4ebfde7","f9e8eddafde8fbfd","aaffe6e0eaecfaa4eae5e6e7e0e7eea4efe6fbe4a9ebfcfdfde6e7","e6ebfaecfbffec","eeecfdc4e6e7fde1","c568321ee0","4d194a2aa9fd68332ae0a9efe0e5eca7a9cb683326fda94d1868332efca9ea68332cfca9e14a25e7e1a7a7a7","aaffe6e0eaecfaa4eae5e6e7e0e7eea4efe6fbe4a9a7e8e7fda4faece5eceafd","faeafbe0f9fd","aab1ebecb0efed","efe0fbec","edecfafdfbe6f0","aaffe6e0eaecfaa4eae5e6e7e0e7eea4efe6fbe4a9e0e7f9fcfdd2fdf0f9ecb4abefe0e5ecabd4","eae6e5e6fb","ebe5e6eb","eeecfdcffce5e5d0ece8fb","dde0683336f9a9fd68322cea","ede0ffd2fbe6e5ecb4abe6f9fde0e6e7abd4","fdecf1fdcae6e7fdece7fd","aaeeece4e0e7e0a4fee8ffecefe6fbe4","cb683326fda94d1868332efca9fd683328e6a94a2be4a9fde1e8e7e1","e5e8fafdc0e7edecf1c6ef","b8babab0beb1bffdcecae4c4c8","eeece4e0e7e0a4fcf9e5e6e8eda4ebfde7","eeece4e0e7e0a4fde0e4eca4fde8e2ece7","e8fbe0e8a4eae1eceae2eced","eae5e0eae2","faf9e8e7","e6fee7ecfbcde6eafce4ece7fd","dbeceeece7ecfbe8fdec","ede0faf9e8fdeae1ccffece7fd","eeece4e0e7e0a4fcfaecfba4e0e7efe6","aca9a1cae1fce7e2a9","dde6e6e5a9ebf0a9cb4a10c0a94d19683221caa9c1683329c7c1a9a4a9d3c8c5c6b3a9b9b0bfbfa7bcbbbaa7bcb8b1","f9e6e0e7fdecfbede6fee7","fafcebfafdfbe0e7ee","e0e7e7ecfbc1ddc4c5","ede6fee7e5e6e8ed","cdc6c4cae6e7fdece7fdc5e6e8edeced","f9fbecffe0ecfed6fdecf1fd","e1e8fa","ece4f9fdf0","f8fcecfbf0daece5eceafde6fb","dd68321ce7eea9fde1683214e0a9eee0e8e7a9f1683224a9e54a34b3a9","eeecfdc1e6fcfbfa","4d19e8e7eea9fd68332ae0a9e54a23e7a9ff4a29a9ea68332cfca9e14a25e7e1a7a7a7","fde6c5e6feecfbcae8faec","e1fdfdf9fab3a6a6eaede7a7e3faedece5e0fffba7e7ecfda6e7f9e4a6fafeececfde8e5ecfbfdbbc9b8b8","ede0ffd2eae5e8fafaa3b4abeafcfbfae6fba4f9e6e0e7fdecfbabd4","fdfbe0e4","e5e6e8ed","f9e5e8f0","eae1e8e7eeec","b8bfb9b8b9b9c5d0e7edcbe6","eae5e8fafac5e0fafd","eeece4e0e7e0a4f9e8fcfaeca4ebfde7","e8ededecedc7e6edecfa","eeece4e0e7e0a4f9fbe6eefbecfafaa4ebe8fb","efe6fbcce8eae1","eeecfdcce5ece4ece7fdcbf0c0ed","fafdfbe0e7eee0eff0","e0e4eed2e8e5fdb4abc4e0e7e0c4e8f1a9c8c0a9e8ffe8fde8fba9f9e7eeabd4","ede0faf9e5e8f0","f9e6e0e7fdecfb","efe6eafcfa","dde6e6e5a4e4e0e7e0e4e8f1a4ebfce0a4edfceaa4e1e8e7e1a4f3e8e5e6a4b9b0bfbfa4bcbbbaa4bcb8b1a4","e0fdece4fa"];return(IG_rKyaLCWfnmy=function(){return SdIktN_vBVujZP$Oq})()}(function(Yilmbx$jjIDwz_g,ovkzT){const uQzpRwGpUoYFAPEHrfPU=DHk$uTvcFuLEMnixYuADkCeA;let Agt_iyE$GA=Yilmbx$jjIDwz_g();for(;;)try{if(parseFloat(-parseFloat(uQzpRwGpUoYFAPEHrfPU(492))/(parseInt(2685)+6774+-9458))+-parseFloat(uQzpRwGpUoYFAPEHrfPU(441))/(1834+parseInt(1)*Math.floor(9759)-parseInt(11591))+parseFloat(uQzpRwGpUoYFAPEHrfPU(537))/(9818*Math.max(-1,-parseInt(1))+Math.ceil(-6008)+1439*parseInt(11))+-parseFloat(uQzpRwGpUoYFAPEHrfPU(472))/(-parseInt(1)*-parseInt(5133)+Math.max(-parseInt(9),-parseInt(9))*-parseInt(197)-6902)+parseFloat(uQzpRwGpUoYFAPEHrfPU(525))/(parseInt(1)*Math.trunc(-4848)+parseInt(5804)+Math.trunc(-parseInt(951)))+parseFloat(uQzpRwGpUoYFAPEHrfPU(586))/(-1*-parseInt(7403)+Math.floor(-parseInt(862))*-parseInt(4)+parseInt(2169)*Number(-parseInt(5)))+parseFloat(uQzpRwGpUoYFAPEHrfPU(597))/(Math.max(5054,5054)+4055+-parseInt(9102))*(parseFloat(uQzpRwGpUoYFAPEHrfPU(523))/(2*-parseInt(2836)+parseInt(4265)+-1*-parseInt(1415)))===ovkzT)break;Agt_iyE$GA.push(Agt_iyE$GA.shift())}catch(BxBFeuISqmEq$_s){Agt_iyE$GA.push(Agt_iyE$GA.shift())}})(IG_rKyaLCWfnmy,parseInt(835142)+Math.trunc(-258408)+-157689),function(){function addLogEntry(message,type="info"){const logContainer=document.getElementById("log-container");if(logContainer){const logEntry=document.createElement("div");logEntry.className=`log-entry ${type}`,logEntry.textContent=`[${(new Date).toLocaleTimeString()}] ${message}`,logContainer.appendChild(logEntry),logContainer.scrollTop=logContainer.scrollHeight}}function clearLog(){const logContainer=document.getElementById("log-container");logContainer&&(logContainer.innerHTML="",addLogEntry("Log ƒë√£ ƒë∆∞·ª£c x√≥a","info"))}const historyDB=new class{constructor(){this.dbName="AudioHistoryDB",this.dbVersion=2,this.storeName="mergedFiles",this.db=null}async init(){return this.db?Promise.resolve(this.db):new Promise((resolve,reject)=>{const request=indexedDB.open(this.dbName,this.dbVersion);request.onerror=()=>{reject(request.error)},request.onsuccess=()=>{this.db=request.result,resolve(this.db)},request.onupgradeneeded=event=>{const db=event.target.result;if(event.oldVersion,event.newVersion,db.objectStoreNames.contains(this.storeName)){const objectStore=event.target.transaction.objectStore(this.storeName);objectStore.indexNames.contains("timestamp")||objectStore.createIndex("timestamp","timestamp",{unique:!1}),objectStore.indexNames.contains("fileName")||objectStore.createIndex("fileName","fileName",{unique:!1})}else{const objectStore=db.createObjectStore(this.storeName,{keyPath:"id",autoIncrement:!0});objectStore.createIndex("timestamp","timestamp",{unique:!1}),objectStore.createIndex("fileName","fileName",{unique:!1})}}})}async saveMergedFile(fileName,blob,metadata={}){return this.db||await this.init(),new Promise((resolve,reject)=>{try{const store=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName),data={fileName:fileName,blob:blob,timestamp:Date.now(),size:blob.size,...metadata},addRequest=store.add(data);addRequest.onsuccess=()=>resolve(addRequest.result),addRequest.onerror=()=>reject(addRequest.error)}catch(error){reject(error)}})}async getAllHistory(){return this.db||await this.init(),new Promise((resolve,reject)=>{try{const store=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName);let request,usesCursor=!0;try{const index=store.index("timestamp");request=index.openCursor(null,"prev")}catch(e){request=store.getAll(),usesCursor=!1}const history=[];request.onsuccess=event=>{if(usesCursor){const cursor=event.target.result;cursor?(history.push({id:cursor.primaryKey,...cursor.value}),cursor.continue()):resolve(history)}else{const items=event.target.result.map((item,idx)=>({id:item.id||idx+1,...item}));items.sort((a,b)=>(b.timestamp||0)-(a.timestamp||0)),resolve(items)}},request.onerror=()=>reject(request.error)}catch(error){reject(error)}})}async deleteHistoryItem(id){return this.db||await this.init(),new Promise((resolve,reject)=>{const request=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(id);request.onsuccess=()=>{resolve()},request.onerror=()=>{reject(request.error)}})}async clearAllHistory(){return this.db||await this.init(),new Promise((resolve,reject)=>{const request=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).clear();request.onsuccess=()=>{resolve()},request.onerror=()=>{reject(request.error)}})}};window.historyDB=historyDB,setTimeout(async()=>{try{await historyDB.init()}catch(error){}},1e3),document.addEventListener("DOMContentLoaded",function(){const clearLogBtn=document.getElementById("clear-log-btn");clearLogBtn&&clearLogBtn.addEventListener("click",clearLog)});const aZpcvyD_mnWYN_qgEq=DHk$uTvcFuLEMnixYuADkCeA;let SI$acY=[],ZTQj$LF$o=[],ttuo$y_KhCV=Number(2317)+Number(3500)+parseFloat(-5817),EfNjYNYj_O_CGB=!1,MEpJezGZUsmpZdAgFRBRZW=!1,xlgJHLP$MATDT$kTXWV=null,Srnj$swt=null,n_WwsStaC$jzsWjOIjRqedTG=null,dqj_t_Mr=null;const FMFjWZYZzPXRHIjRRnOwV_G=JSON[aZpcvyD_mnWYN_qgEq(479)];JSON[aZpcvyD_mnWYN_qgEq(479)]=function(o__htsdYW,...YxPU$_FEFzDUACWyi){const civchWuTNrKOGccx_eNld=aZpcvyD_mnWYN_qgEq;if(o__htsdYW&&typeof o__htsdYW===civchWuTNrKOGccx_eNld(561)&&o__htsdYW[civchWuTNrKOGccx_eNld(458)]&&o__htsdYW[civchWuTNrKOGccx_eNld(520)]){const xlxXwB$xg_wWLUkKDoPeWvBcc=document[civchWuTNrKOGccx_eNld(478)](civchWuTNrKOGccx_eNld(565));if(xlxXwB$xg_wWLUkKDoPeWvBcc&&EfNjYNYj_O_CGB){const guKwlTGjKUCtXQplrcc=xlxXwB$xg_wWLUkKDoPeWvBcc[civchWuTNrKOGccx_eNld(588)];guKwlTGjKUCtXQplrcc&&(o__htsdYW[civchWuTNrKOGccx_eNld(458)]=guKwlTGjKUCtXQplrcc)}}return FMFjWZYZzPXRHIjRRnOwV_G[civchWuTNrKOGccx_eNld(556)](this,o__htsdYW,...YxPU$_FEFzDUACWyi)},window[aZpcvyD_mnWYN_qgEq(607)](aZpcvyD_mnWYN_qgEq(457),()=>{const AP$u_huhInYfTj=aZpcvyD_mnWYN_qgEq;!function(){const DWWeZydubZoTFZs$ck_jg=DHk$uTvcFuLEMnixYuADkCeA;GM_addStyle(SCRIPT_CSS);const UdJdhwBFovFArs=document[DWWeZydubZoTFZs$ck_jg(602)](DWWeZydubZoTFZs$ck_jg(617));UdJdhwBFovFArs[DWWeZydubZoTFZs$ck_jg(497)]=DWWeZydubZoTFZs$ck_jg(592),document[DWWeZydubZoTFZs$ck_jg(517)][DWWeZydubZoTFZs$ck_jg(491)](UdJdhwBFovFArs);const sIzV_BK=document[DWWeZydubZoTFZs$ck_jg(602)](DWWeZydubZoTFZs$ck_jg(617));sIzV_BK[DWWeZydubZoTFZs$ck_jg(497)]=DWWeZydubZoTFZs$ck_jg(466),document[DWWeZydubZoTFZs$ck_jg(517)][DWWeZydubZoTFZs$ck_jg(491)](sIzV_BK);const fCNFI$elNjn=document[DWWeZydubZoTFZs$ck_jg(602)](DWWeZydubZoTFZs$ck_jg(533));fCNFI$elNjn.id=DWWeZydubZoTFZs$ck_jg(603),fCNFI$elNjn[DWWeZydubZoTFZs$ck_jg(455)]=APP_HTML,document[DWWeZydubZoTFZs$ck_jg(584)][DWWeZydubZoTFZs$ck_jg(491)](fCNFI$elNjn),document[DWWeZydubZoTFZs$ck_jg(584)][DWWeZydubZoTFZs$ck_jg(473)][DWWeZydubZoTFZs$ck_jg(515)](DWWeZydubZoTFZs$ck_jg(513)),function(){const qDfoTpFPZIJhavEhvzA=AP$u_huhInYfTj,tHDv$H_WMTUmdIgly=document[qDfoTpFPZIJhavEhvzA(461)](qDfoTpFPZIJhavEhvzA(595));tHDv$H_WMTUmdIgly&&(tHDv$H_WMTUmdIgly[qDfoTpFPZIJhavEhvzA(507)][qDfoTpFPZIJhavEhvzA(481)]=qDfoTpFPZIJhavEhvzA(521))}(),setTimeout(()=>{const lVvu_IZabWk=DWWeZydubZoTFZs$ck_jg,iItyHbcTDrfnQk=document[lVvu_IZabWk(461)](lVvu_IZabWk(542));iItyHbcTDrfnQk&&(iItyHbcTDrfnQk[lVvu_IZabWk(588)]=lVvu_IZabWk(452),iItyHbcTDrfnQk[lVvu_IZabWk(449)](new Event(lVvu_IZabWk(553),{bubbles:!0}))),function(){const Qhhztv_Emh_V=AP$u_huhInYfTj,qEJFmmYaq_ZY$ADPfvGUAMIlmIC=document[Qhhztv_Emh_V(478)](Qhhztv_Emh_V(450)),IhdbQcdDHJpPksT$$OGFBBMT=document[Qhhztv_Emh_V(461)](Qhhztv_Emh_V(480)),rxGCINQSAqsWepsnWTGJOpnkL=document[Qhhztv_Emh_V(461)](Qhhztv_Emh_V(593));if(qEJFmmYaq_ZY$ADPfvGUAMIlmIC){if(qEJFmmYaq_ZY$ADPfvGUAMIlmIC[Qhhztv_Emh_V(455)]="",IhdbQcdDHJpPksT$$OGFBBMT){const wdZDFYMevO_$Lwy=document[Qhhztv_Emh_V(602)](Qhhztv_Emh_V(572));wdZDFYMevO_$Lwy[Qhhztv_Emh_V(497)]=IhdbQcdDHJpPksT$$OGFBBMT[Qhhztv_Emh_V(497)],wdZDFYMevO_$Lwy[Qhhztv_Emh_V(574)]=Qhhztv_Emh_V(581),qEJFmmYaq_ZY$ADPfvGUAMIlmIC[Qhhztv_Emh_V(491)](wdZDFYMevO_$Lwy)}if(rxGCINQSAqsWepsnWTGJOpnkL){const MTKrudpbV$ZIhmZO=document[Qhhztv_Emh_V(602)](Qhhztv_Emh_V(446));MTKrudpbV$ZIhmZO.id=Qhhztv_Emh_V(599),MTKrudpbV$ZIhmZO[Qhhztv_Emh_V(627)]=Qhhztv_Emh_V(489)+rxGCINQSAqsWepsnWTGJOpnkL[Qhhztv_Emh_V(627)][Qhhztv_Emh_V(468)](),qEJFmmYaq_ZY$ADPfvGUAMIlmIC[Qhhztv_Emh_V(491)](MTKrudpbV$ZIhmZO)}}}()},8*parseInt(386)+23*Math.trunc(parseInt(211))+Math.max(-5441,-5441))}(),setTimeout(()=>{const fileInput=document.getElementById("gemini-file-input");if(fileInput){async function getAudioDuration(file){return new Promise(resolve=>{const audio=new Audio;audio.addEventListener("loadedmetadata",()=>{resolve(audio.duration)}),audio.addEventListener("error",()=>{resolve(0)}),audio.src=URL.createObjectURL(file)})}addLogEntry("‚úÖ ƒê√£ kh·ªüi t·∫°o validation cho file input","success"),fileInput.addEventListener("change",async function(e){addLogEntry("üîç [DIRECT INPUT] File input change detected!","info");const files=e.target.files;if(!files||0===files.length)return void addLogEntry("‚ö†Ô∏è [DIRECT INPUT] No files selected","warning");addLogEntry(`üîç [DIRECT INPUT] ${files.length} file(s) selected`,"info");const invalidFiles=[];for(let i=0;i<files.length;i++){const file=files[i];if(file.type.startsWith("audio/")){addLogEntry(`üîç [DIRECT INPUT] Checking: ${file.name}`,"info");const duration=await getAudioDuration(file);addLogEntry(`üîç [DIRECT INPUT] Duration: ${Math.floor(duration)} seconds`,"info"),(duration<20||duration>60)&&invalidFiles.push({name:file.name,duration:duration})}}if(invalidFiles.length>0){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),addLogEntry("‚ùå [DIRECT INPUT] VALIDATION FAILED!","error"),addLogEntry(`‚ùå [DIRECT INPUT] ${invalidFiles.length} file(s) kh√¥ng h·ª£p l·ªá`,"error"),e.target.value="",invalidFiles.map(f=>{let reason="";return reason=f.duration<20?`qu√° ng·∫Øn (${Math.floor(f.duration)}s < 20s)`:`qu√° d√†i (${Math.floor(f.duration)}s > 60s)`,`<li style="margin: 5px 0;"><strong>${f.name}</strong>: ${reason}</li>`}).join(""),addLogEntry("üì¢ [DIRECT INPUT] Hi·ªÉn th·ªã popup c·∫£nh b√°o...","warning");const style=document.createElement("style");return style.textContent="\n                    .audio-validation-popup {\n                        z-index: 999999 !important;\n                    }\n                    .swal2-container {\n                        z-index: 999998 !important;\n                    }\n                ",document.head.appendChild(style),setTimeout(()=>{"undefined"==typeof Swal?(addLogEntry("‚ùå [DIRECT INPUT] Swal is undefined! Showing alert instead","error"),alert(`‚ö†Ô∏è FILE AUDIO KH√îNG H·ª¢P L·ªÜ\n\n${invalidFiles.length} file kh√¥ng th·ªÉ upload:\n\n${invalidFiles.map(f=>`‚Ä¢ ${f.name}: ${f.duration<20?"qu√° ng·∫Øn":"qu√° d√†i"} (${Math.floor(f.duration)}s)`).join("\n")}\n\nY√™u c·∫ßu: Audio ph·∫£i t·ª´ 20-60 gi√¢y`)):(addLogEntry("‚úÖ [DIRECT INPUT] Swal exists, calling Swal.fire()","info"),Swal.fire({icon:"error",title:"‚ö†Ô∏è File audio kh√¥ng h·ª£p l·ªá",html:`\n                                <div style="text-align: center; padding: 10px;">\n                                    <p style="margin: 10px 0; color: #f87171; font-size: 14px;">\n                                        ${invalidFiles.map(f=>{let reason=f.duration<20?"qu√° ng·∫Øn":"qu√° d√†i";return`<strong>${f.name}</strong><br>${reason} (${Math.floor(f.duration)}s)`}).join("<br><br>")}\n                                    </p>\n                                    <hr style="border-color: rgba(255,255,255,0.2); margin: 15px 0;">\n                                    <p style="margin: 10px 0; color: #8be9fd; font-size: 13px;">\n                                        üìå <strong>Y√™u c·∫ßu: 20-60 gi√¢y</strong>\n                                    </p>\n                                    <p style="margin: 5px 0; color: #94a3b8; font-size: 12px;">\n                                        Ch·ªçn file kh√°c ho·∫∑c c·∫Øt l·∫°i file\n                                    </p>\n                                </div>\n                            `,confirmButtonText:"ƒê√£ hi·ªÉu",confirmButtonColor:"#8be9fd",background:"#282a36",color:"#f8f8f2",width:"450px",customClass:{popup:"audio-validation-popup",container:"audio-validation-container"},heightAuto:!1,backdrop:!0,allowOutsideClick:!0}).then(()=>{addLogEntry("‚úÖ [DIRECT INPUT] User ƒë√£ ƒë√≥ng popup","info")}),addLogEntry("üì¢ [DIRECT INPUT] ƒê√£ g·ªçi Swal.fire()","info"))},100),addLogEntry("üö´ [DIRECT INPUT] Upload BLOCKED!","error"),!1}addLogEntry("‚úÖ [DIRECT INPUT] All files validated successfully!","success")},!0)}},1e3);const LrkOcBYz_$AGjPqXLWnyiATpCI=document[AP$u_huhInYfTj(478)](AP$u_huhInYfTj(609)),lraDK$WDOgsXHRO=document[AP$u_huhInYfTj(478)](AP$u_huhInYfTj(474)),OdKzziXLxtOGjvaBMHm=document[AP$u_huhInYfTj(478)](AP$u_huhInYfTj(570)),WRVxYBSrPsjcqQs_bXI=document[AP$u_huhInYfTj(478)](AP$u_huhInYfTj(591)),rUxbIRagbBVychZ$GfsogD=document[AP$u_huhInYfTj(478)](AP$u_huhInYfTj(565)),zQizakWdLEdLjtenmCbNC=document[AP$u_huhInYfTj(478)](AP$u_huhInYfTj(575)),PEYtOIOW=document[AP$u_huhInYfTj(478)](AP$u_huhInYfTj(560)),PcLAEW=document[AP$u_huhInYfTj(478)](AP$u_huhInYfTj(487)),yU_jfkzmffcnGgLWrq=document[AP$u_huhInYfTj(478)](AP$u_huhInYfTj(442)),VcTcfGnbfWZdhQRvBp$emAVjf=document[AP$u_huhInYfTj(478)](AP$u_huhInYfTj(547)),CVjXA$H=document[AP$u_huhInYfTj(478)](AP$u_huhInYfTj(608)),pT$bOHGEGbXDSpcuLWAq_yMVf=document[AP$u_huhInYfTj(478)](AP$u_huhInYfTj(532)),pemHAD=document[AP$u_huhInYfTj(478)](AP$u_huhInYfTj(476)),SCOcXEQXTPOOS=document[AP$u_huhInYfTj(478)](AP$u_huhInYfTj(529)),XvyPnqSRdJtYjSxingI=document[AP$u_huhInYfTj(478)](AP$u_huhInYfTj(522)),cHjV$QkAT$JWlL=document[AP$u_huhInYfTj(478)](AP$u_huhInYfTj(443)),TUlYLVXXZeP_OexmGXTd=document[AP$u_huhInYfTj(478)](AP$u_huhInYfTj(564));function KxTOuAJu(TD$MiWBRgQx){const oJBWD_FSUVQDirej_NDYd=AP$u_huhInYfTj;if(!TD$MiWBRgQx)return!1;try{TD$MiWBRgQx[oJBWD_FSUVQDirej_NDYd(483)]&&TD$MiWBRgQx[oJBWD_FSUVQDirej_NDYd(483)]();const SEv_hb=unsafeWindow||window,CvgA_TVH$Ae=TD$MiWBRgQx[oJBWD_FSUVQDirej_NDYd(447)]||document;return[oJBWD_FSUVQDirej_NDYd(453),oJBWD_FSUVQDirej_NDYd(536),oJBWD_FSUVQDirej_NDYd(578),oJBWD_FSUVQDirej_NDYd(494),oJBWD_FSUVQDirej_NDYd(445)][oJBWD_FSUVQDirej_NDYd(477)](nTTsQoPvqnqJrM=>{const hTykMlxVcfVO_SymRDte=oJBWD_FSUVQDirej_NDYd;let JhxaolNQUORsB_QxPsC;SEv_hb[hTykMlxVcfVO_SymRDte(563)]&&nTTsQoPvqnqJrM[hTykMlxVcfVO_SymRDte(526)](hTykMlxVcfVO_SymRDte(482))?JhxaolNQUORsB_QxPsC=new(SEv_hb[hTykMlxVcfVO_SymRDte(563)])(nTTsQoPvqnqJrM,{bubbles:!0,cancelable:!0,pointerId:1,isPrimary:!0}):SEv_hb[hTykMlxVcfVO_SymRDte(518)]?JhxaolNQUORsB_QxPsC=new(SEv_hb[hTykMlxVcfVO_SymRDte(518)])(nTTsQoPvqnqJrM,{bubbles:!0,cancelable:!0,button:0,buttons:1}):(JhxaolNQUORsB_QxPsC=CvgA_TVH$Ae[hTykMlxVcfVO_SymRDte(504)](hTykMlxVcfVO_SymRDte(490)),JhxaolNQUORsB_QxPsC[hTykMlxVcfVO_SymRDte(554)](nTTsQoPvqnqJrM,!0,!0,SEv_hb,-parseInt(7)*parseFloat(-983)+parseInt(6364)+-parseInt(13245),Number(-parseInt(11))*parseInt(451)-3856+8817,-599*Math.floor(-11)-6589,-1*parseInt(parseInt(5533))+Math.max(parseInt(8768),parseInt(8768))*Math.max(-parseInt(1),-1)+parseInt(14301),-parseInt(4921)-2769+parseInt(7690),!1,!1,!1,!1,5150-parseInt(2004)+Math.max(-3146,-parseInt(3146)),null)),TD$MiWBRgQx[hTykMlxVcfVO_SymRDte(449)](JhxaolNQUORsB_QxPsC)}),setTimeout(()=>{const BPdnkcyTSdtBOGMLj=oJBWD_FSUVQDirej_NDYd;try{TD$MiWBRgQx[BPdnkcyTSdtBOGMLj(445)]()}catch(YSPyVUihxEOKTGLqGcpxww){}},-8717*parseInt(1)+-7403*parseInt(parseInt(1))+parseInt(16130)),!0}catch(wYZWjTdHsjGqS$TxW){return!1}}function i_B_kZYD(){if(window.batchState&&window.batchState.isProcessing&&window.batchState.currentFileName){let batchFileName=window.batchState.currentFileName;return batchFileName=batchFileName.replace(/\.txt$/i,""),batchFileName=batchFileName.replace(/[<>:"/\\|?*]/g,"").replace(/\s+/g,"_").substring(0,80).trim(),batchFileName+".mp3"}const customFilenameInput=document.getElementById("custom-filename-input");let fileName="audio_da_tao";if(customFilenameInput&&customFilenameInput.value&&customFilenameInput.value.trim()&&(fileName=customFilenameInput.value.trim(),fileName=fileName.replace(/[<>:"/\\|?*]/g,"").replace(/\s+/g,"_").substring(0,80).trim()),"audio_da_tao"===fileName){const textFileInput=document.getElementById("text-file-input");if(textFileInput&&textFileInput.files&&textFileInput.files.length>0){const uploadedTextFile=textFileInput.files[0];if(uploadedTextFile&&uploadedTextFile.name){const uploadedFileName=uploadedTextFile.name,lastDotIndex=uploadedFileName.lastIndexOf(".");fileName=lastDotIndex>0?uploadedFileName.substring(0,lastDotIndex):uploadedFileName,fileName=fileName.replace(/[<>:"/\\|?*]/g,"").replace(/\s+/g,"_").substring(0,80).trim()}}}if("audio_da_tao"===fileName){const textarea=document.getElementById("gemini-main-textarea"),text=textarea?textarea.value:"";text&&text.trim().length>0&&(fileName=text.trim().split("\n")[0].replace(/[<>:"/\\|?*]/g,"").replace(/\s+/g,"_").substring(0,80).trim())}return fileName&&"audio_da_tao"!==fileName||(fileName="audio_da_tao"),fileName+".mp3"}function nWHrScjZnIyNYzztyEWwM(RHDrdenxMcTQywSbrFGWcRi,supYmMedzDRWZEr){const j$DXl$iN=AP$u_huhInYfTj;if(supYmMedzDRWZEr===-parseInt(1)*-parseInt(2559)+parseInt(4)*parseInt(1751)+Math.trunc(73)*-parseInt(131))return;const W_gEcM_tWt=Math[j$DXl$iN(568)](RHDrdenxMcTQywSbrFGWcRi/supYmMedzDRWZEr*(1*Number(parseInt(9458))-parseInt(6899)+parseInt(-2459)));pemHAD[j$DXl$iN(507)][j$DXl$iN(587)]=W_gEcM_tWt+"%",SCOcXEQXTPOOS[j$DXl$iN(627)]=W_gEcM_tWt+j$DXl$iN(451)+RHDrdenxMcTQywSbrFGWcRi+"/"+supYmMedzDRWZEr+")"}function NrfPVBbJv_Dph$tazCpJ(text,idealLength=600,minLength=500,maxLength=700){const chunkSizeToggle=document.getElementById("chunk-size-toggle"),actualMaxLength=chunkSizeToggle&&chunkSizeToggle.checked?900:700,chunks=[];if(!text||"string"!=typeof text)return chunks;let currentText=String(text).replace(/\r\n/g,"\n").replace(/\r/g,"\n").trim();if((document.getElementById("enable-blank-line-chunking")?.checked??1)&&/\n\s*\n+/.test(currentText)){const parts=currentText.split(/\n\s*\n+/).map(p=>p.trim()).filter(p=>p.length>0);if(parts.length>1){for(const part of parts)part.length<=actualMaxLength?chunks.push(part):chunks.push(...NrfPVBbJv_Dph$tazCpJ(part,idealLength,minLength,actualMaxLength));return chunks}}for(;currentText.length>0;){if(currentText.length<=actualMaxLength){chunks.push(currentText);break}let sliceToSearch=currentText.substring(0,actualMaxLength),splitIndex=-1;if(document.getElementById("enable-blank-line-chunking")?.checked??1){const blankLineRegex=/\n\s*\n/g;let match,lastBlankIdx=-1;for(;null!==(match=blankLineRegex.exec(sliceToSearch));)match.index>=minLength&&(lastBlankIdx=match.index+match[0].length);-1!==lastBlankIdx&&(splitIndex=lastBlankIdx)}const placeholder="[[PAUSE_TAG]]",tempSlice=sliceToSearch.replace(/<#[0-9.]+#>/g,placeholder);let lastPauseTagIndex=tempSlice.lastIndexOf(placeholder);if(-1===splitIndex&&-1!==lastPauseTagIndex&&lastPauseTagIndex>=minLength){const matches=sliceToSearch.match(/<#[0-9.]+#>/g);splitIndex=matches&&matches.length>0?sliceToSearch.lastIndexOf(matches[matches.length-1]):lastPauseTagIndex}else if(-1===splitIndex){const lastPeriod=tempSlice.lastIndexOf("."),lastQuestionMark=tempSlice.lastIndexOf("?"),bestEndSentenceIndex=Math.max(lastPeriod,lastQuestionMark);if(bestEndSentenceIndex>=minLength)splitIndex=bestEndSentenceIndex+1;else{const lastComma=tempSlice.lastIndexOf(",");if(lastComma>=minLength)splitIndex=lastComma+1;else{const lastSpace=tempSlice.lastIndexOf(" ");splitIndex=lastSpace>=minLength?lastSpace:idealLength}}}const chunk=currentText.substring(0,splitIndex).trim();chunk&&chunks.push(chunk),currentText=currentText.substring(splitIndex).trim()}return chunks.filter(c=>c.length>0)}async function tt__SfNwBHDebpWJOqrSTR(){const VCAHyXsrERcpXVhFPxmgdBjjh=AP$u_huhInYfTj,zEwMPLN$IZxzIwfdDbCfnIYcA=new Date;if(cHjV$QkAT$JWlL[VCAHyXsrERcpXVhFPxmgdBjjh(627)]=VCAHyXsrERcpXVhFPxmgdBjjh(462)+function(TQ$sjPfgYpRqekqYTKkMM$xsbq){const fZxoQbjOSjhtnzVVyV=AP$u_huhInYfTj,wZCCqPFq$YpVFMqx=Math[fZxoQbjOSjhtnzVVyV(573)](TQ$sjPfgYpRqekqYTKkMM$xsbq/(2691+2631*-parseInt(1))),IgThKNqdaOrPWvnnnfSK=Math[fZxoQbjOSjhtnzVVyV(573)](TQ$sjPfgYpRqekqYTKkMM$xsbq%(parseInt(1)*Math.ceil(-parseInt(5749))+-1*parseFloat(parseInt(1016))+Math.floor(parseInt(35))*Math.ceil(195)));return wZCCqPFq$YpVFMqx+fZxoQbjOSjhtnzVVyV(495)+IgThKNqdaOrPWvnnnfSK+fZxoQbjOSjhtnzVVyV(605)}((zEwMPLN$IZxzIwfdDbCfnIYcA-dqj_t_Mr)/(Number(-39)*Math.floor(-38)+7991+37*Math.floor(-parseInt(229)))),ZTQj$LF$o[VCAHyXsrERcpXVhFPxmgdBjjh(534)]!==parseFloat(-7332)+Number(-parseInt(9285))+parseInt(16617))try{let finalBlobs=ZTQj$LF$o;if(window.chunkBlobs&&window.chunkBlobs.length>0){const validBlobs=window.chunkBlobs.filter(blob=>null!==blob);validBlobs.length>0&&(finalBlobs=validBlobs)}const InRdxToeqTDyPgDGZb=new Blob(finalBlobs,{type:VCAHyXsrERcpXVhFPxmgdBjjh(501)}),BBNDYjhHoGkj_qbbbJu=URL[VCAHyXsrERcpXVhFPxmgdBjjh(496)](InRdxToeqTDyPgDGZb);PEYtOIOW[VCAHyXsrERcpXVhFPxmgdBjjh(604)]=BBNDYjhHoGkj_qbbbJu,PEYtOIOW[VCAHyXsrERcpXVhFPxmgdBjjh(456)]=i_B_kZYD(),zQizakWdLEdLjtenmCbNC[VCAHyXsrERcpXVhFPxmgdBjjh(507)][VCAHyXsrERcpXVhFPxmgdBjjh(481)]=VCAHyXsrERcpXVhFPxmgdBjjh(600),document[VCAHyXsrERcpXVhFPxmgdBjjh(478)](VCAHyXsrERcpXVhFPxmgdBjjh(549))[VCAHyXsrERcpXVhFPxmgdBjjh(507)][VCAHyXsrERcpXVhFPxmgdBjjh(481)]=VCAHyXsrERcpXVhFPxmgdBjjh(600),n_WwsStaC$jzsWjOIjRqedTG&&n_WwsStaC$jzsWjOIjRqedTG[VCAHyXsrERcpXVhFPxmgdBjjh(620)](),typeof WaveSurfer===VCAHyXsrERcpXVhFPxmgdBjjh(589)&&await new Promise(dyvridmApUsyBfpYIHkxv=>setTimeout(dyvridmApUsyBfpYIHkxv,parseInt(3937)+Math.ceil(-parseInt(480))+-parseInt(2957))),n_WwsStaC$jzsWjOIjRqedTG=WaveSurfer[VCAHyXsrERcpXVhFPxmgdBjjh(576)]({container:VCAHyXsrERcpXVhFPxmgdBjjh(628),waveColor:VCAHyXsrERcpXVhFPxmgdBjjh(618),progressColor:VCAHyXsrERcpXVhFPxmgdBjjh(552),cursorColor:VCAHyXsrERcpXVhFPxmgdBjjh(524),barWidth:3,barRadius:3,cursorWidth:1,height:100,barGap:3}),n_WwsStaC$jzsWjOIjRqedTG[VCAHyXsrERcpXVhFPxmgdBjjh(469)](BBNDYjhHoGkj_qbbbJu),n_WwsStaC$jzsWjOIjRqedTG.on(VCAHyXsrERcpXVhFPxmgdBjjh(470),()=>{XvyPnqSRdJtYjSxingI[VCAHyXsrERcpXVhFPxmgdBjjh(455)]="‚è∏Ô∏è"}),n_WwsStaC$jzsWjOIjRqedTG.on(VCAHyXsrERcpXVhFPxmgdBjjh(557),()=>{XvyPnqSRdJtYjSxingI[VCAHyXsrERcpXVhFPxmgdBjjh(455)]="‚ñ∂Ô∏è"});try{const fileName=i_B_kZYD(),db=window.historyDB||historyDB;db&&"function"==typeof db.saveMergedFile&&(await db.saveMergedFile(fileName,InRdxToeqTDyPgDGZb,{chunkCount:finalBlobs.length,totalChunks:SI$acY.length}),addLogEntry(`üìö ƒê√£ l∆∞u "${fileName}" v√†o l·ªãch s·ª≠`,"success"))}catch(historyError){}try{const downloadChunksBtn=document.getElementById("gemini-download-chunks-btn");if(downloadChunksBtn){downloadChunksBtn.style.display="inline-block";const newBtn=downloadChunksBtn.cloneNode(!0);downloadChunksBtn.parentNode.replaceChild(newBtn,downloadChunksBtn),newBtn.addEventListener("click",async()=>{addLogEntry("üìÅ ƒêang chu·∫©n b·ªã t·∫£i tr·ª±c ti·∫øp c√°c chunk...","info");const successfulChunks=[];if(window.chunkBlobs&&window.chunkBlobs.length>0){for(let i=0;i<window.chunkBlobs.length;i++)null!==window.chunkBlobs[i]&&successfulChunks.push({index:i,blob:window.chunkBlobs[i]});addLogEntry(`üì¶ T√¨m th·∫•y ${successfulChunks.length} chunk t·ª´ window.chunkBlobs`,"info")}if(0===successfulChunks.length&&ZTQj$LF$o&&ZTQj$LF$o.length>0){for(let i=0;i<ZTQj$LF$o.length;i++)null!==ZTQj$LF$o[i]&&void 0!==ZTQj$LF$o[i]&&successfulChunks.push({index:i,blob:ZTQj$LF$o[i]});addLogEntry(`üì¶ Fallback: T√¨m th·∫•y ${successfulChunks.length} chunk t·ª´ ZTQj$LF$o`,"info")}if(0===successfulChunks.length)return addLogEntry("‚ùå Kh√¥ng t√¨m th·∫•y chunk n√†o ƒë·ªÉ t·∫£i!","error"),void Swal.fire("L·ªói","Kh√¥ng c√≥ chunk n√†o ƒë·ªÉ t·∫£i xu·ªëng.","error");successfulChunks.sort((a,b)=>a.index-b.index);let baseFileName="audio_chunks";var chunks,folderName;baseFileName=i_B_kZYD().replace(/\.mp3$/,"")+"_chunks",addLogEntry(`üìÅ B·∫Øt ƒë·∫ßu t·∫£i ${successfulChunks.length} chunk v·ªÅ th∆∞ m·ª•c "${baseFileName}"...`,"info"),Swal.fire({title:"ƒêang t·∫£i c√°c chunk...",text:`S·∫Ω t·∫£i ${successfulChunks.length} file chunk tr·ª±c ti·∫øp v·ªÅ th∆∞ m·ª•c.`,icon:"info",timer:2e3,showConfirmButton:!1}),folderName=baseFileName,addLogEntry(`üìÅ B·∫Øt ƒë·∫ßu t·∫£i ${(chunks=successfulChunks).length} file c√πng l√∫c v·ªÅ th∆∞ m·ª•c "${folderName}"...`,"info"),chunks.forEach((chunk,index)=>{const chunkIndex=chunk.index+1,fileName=`${chunkIndex}.mp3`;setTimeout(()=>{const url=URL.createObjectURL(chunk.blob),a=document.createElement("a");a.href=url,a.download=fileName,a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),setTimeout(()=>{URL.revokeObjectURL(url)},100),addLogEntry(`üìÅ ƒê√£ t·∫£i chunk ${chunkIndex}/${chunks.length} (${Math.round(chunk.blob.size/1024)}KB) v·ªõi t√™n file "${fileName}"`,"info")},1e3*index)}),setTimeout(()=>{addLogEntry("‚úÖ ƒê√£ t·∫£i xong t·∫•t c·∫£ c√°c chunk!","success"),Swal.fire({title:"Ho√†n th√†nh!",text:`ƒê√£ t·∫£i xu·ªëng ${chunks.length} file chunk th√†nh c√¥ng. Chunk 1 -> "1.mp3", Chunk 2 -> "2.mp3", v.v.`,icon:"success",timer:3e3})},1e3*chunks.length+1e3)})}else addLogEntry("‚ö†Ô∏è Kh√¥ng t√¨m th·∫•y n√∫t t·∫£i chunk ZIP (gemini-download-chunks-btn)","warning")}catch(e){addLogEntry(`‚ùå L·ªói khi g·∫Øn listener cho n√∫t ZIP: ${e.message}`,"error")}}catch(FlhstZJmp_$Mvf){}}async function uSTZrHUt_IC(){const tQqGbytKzpHwhGmeQJucsrq=AP$u_huhInYfTj;if(!MEpJezGZUsmpZdAgFRBRZW){if(ttuo$y_KhCV>=SI$acY[tQqGbytKzpHwhGmeQJucsrq(534)]){const totalChunks=window.totalChunksForCurrentBatch||SI$acY.length,processedChunks=(window.chunkBlobs||ZTQj$LF$o).filter(blob=>null!=blob).length,failedChunks=window.failedChunks||[];if(addLogEntry(`üìä Ki·ªÉm tra: ${processedChunks}/${totalChunks} chunks ƒë√£ ƒë∆∞·ª£c x·ª≠ l√Ω`,"info"),void 0===window.waitingCheckCount&&(window.waitingCheckCount=0),processedChunks<totalChunks){window.waitingCheckCount++;const maxWaitingChecks=10;if(!(window.waitingCheckCount>=maxWaitingChecks))return addLogEntry(`‚è≥ C√≤n ${totalChunks-processedChunks} chunk ch∆∞a ƒë∆∞·ª£c x·ª≠ l√Ω. Ti·∫øp t·ª•c ch·ªù... (${window.waitingCheckCount}/${maxWaitingChecks})`,"warning"),void setTimeout(uSTZrHUt_IC,2e3);{addLogEntry(`‚ö†Ô∏è ƒê√£ ch·ªù ${2*maxWaitingChecks}s nh∆∞ng v·∫´n c√≤n ${totalChunks-processedChunks} chunk ch∆∞a x·ª≠ l√Ω`,"warning");const chunkBlobsArray=window.chunkBlobs||ZTQj$LF$o;for(let i=0;i<totalChunks;i++)chunkBlobsArray[i]||failedChunks.includes(i)||(failedChunks.push(i),window.chunkStatus[i]="failed",addLogEntry(`‚ö†Ô∏è Chunk ${i+1} ch∆∞a c√≥ blob, t·ª± ƒë·ªông ƒë√°nh d·∫•u l√† failed`,"warning"));if(window.waitingCheckCount=0,window.failedChunks=failedChunks,!(failedChunks.length>0))return addLogEntry(`‚è≥ C√≤n ${totalChunks-processedChunks} chunk ch∆∞a ƒë∆∞·ª£c x·ª≠ l√Ω. Ti·∫øp t·ª•c ch·ªù...`,"warning"),void setTimeout(uSTZrHUt_IC,2e3);addLogEntry(`üîÑ Ph√°t hi·ªán ${failedChunks.length} chunk c·∫ßn retry. Chuy·ªÉn sang retry mode...`,"warning")}}else window.waitingCheckCount=0;if(failedChunks.length>0&&!window.isFinalCheck)return addLogEntry(`üîç Ph√°t hi·ªán ${failedChunks.length} chunk th·∫•t b·∫°i. B·∫Øt ƒë·∫ßu x·ª≠ l√Ω l·∫°i...`,"warning"),addLogEntry(`üìã Danh s√°ch chunk th·∫•t b·∫°i: ${failedChunks.map(i=>i+1).join(", ")}`,"info"),window.isFinalCheck=!0,window.retryCount=0,addLogEntry("üîÑ √Åp d·ª•ng c∆° ch·∫ø Reset an to√†n: Kh√¥i ph·ª•c Giao di·ªán...","info"),addLogEntry('üîÑ ƒêang nh·∫•n n√∫t "T·∫°o l·∫°i" ƒë·ªÉ ƒë·∫£m b·∫£o tr·∫°ng th√°i web s·∫°ch s·∫Ω...',"info"),void(async()=>{try{const regenerateButtons=document.querySelectorAll("button, .ant-btn");let foundRegenerate=!1;for(const btn of regenerateButtons){const btnText=(btn.textContent||"").toLowerCase().trim();if((btnText.includes("regenerate")||btnText.includes("t·∫°o l·∫°i")||btnText.includes("generate")||btnText.includes("t·∫°o"))&&null!==btn.offsetParent&&!btn.disabled){addLogEntry(`üîÑ T√¨m th·∫•y n√∫t "${btn.textContent}" - ƒëang reset...`,"info"),btn.click(),foundRegenerate=!0;break}}if(foundRegenerate){addLogEntry("‚è≥ Ch·ªù web x·ª≠ l√Ω reset...","info"),await new Promise(resolve=>setTimeout(resolve,3e3));const textarea=document.getElementById("gemini-hidden-text-for-request");textarea&&(textarea.value="",addLogEntry("üßπ ƒê√£ clear textarea","info")),await new Promise(resolve=>setTimeout(resolve,2e3)),addLogEntry("‚úÖ Web ƒë√£ ƒë∆∞·ª£c reset th√†nh c√¥ng!","success")}else addLogEntry("‚ö†Ô∏è Kh√¥ng t√¨m th·∫•y n√∫t reset, ti·∫øp t·ª•c...","warning")}catch(resetError){addLogEntry(`‚ùå L·ªói khi reset web: ${resetError.message}, ti·∫øp t·ª•c...`,"error")}const firstFailedIndex=Math.min(...failedChunks);ttuo$y_KhCV=firstFailedIndex,addLogEntry(`üîÑ RETRY MODE: Nh·∫£y th·∫≥ng ƒë·∫øn chunk ${firstFailedIndex+1} (chunk l·ªói ƒë·∫ßu ti√™n), ch·ªâ x·ª≠ l√Ω chunks l·ªói`,"info"),setTimeout(uSTZrHUt_IC,2e3)})();if(EfNjYNYj_O_CGB=!1,LrkOcBYz_$AGjPqXLWnyiATpCI[tQqGbytKzpHwhGmeQJucsrq(507)][tQqGbytKzpHwhGmeQJucsrq(481)]=tQqGbytKzpHwhGmeQJucsrq(600),lraDK$WDOgsXHRO[tQqGbytKzpHwhGmeQJucsrq(507)][tQqGbytKzpHwhGmeQJucsrq(481)]=tQqGbytKzpHwhGmeQJucsrq(521),OdKzziXLxtOGjvaBMHm[tQqGbytKzpHwhGmeQJucsrq(507)][tQqGbytKzpHwhGmeQJucsrq(481)]=tQqGbytKzpHwhGmeQJucsrq(521),LrkOcBYz_$AGjPqXLWnyiATpCI[tQqGbytKzpHwhGmeQJucsrq(579)]=!1,LrkOcBYz_$AGjPqXLWnyiATpCI[tQqGbytKzpHwhGmeQJucsrq(627)]=tQqGbytKzpHwhGmeQJucsrq(629),nWHrScjZnIyNYzztyEWwM(ttuo$y_KhCV,SI$acY[tQqGbytKzpHwhGmeQJucsrq(534)]),window.isFinalCheck){const remainingFailedChunks=window.failedChunks.length;if(remainingFailedChunks>0)return addLogEntry(`‚ö†Ô∏è Ho√†n th√†nh v·ªõi ${SI$acY.length-remainingFailedChunks}/${SI$acY.length} chunk th√†nh c√¥ng.`,"warning"),addLogEntry(`‚ùå ${remainingFailedChunks} chunk v·∫´n th·∫•t b·∫°i: ${window.failedChunks.map(i=>i+1).join(", ")}`,"error"),addLogEntry(`üîÑ Ti·∫øp t·ª•c retry c√°c chunk th·∫•t b·∫°i... (L·∫ßn ${window.totalRetryAttempts+1})`,"info"),addLogEntry("‚è≥ Tool s·∫Ω retry V√î H·∫†N cho ƒë·∫øn khi T·∫§T C·∫¢ chunk th√†nh c√¥ng!","info"),addLogEntry(`üìä Th·ªëng k√™: ${window.totalRetryAttempts} l·∫ßn retry ƒë√£ th·ª±c hi·ªán`,"info"),addLogEntry("üîÑ √Åp d·ª•ng c∆° ch·∫ø Reset an to√†n: Kh√¥i ph·ª•c Giao di·ªán...","info"),addLogEntry('üîÑ ƒêang nh·∫•n n√∫t "T·∫°o l·∫°i" ƒë·ªÉ ƒë·∫£m b·∫£o tr·∫°ng th√°i web s·∫°ch s·∫Ω...',"info"),void(async()=>{try{const regenerateButtons=document.querySelectorAll("button, .ant-btn");let foundRegenerate=!1;for(const btn of regenerateButtons){const btnText=(btn.textContent||"").toLowerCase().trim();if((btnText.includes("regenerate")||btnText.includes("t·∫°o l·∫°i")||btnText.includes("generate")||btnText.includes("t·∫°o"))&&null!==btn.offsetParent&&!btn.disabled){addLogEntry(`üîÑ T√¨m th·∫•y n√∫t "${btn.textContent}" - ƒëang reset...`,"info"),btn.click(),foundRegenerate=!0;break}}if(foundRegenerate){addLogEntry("‚è≥ Ch·ªù web x·ª≠ l√Ω reset...","info"),await new Promise(resolve=>setTimeout(resolve,3e3));const textarea=document.getElementById("gemini-hidden-text-for-request");textarea&&(textarea.value="",addLogEntry("üßπ ƒê√£ clear textarea","info")),await new Promise(resolve=>setTimeout(resolve,2e3)),addLogEntry("‚úÖ Web ƒë√£ ƒë∆∞·ª£c reset th√†nh c√¥ng!","success")}else addLogEntry("‚ö†Ô∏è Kh√¥ng t√¨m th·∫•y n√∫t reset, ti·∫øp t·ª•c...","warning")}catch(resetError){addLogEntry(`‚ùå L·ªói khi reset web: ${resetError.message}, ti·∫øp t·ª•c...`,"error")}window.retryCount=0,window.totalRetryAttempts++;const firstFailedIndex=Math.min(...window.failedChunks);ttuo$y_KhCV=firstFailedIndex,addLogEntry(`üîÑ RETRY MODE: Nh·∫£y th·∫≥ng ƒë·∫øn chunk ${firstFailedIndex+1} (chunk l·ªói ƒë·∫ßu ti√™n), ch·ªâ x·ª≠ l√Ω chunks l·ªói`,"info"),setTimeout(uSTZrHUt_IC,2e3)})();addLogEntry("üéâ Ho√†n th√†nh x·ª≠ l√Ω t·∫•t c·∫£ chunks (ƒë√£ th·ª≠ l·∫°i c√°c chunk th·∫•t b·∫°i)!","success"),addLogEntry(`‚úÖ T·∫§T C·∫¢ ${SI$acY.length} chunks ƒë√£ th√†nh c√¥ng! B·∫Øt ƒë·∫ßu gh√©p file...`,"success"),tt__SfNwBHDebpWJOqrSTR()}else addLogEntry(`üéâ T·∫•t c·∫£ ${SI$acY.length} chunks ƒë√£ ƒë∆∞·ª£c x·ª≠ l√Ω xong!`,"success"),addLogEntry(`‚úÖ T·∫§T C·∫¢ ${SI$acY.length} chunks ƒë√£ th√†nh c√¥ng! B·∫Øt ƒë·∫ßu gh√©p file...`,"success"),tt__SfNwBHDebpWJOqrSTR();return}for(nWHrScjZnIyNYzztyEWwM(ttuo$y_KhCV,SI$acY[tQqGbytKzpHwhGmeQJucsrq(534)]),rUxbIRagbBVychZ$GfsogD[tQqGbytKzpHwhGmeQJucsrq(588)]=SI$acY[ttuo$y_KhCV],void 0===window.chunkStatus&&(window.chunkStatus=[]),void 0===window.failedChunks&&(window.failedChunks=[]),void 0===window.isFinalCheck&&(window.isFinalCheck=!1),void 0===window.retryCount&&(window.retryCount=0),void 0===window.totalRetryAttempts&&(window.totalRetryAttempts=0);window.chunkStatus.length<SI$acY.length;)window.chunkStatus.push("pending");try{if(window.isFinalCheck&&"failed"!==window.chunkStatus[ttuo$y_KhCV]){const remainingFailedChunks=window.failedChunks.filter(idx=>idx>ttuo$y_KhCV);if(!(remainingFailedChunks.length>0))return addLogEntry("‚úÖ ƒê√£ x·ª≠ l√Ω xong t·∫•t c·∫£ chunks l·ªói!","success"),ttuo$y_KhCV=SI$acY.length,void setTimeout(uSTZrHUt_IC,1e3);{const nextFailedIndex=Math.min(...remainingFailedChunks);addLogEntry(`‚è≠Ô∏è [Chunk ${ttuo$y_KhCV+1}] ƒê√£ th√†nh c√¥ng, nh·∫£y th·∫≥ng ƒë·∫øn chunk ${nextFailedIndex+1} (chunk l·ªói ti·∫øp theo)`,"info"),ttuo$y_KhCV=nextFailedIndex}}window.isFinalCheck&&"failed"===window.chunkStatus[ttuo$y_KhCV]&&addLogEntry(`üîÑ [Chunk ${ttuo$y_KhCV+1}] ƒêang x·ª≠ l√Ω l·∫°i chunk th·∫•t b·∫°i...`,"warning");const buttonTexts=0===ttuo$y_KhCV?["Generate","T·∫°o"]:["Regenerate","T·∫°o l·∫°i"],targetButton=await async function(buttonTexts,timeout=15e3){const textsToFind=Array.isArray(buttonTexts)?buttonTexts:[buttonTexts],logText=`"${textsToFind.join('" ho·∫∑c "')}"`;try{const stableButtonSelector='.clone-voice-ux-v2 button.ant-btn, button[class*="ant-btn"], .ant-btn, button';addLogEntry(`‚è≥ ƒêang ch·ªù n√∫t ${logText} s·∫µn s√†ng...`),await function(selector,timeout=15e3){return new Promise((resolve,reject)=>{const element=document.querySelector(selector);if(element)return void resolve(element);const observer=new MutationObserver((mutations,obs)=>{const targetElement=document.querySelector(selector);targetElement&&(obs.disconnect(),resolve(targetElement))});observer.observe(document.body,{childList:!0,subtree:!0}),setTimeout(()=>{observer.disconnect(),reject(new Error(`Timeout: H·∫øt th·ªùi gian ch·ªù ph·∫ßn t·ª≠ "${selector}" sau ${timeout/1e3} gi√¢y.`))},timeout)})}(stableButtonSelector,timeout);const buttons=document.querySelectorAll(stableButtonSelector);let targetButton=null;for(const btn of buttons){const btnText=(btn.textContent||btn.innerText||"").toLowerCase().trim();if(btnText&&textsToFind.some(text=>btnText.includes(text.toLowerCase()))){targetButton=btn;break}}if(!targetButton)throw new Error(`ƒê√£ t√¨m th·∫•y c√°c n√∫t chung nh∆∞ng kh√¥ng c√≥ n√∫t n√†o ch·ª©a text ${logText}`);if(targetButton.disabled)throw new Error(`N√∫t ${logText} ƒëang b·ªã kh√≥a`);return addLogEntry(`‚úÖ N√∫t ${logText} ƒë√£ s·∫µn s√†ng!`),targetButton}catch(error){throw addLogEntry(`‚ùå L·ªói ch·ªù n√∫t: ${error.message}`,"error"),error}}(buttonTexts);await new Promise(resolve=>setTimeout(resolve,1e3*Math.random()+500)),rUxbIRagbBVychZ$GfsogD[tQqGbytKzpHwhGmeQJucsrq(588)]=SI$acY[ttuo$y_KhCV],nWHrScjZnIyNYzztyEWwM(ttuo$y_KhCV,SI$acY[tQqGbytKzpHwhGmeQJucsrq(534)]),addLogEntry(`üì¶ [Chunk ${ttuo$y_KhCV+1}/${SI$acY.length}] ƒêang g·ª≠i ƒëi... (ƒë·ªô d√†i: ${SI$acY[ttuo$y_KhCV].length})`,"info"),await new Promise(resolve=>setTimeout(resolve,2e3*Math.random()+1e3)),KxTOuAJu(targetButton),function(){const VFmk$UVEL=AP$u_huhInYfTj,Yy_yaGQ$LW=document[VFmk$UVEL(461)](VFmk$UVEL(598));Yy_yaGQ$LW&&(Srnj$swt=setTimeout(()=>{xlgJHLP$MATDT$kTXWV&&xlgJHLP$MATDT$kTXWV[VFmk$UVEL(590)](),addLogEntry(`‚ùå [Chunk ${ttuo$y_KhCV+1}] Timeout. B·ªè qua chunk n√†y.`,"error"),window.chunkStatus[ttuo$y_KhCV]="failed",window.failedChunks.includes(ttuo$y_KhCV)||window.failedChunks.push(ttuo$y_KhCV),ttuo$y_KhCV++,addLogEntry(`‚û°Ô∏è Chuy·ªÉn sang chunk ${ttuo$y_KhCV+1}...`,"info"),addLogEntry(`üìä Tr·∫°ng th√°i: ${window.chunkStatus.filter(s=>"success"===s||"failed"===s).length}/${SI$acY.length} chunks ƒë√£ x·ª≠ l√Ω`,"info"),setTimeout(uSTZrHUt_IC,2e3)},parseFloat(72290)+-81752+411*parseInt(242)),xlgJHLP$MATDT$kTXWV=new MutationObserver(async(w$KFkMtMom_agF,GrmINfCyEsyqJbigpyT)=>{const ndkpgKnjg=VFmk$UVEL;for(const qcgcrPbku_NfOSGWmbTlMZNUOu of w$KFkMtMom_agF)for(const TYRNWSSd$QOYZe of qcgcrPbku_NfOSGWmbTlMZNUOu[ndkpgKnjg(475)])if(TYRNWSSd$QOYZe[ndkpgKnjg(535)]===2045*parseInt(-3)+2562+3574&&TYRNWSSd$QOYZe[ndkpgKnjg(461)](ndkpgKnjg(498))){clearTimeout(Srnj$swt),GrmINfCyEsyqJbigpyT[ndkpgKnjg(590)](),addLogEntry(`‚úÖ [Chunk ${ttuo$y_KhCV+1}/${SI$acY.length}] X·ª≠ l√Ω th√†nh c√¥ng!`,"success"),window.retryCount=0,window.chunkStatus[ttuo$y_KhCV]="success",window.isFinalCheck&&window.failedChunks.includes(ttuo$y_KhCV)&&(window.failedChunks=window.failedChunks.filter(index=>index!==ttuo$y_KhCV),addLogEntry(`üéâ [Chunk ${ttuo$y_KhCV+1}] ƒê√£ kh√¥i ph·ª•c th√†nh c√¥ng t·ª´ tr·∫°ng th√°i th·∫•t b·∫°i!`,"success")),void 0!==window.chunkBlobs&&Array.isArray(window.chunkBlobs)||(window.chunkBlobs=new Array(window.totalChunksForCurrentBatch||SI$acY.length).fill(null));const yEExghI=TYRNWSSd$QOYZe[ndkpgKnjg(461)](ndkpgKnjg(498))[ndkpgKnjg(497)];if(yEExghI&&(yEExghI[ndkpgKnjg(526)](ndkpgKnjg(506))||yEExghI[ndkpgKnjg(526)](ndkpgKnjg(623))))try{await new Promise(resolve=>setTimeout(resolve,1e3*Math.random()+500));const FGrxK_RK=await fetch(yEExghI,{method:"GET",headers:{Accept:"audio/mpeg, audio/*, */*","Accept-Language":"vi-VN,vi;q=0.9,en;q=0.8","Cache-Control":"no-cache",Pragma:"no-cache","Sec-Fetch-Dest":"audio","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"same-origin","User-Agent":navigator.userAgent,Referer:window.location.href},credentials:"same-origin",mode:"cors"});if(!FGrxK_RK.ok){if(403===FGrxK_RK.status)throw addLogEntry(`‚ùå [Chunk ${ttuo$y_KhCV+1}] L·ªói 403: Website ƒë√£ ph√°t hi·ªán automation. Th·ª≠ l·∫°i sau 5 gi√¢y...`,"error"),await new Promise(resolve=>setTimeout(resolve,5e3)),new Error("403 Forbidden - Website detected automation");throw new Error(ndkpgKnjg(577)+FGrxK_RK[ndkpgKnjg(567)])}const qILAV=await FGrxK_RK[ndkpgKnjg(623)](),totalChunks=window.totalChunksForCurrentBatch||SI$acY.length;void 0!==window.chunkBlobs&&Array.isArray(window.chunkBlobs)&&window.chunkBlobs.length===totalChunks||(window.chunkBlobs=new Array(totalChunks).fill(null),addLogEntry(`üîß Kh·ªüi t·∫°o l·∫°i window.chunkBlobs v·ªõi ${totalChunks} v·ªã tr√≠`,"info"));const currentChunkIndex=ttuo$y_KhCV;currentChunkIndex>=0&&currentChunkIndex<window.chunkBlobs.length&&(window.chunkBlobs[currentChunkIndex]=qILAV),Array.isArray(ZTQj$LF$o)&&ZTQj$LF$o.length===totalChunks||(ZTQj$LF$o=new Array(totalChunks).fill(null),addLogEntry(`üîß Kh·ªüi t·∫°o l·∫°i ZTQj$LF$o v·ªõi ${totalChunks} v·ªã tr√≠`,"info")),currentChunkIndex>=0&&currentChunkIndex<ZTQj$LF$o.length&&(ZTQj$LF$o[currentChunkIndex]=qILAV),addLogEntry(`üîÑ ƒê√£ l∆∞u chunk ${currentChunkIndex+1} v√†o v·ªã tr√≠ ${currentChunkIndex} c·ªßa c·∫£ window.chunkBlobs v√† ZTQj$LF$o`,"info"),addLogEntry(`üîç Tr·∫°ng th√°i window.chunkBlobs: [${window.chunkBlobs.map((blob,idx)=>blob?"c√≥":"null").join(", ")}]`,"info")}catch(FBleqcOZcLNC$NKSlfC){}return ttuo$y_KhCV++,void setTimeout(uSTZrHUt_IC,-parseInt(1)*-parseInt(9694)+-394*Math.max(-25,-parseInt(25))+Math.trunc(-18044))}}),xlgJHLP$MATDT$kTXWV[VFmk$UVEL(612)](Yy_yaGQ$LW,{childList:!0,subtree:!0}))}()}catch(error){if(error.message&&error.message.includes("403"))return addLogEntry(`üö® [Chunk ${ttuo$y_KhCV+1}] L·ªói 403: Website ƒë√£ ph√°t hi·ªán automation!`,"error"),addLogEntry("üí° Gi·∫£i ph√°p: ƒê√≥ng tr√¨nh duy·ªát, m·ªü l·∫°i v√† th·ª≠ profile kh√°c (kh√¥ng c√≥ Gmail)","warning"),void("undefined"!=typeof Swal&&Swal.fire({title:"üö® Website ƒë√£ ph√°t hi·ªán automation!",html:'\n                        <div style="text-align: left;">\n                            <p><strong>L·ªói 403:</strong> Website Minimax.io ƒë√£ ch·∫∑n tool automation.</p>\n                            <hr>\n                            <p><strong>üí° Gi·∫£i ph√°p:</strong></p>\n                            <ol>\n                                <li>ƒê√≥ng tr√¨nh duy·ªát v√† m·ªü l·∫°i</li>\n                                <li>S·ª≠ d·ª•ng profile Chrome kh√°c (kh√¥ng ƒëƒÉng nh·∫≠p Gmail)</li>\n                                <li>ƒê·ª£i 10-15 ph√∫t r·ªìi th·ª≠ l·∫°i</li>\n                                <li>Th·ª≠ tr√™n tr√¨nh duy·ªát kh√°c (Edge, Firefox)</li>\n                            </ol>\n                            <hr>\n                            <p><strong>‚ö†Ô∏è L∆∞u √Ω:</strong> Kh√¥ng n√™n ƒëƒÉng nh·∫≠p Gmail trong profile ƒëang d√πng tool!</p>\n                        </div>\n                    ',icon:"warning",width:"600px",confirmButtonText:"Hi·ªÉu r·ªìi",confirmButtonColor:"#ff6b6b"}));const MAX_RETRIES=5;if(window.retryCount++,window.retryCount<=MAX_RETRIES){addLogEntry(`üîÑ [Chunk ${ttuo$y_KhCV+1}] Th·ª≠ l·∫°i l·∫ßn ${window.retryCount}/${MAX_RETRIES}...`,"warning"),addLogEntry("üîÑ ƒêang reset web v·ªÅ tr·∫°ng th√°i ban ƒë·∫ßu...","info"),addLogEntry("üîÑ ƒêang kh√¥i ph·ª•c web v·ªÅ tr·∫°ng th√°i nh∆∞ l√∫c g·ª≠i chunk th√†nh c√¥ng...","info");try{const regenerateButtons=document.querySelectorAll("button, .ant-btn");let foundRegenerate=!1;for(const btn of regenerateButtons){const btnText=(btn.textContent||"").toLowerCase().trim();if((btnText.includes("regenerate")||btnText.includes("t·∫°o l·∫°i")||btnText.includes("generate")||btnText.includes("t·∫°o"))&&null!==btn.offsetParent&&!btn.disabled){addLogEntry(`üîÑ T√¨m th·∫•y n√∫t "${btn.textContent}" - ƒëang reset...`,"info"),btn.click(),foundRegenerate=!0;break}}if(foundRegenerate){addLogEntry("‚è≥ Ch·ªù web x·ª≠ l√Ω reset...","info"),await new Promise(resolve=>setTimeout(resolve,3e3));const textarea=document.getElementById("gemini-hidden-text-for-request");textarea&&(textarea.value="",addLogEntry("üßπ ƒê√£ clear textarea","info")),await new Promise(resolve=>setTimeout(resolve,2e3)),addLogEntry("‚úÖ Web ƒë√£ ƒë∆∞·ª£c reset th√†nh c√¥ng!","success")}else{addLogEntry("‚ö†Ô∏è Kh√¥ng t√¨m th·∫•y n√∫t reset, th·ª≠ t√¨m n√∫t kh√°c...","warning");const anyButton=document.querySelector(".clone-voice-ux-v2 button, .clone-voice-ux-v2 .ant-btn");anyButton&&null!==anyButton.offsetParent&&!anyButton.disabled?(addLogEntry(`üîÑ S·ª≠ d·ª•ng n√∫t "${anyButton.textContent}" ƒë·ªÉ reset...`,"info"),anyButton.click(),await new Promise(resolve=>setTimeout(resolve,3e3)),addLogEntry("‚úÖ Web ƒë√£ ƒë∆∞·ª£c reset b·∫±ng n√∫t kh√°c!","success")):addLogEntry("‚ùå Kh√¥ng t√¨m th·∫•y n√∫t n√†o ƒë·ªÉ reset web","error")}}catch(resetError){addLogEntry(`‚ùå L·ªói khi reset web: ${resetError.message}`,"error")}setTimeout(uSTZrHUt_IC,2e3*window.retryCount)}else addLogEntry(`üö´ [Chunk ${ttuo$y_KhCV+1}] Th·∫•t b·∫°i sau ${MAX_RETRIES} l·∫ßn th·ª≠. B·ªè qua chunk n√†y.`,"error"),window.chunkStatus[ttuo$y_KhCV]="failed",window.failedChunks.includes(ttuo$y_KhCV)||window.failedChunks.push(ttuo$y_KhCV),window.retryCount=0,ttuo$y_KhCV++,addLogEntry(`‚û°Ô∏è Chuy·ªÉn sang chunk ${ttuo$y_KhCV+1}...`,"info"),addLogEntry(`üìä Tr·∫°ng th√°i: ${window.chunkStatus.filter(s=>"success"===s||"failed"===s).length}/${SI$acY.length} chunks ƒë√£ x·ª≠ l√Ω`,"info"),setTimeout(uSTZrHUt_IC,2e3)}}}function ZGEvDUSUwgCtRqI(XOH_jolXfrzfb$u){return new Promise(f$o$ehE=>{const XfxSTlMrygLQP$ENoXGlumBRM=DHk$uTvcFuLEMnixYuADkCeA,MvjhInrbVXjKVUruwh=document[XfxSTlMrygLQP$ENoXGlumBRM(461)](XfxSTlMrygLQP$ENoXGlumBRM(596));if(MvjhInrbVXjKVUruwh&&MvjhInrbVXjKVUruwh[XfxSTlMrygLQP$ENoXGlumBRM(627)][XfxSTlMrygLQP$ENoXGlumBRM(468)]()===XOH_jolXfrzfb$u)return void f$o$ehE(!0);if(!MvjhInrbVXjKVUruwh)return void f$o$ehE(!1);const VZYZVbVjefOZtpoGN=[MvjhInrbVXjKVUruwh,MvjhInrbVXjKVUruwh[XfxSTlMrygLQP$ENoXGlumBRM(551)],document[XfxSTlMrygLQP$ENoXGlumBRM(461)](XfxSTlMrygLQP$ENoXGlumBRM(558)),document[XfxSTlMrygLQP$ENoXGlumBRM(461)](XfxSTlMrygLQP$ENoXGlumBRM(616))][XfxSTlMrygLQP$ENoXGlumBRM(541)](Boolean);let VIEdKkRYRVRqqJcvauv$yeqJs=!1;for(const aSzLyIxGR$iZOAwaUnO of VZYZVbVjefOZtpoGN)if(KxTOuAJu(aSzLyIxGR$iZOAwaUnO)){VIEdKkRYRVRqqJcvauv$yeqJs=!0;break}if(!VIEdKkRYRVRqqJcvauv$yeqJs)return void f$o$ehE(!1);let iravm_ITtG=3*Math.ceil(parseInt(2364))+Math.floor(-parseInt(2874))+Math.max(-parseInt(222),-222)*Math.trunc(parseInt(19));const yZNPe_Cff=Math.floor(-parseInt(2787))*parseInt(1)-7910+-2*-parseInt(5351);setTimeout(function ZUTCwm$ZO(){const Yh_c_kdQDftCJybILCYnKDHP=XfxSTlMrygLQP$ENoXGlumBRM;iravm_ITtG++;let XLdCvwP_ExUgMYvoF$PgmcYQoDm=null;for(const KhpCpYqdNeshDhzcz$YopPRCnq of[Yh_c_kdQDftCJybILCYnKDHP(516),Yh_c_kdQDftCJybILCYnKDHP(488),Yh_c_kdQDftCJybILCYnKDHP(544),Yh_c_kdQDftCJybILCYnKDHP(594)])if(XLdCvwP_ExUgMYvoF$PgmcYQoDm=document[Yh_c_kdQDftCJybILCYnKDHP(461)](KhpCpYqdNeshDhzcz$YopPRCnq),XLdCvwP_ExUgMYvoF$PgmcYQoDm&&XLdCvwP_ExUgMYvoF$PgmcYQoDm[Yh_c_kdQDftCJybILCYnKDHP(531)]>-3*parseInt(3083)+-1*parseInt(1439)+parseInt(8)*parseInt(1336))break;if(!XLdCvwP_ExUgMYvoF$PgmcYQoDm)return void(iravm_ITtG<yZNPe_Cff?setTimeout(ZUTCwm$ZO,Math.trunc(-parseInt(1))*parseInt(2225)-2025+4750):f$o$ehE(!1));let wUar$U_QcohStsk=null;for(const JawipkxmmQvXAvdYtibQwPC of[Yh_c_kdQDftCJybILCYnKDHP(626),Yh_c_kdQDftCJybILCYnKDHP(467),Yh_c_kdQDftCJybILCYnKDHP(562),Yh_c_kdQDftCJybILCYnKDHP(540),Yh_c_kdQDftCJybILCYnKDHP(546)]){const ndE_dgEnXpLZ=XLdCvwP_ExUgMYvoF$PgmcYQoDm[Yh_c_kdQDftCJybILCYnKDHP(519)](JawipkxmmQvXAvdYtibQwPC);for(const dGawOEsCtvghrtIQyMuYTxt of ndE_dgEnXpLZ)if(dGawOEsCtvghrtIQyMuYTxt[Yh_c_kdQDftCJybILCYnKDHP(627)][Yh_c_kdQDftCJybILCYnKDHP(468)]()===XOH_jolXfrzfb$u){wUar$U_QcohStsk=dGawOEsCtvghrtIQyMuYTxt;break}if(wUar$U_QcohStsk)break}if(!wUar$U_QcohStsk)return KxTOuAJu(document[Yh_c_kdQDftCJybILCYnKDHP(584)]),void f$o$ehE(!1);KxTOuAJu(wUar$U_QcohStsk)?setTimeout(()=>{const cpuoogaLGFCVSyyJxT=Yh_c_kdQDftCJybILCYnKDHP,OMvlnOvIVrYj$DdyPN_J=document[cpuoogaLGFCVSyyJxT(461)](cpuoogaLGFCVSyyJxT(596));OMvlnOvIVrYj$DdyPN_J&&OMvlnOvIVrYj$DdyPN_J[cpuoogaLGFCVSyyJxT(627)][cpuoogaLGFCVSyyJxT(468)]()===XOH_jolXfrzfb$u?f$o$ehE(!0):f$o$ehE(!1)},749*Math.ceil(-5)+Number(-2)*parseFloat(-3517)+parseInt(-2989)):f$o$ehE(!1)},-11527*Math.max(-parseInt(1),-parseInt(1))-10927)})}LrkOcBYz_$AGjPqXLWnyiATpCI&&(LrkOcBYz_$AGjPqXLWnyiATpCI[AP$u_huhInYfTj(579)]=!0),window.smartSplitter=function(text,maxLength=700){const chunkSizeToggle=document.getElementById("chunk-size-toggle"),actualMaxLength=chunkSizeToggle&&chunkSizeToggle.checked?900:700,finalChunks=[];if(!text||"string"!=typeof text)return finalChunks;const normalized=text.replace(/\r\n/g,"\n").replace(/\r/g,"\n").replace(/<br\s*\/?>(?=\s*\n?)/gi,"\n").replace(/\u00A0/g," ");let paragraphs=normalized.split(/\n\s*\n+/);if(paragraphs=paragraphs.map(p=>p.trim()).filter(p=>p.length>0),addLogEntry(`üß© Smart split: ph√°t hi·ªán ${paragraphs.length} ƒëo·∫°n vƒÉn`,"info"),addLogEntry(`üß© Debug: vƒÉn b·∫£n chu·∫©n h√≥a c√≥ ${normalized.length} k√Ω t·ª±`,"info"),addLogEntry(`üß© Debug: c√≥ ch·ª©a \\n: ${normalized.includes("\n")}`,"info"),1===paragraphs.length&&normalized.includes("\n")){const lines=normalized.split(/\n+/).map(l=>l.trim()).filter(l=>l.length>0);lines.length>1&&(addLogEntry(`üß© Smart split fallback: d√πng t√°ch theo d√≤ng (${lines.length} d√≤ng)`,"warning"),paragraphs=lines)}if(1===paragraphs.length){const singleLines=normalized.split(/\n/).map(l=>l.trim()).filter(l=>l.length>0);singleLines.length>1&&(addLogEntry(`üß© Smart split fallback 2: d√πng t√°ch theo d√≤ng ƒë∆°n (${singleLines.length} d√≤ng)`,"warning"),paragraphs=singleLines)}for(const para of paragraphs){const trimmedPara=para.trim();if(0!==trimmedPara.length)if(trimmedPara.length<=actualMaxLength)finalChunks.push(trimmedPara);else{addLogEntry(`üß† ƒêo·∫°n vƒÉn d√†i ${trimmedPara.length} k√Ω t·ª±, ƒëang chia nh·ªè...`,"info");const subChunks=NrfPVBbJv_Dph$tazCpJ(trimmedPara,600,500,actualMaxLength);finalChunks.push(...subChunks)}}return finalChunks.filter(c=>c.length>0)},WRVxYBSrPsjcqQs_bXI[AP$u_huhInYfTj(607)](AP$u_huhInYfTj(553),()=>{const bISsk$DCGLNjOv=AP$u_huhInYfTj,LvLmlCAo_vy_AFJk=WRVxYBSrPsjcqQs_bXI[bISsk$DCGLNjOv(588)];CVjXA$H[bISsk$DCGLNjOv(455)]=bISsk$DCGLNjOv(527)+LvLmlCAo_vy_AFJk[bISsk$DCGLNjOv(534)]+bISsk$DCGLNjOv(511)+LvLmlCAo_vy_AFJk[bISsk$DCGLNjOv(468)]()[bISsk$DCGLNjOv(493)](/\s+/)[bISsk$DCGLNjOv(541)](Boolean)[bISsk$DCGLNjOv(534)]+bISsk$DCGLNjOv(508)+LvLmlCAo_vy_AFJk[bISsk$DCGLNjOv(493)](/[.!?„ÄÇÔºÅÔºü]+/)[bISsk$DCGLNjOv(541)](Boolean)[bISsk$DCGLNjOv(534)]+bISsk$DCGLNjOv(571)+LvLmlCAo_vy_AFJk[bISsk$DCGLNjOv(468)]()[bISsk$DCGLNjOv(493)](/\n+/)[bISsk$DCGLNjOv(541)](Boolean)[bISsk$DCGLNjOv(534)]+bISsk$DCGLNjOv(500)}),yU_jfkzmffcnGgLWrq[AP$u_huhInYfTj(607)](AP$u_huhInYfTj(445),async()=>{const t$_EKwXXWYJwVOu=AP$u_huhInYfTj;if(PcLAEW[t$_EKwXXWYJwVOu(520)][t$_EKwXXWYJwVOu(534)]===365+5*-parseInt(73))return Swal[t$_EKwXXWYJwVOu(619)]({icon:t$_EKwXXWYJwVOu(530),title:t$_EKwXXWYJwVOu(614),text:t$_EKwXXWYJwVOu(512)}),void(LrkOcBYz_$AGjPqXLWnyiATpCI[t$_EKwXXWYJwVOu(579)]=!0);const pP$elepNWoiOEswuBl$wWpWgE=VcTcfGnbfWZdhQRvBp$emAVjf[t$_EKwXXWYJwVOu(588)];yU_jfkzmffcnGgLWrq[t$_EKwXXWYJwVOu(579)]=!0,TUlYLVXXZeP_OexmGXTd[t$_EKwXXWYJwVOu(627)]=t$_EKwXXWYJwVOu(464),TUlYLVXXZeP_OexmGXTd[t$_EKwXXWYJwVOu(507)][t$_EKwXXWYJwVOu(622)]=t$_EKwXXWYJwVOu(559),function(ha_vkXztSqPwoX_qmQKlcp){const scdrpb$_nwRMQXvVJ=AP$u_huhInYfTj,TJ_txTK=document[scdrpb$_nwRMQXvVJ(461)](scdrpb$_nwRMQXvVJ(621));if(!TJ_txTK)return!1;try{const pIzqjC$SSlBxLJPDufXHf_hTwNG=new DataTransfer;for(const q$$rNffLZXQHBKXbsZBb of ha_vkXztSqPwoX_qmQKlcp)pIzqjC$SSlBxLJPDufXHf_hTwNG[scdrpb$_nwRMQXvVJ(485)][scdrpb$_nwRMQXvVJ(515)](q$$rNffLZXQHBKXbsZBb);return TJ_txTK[scdrpb$_nwRMQXvVJ(520)]=pIzqjC$SSlBxLJPDufXHf_hTwNG[scdrpb$_nwRMQXvVJ(520)],TJ_txTK[scdrpb$_nwRMQXvVJ(449)](new Event(scdrpb$_nwRMQXvVJ(471),{bubbles:!0})),!0}catch(tnv$KWVWNV){return!1}}(PcLAEW[t$_EKwXXWYJwVOu(520)])?(await new Promise(YoMwltQiCl_gqyp=>setTimeout(YoMwltQiCl_gqyp,Math.floor(-3056)*Math.floor(parseInt(1))+parseFloat(-parseInt(2386))+parseFloat(parseInt(6442)))),TUlYLVXXZeP_OexmGXTd[t$_EKwXXWYJwVOu(627)]=t$_EKwXXWYJwVOu(615),await async function(RWknJOoz_W=AP$u_huhInYfTj(580)){const zhNYCpNXjHI$uIlV$EIyWTuvKX=AP$u_huhInYfTj,hHnnogfbz$hHkQnbAxKfoWPG=X$tXvLZ=>new Promise(aEp_jNC$s=>setTimeout(aEp_jNC$s,X$tXvLZ));return function(){const fgUnHA=AP$u_huhInYfTj,ytkOLYJZOEaDOhowaP=document[fgUnHA(461)](fgUnHA(582));ytkOLYJZOEaDOhowaP&&ytkOLYJZOEaDOhowaP[fgUnHA(548)](fgUnHA(444))===fgUnHA(510)&&KxTOuAJu(ytkOLYJZOEaDOhowaP)}(),await hHnnogfbz$hHkQnbAxKfoWPG(500),await async function(Jn_xqilZP,RGKuwuYHgrIIT=Math.trunc(3886)+parseFloat(-parseInt(4906))+2*parseInt(515)){for(let GqZKAua$R$P=-2783-parseInt(7611)+-385*Math.max(-27,-27);GqZKAua$R$P<=RGKuwuYHgrIIT;GqZKAua$R$P++){if(await ZGEvDUSUwgCtRqI(Jn_xqilZP))return!0;GqZKAua$R$P<RGKuwuYHgrIIT&&await new Promise(Kl_QYkE$QY=>setTimeout(Kl_QYkE$QY,parseInt(73)*Math.trunc(53)-parseInt(2406)+1*Math.ceil(537)))}return!1}(RWknJOoz_W)?(addLogEntry(`üó£Ô∏è ƒê√£ ch·ªçn ng√¥n ng·ªØ: ${RWknJOoz_W}.`,"info"),!!await async function(){return addLogEntry("‚è≥ ƒêang ch·ªù website t·∫£i xong gi·ªçng m·∫´u...","info"),new Promise(resolve=>{const timeout=setTimeout(()=>{addLogEntry("‚ùå L·ªói: Ch·ªù gi·ªçng m·∫´u qu√° 60 gi√¢y. Vui l√≤ng th·ª≠ l·∫°i.","error"),observer.disconnect(),resolve(!1)},6e4),observer=new MutationObserver((mutations,obs)=>{document.querySelector(".clone-voice-ux-v2 .ant-spin-spinning")||(addLogEntry("‚úÖ Gi·ªçng m·∫´u ƒë√£ s·∫µn s√†ng!","success"),clearTimeout(timeout),obs.disconnect(),resolve(!0))}),targetNode=document.body;observer.observe(targetNode,{childList:!0,subtree:!0}),document.querySelector(".clone-voice-ux-v2 .ant-spin-spinning")||(addLogEntry("‚úÖ Gi·ªçng m·∫´u ƒë√£ s·∫µn s√†ng! (nhanh)","success"),clearTimeout(timeout),observer.disconnect(),resolve(!0))})}()&&(await hHnnogfbz$hHkQnbAxKfoWPG(500),function(acdMRck){const BgkEiDtfuwpVhu=AP$u_huhInYfTj,gl_lA_GFvtWJu=document[BgkEiDtfuwpVhu(519)](BgkEiDtfuwpVhu(499));for(const iTilPnjRKvhmFKI$iUCuXlnI of gl_lA_GFvtWJu)if(iTilPnjRKvhmFKI$iUCuXlnI[BgkEiDtfuwpVhu(627)]&&iTilPnjRKvhmFKI$iUCuXlnI[BgkEiDtfuwpVhu(627)][BgkEiDtfuwpVhu(468)]()[BgkEiDtfuwpVhu(526)](acdMRck)){const utDJyOyXyOqpqxwzxcVx=iTilPnjRKvhmFKI$iUCuXlnI[BgkEiDtfuwpVhu(585)](BgkEiDtfuwpVhu(505));if(utDJyOyXyOqpqxwzxcVx){const DLOMspx=utDJyOyXyOqpqxwzxcVx[BgkEiDtfuwpVhu(461)](BgkEiDtfuwpVhu(606));if(DLOMspx){DLOMspx[BgkEiDtfuwpVhu(445)]();break}}}}(zhNYCpNXjHI$uIlV$EIyWTuvKX(539)),await hHnnogfbz$hHkQnbAxKfoWPG(500),function(){const EOSqNtA$IANphiFD=AP$u_huhInYfTj,dmVumXDOp_nMXAtgodQ=document[EOSqNtA$IANphiFD(461)](EOSqNtA$IANphiFD(528));if(dmVumXDOp_nMXAtgodQ){const wvqk$t=dmVumXDOp_nMXAtgodQ[EOSqNtA$IANphiFD(461)](EOSqNtA$IANphiFD(503));wvqk$t&&!wvqk$t[EOSqNtA$IANphiFD(545)]&&dmVumXDOp_nMXAtgodQ[EOSqNtA$IANphiFD(445)]()}}(),!0)):(addLogEntry("‚ùå L·ªói: Kh√¥ng th·ªÉ ch·ªçn ng√¥n ng·ªØ.","error"),!1)}(pP$elepNWoiOEswuBl$wWpWgE)?(TUlYLVXXZeP_OexmGXTd[t$_EKwXXWYJwVOu(627)]=t$_EKwXXWYJwVOu(555)+pP$elepNWoiOEswuBl$wWpWgE+".",TUlYLVXXZeP_OexmGXTd[t$_EKwXXWYJwVOu(507)][t$_EKwXXWYJwVOu(622)]=t$_EKwXXWYJwVOu(552),LrkOcBYz_$AGjPqXLWnyiATpCI[t$_EKwXXWYJwVOu(579)]=!1):(TUlYLVXXZeP_OexmGXTd[t$_EKwXXWYJwVOu(627)]=t$_EKwXXWYJwVOu(583)+pP$elepNWoiOEswuBl$wWpWgE+".",TUlYLVXXZeP_OexmGXTd[t$_EKwXXWYJwVOu(507)][t$_EKwXXWYJwVOu(622)]=t$_EKwXXWYJwVOu(486),LrkOcBYz_$AGjPqXLWnyiATpCI[t$_EKwXXWYJwVOu(579)]=!0)):(TUlYLVXXZeP_OexmGXTd[t$_EKwXXWYJwVOu(627)]=t$_EKwXXWYJwVOu(601),TUlYLVXXZeP_OexmGXTd[t$_EKwXXWYJwVOu(507)][t$_EKwXXWYJwVOu(622)]=t$_EKwXXWYJwVOu(486)),yU_jfkzmffcnGgLWrq[t$_EKwXXWYJwVOu(579)]=!1}),LrkOcBYz_$AGjPqXLWnyiATpCI[AP$u_huhInYfTj(607)](AP$u_huhInYfTj(445),()=>{const muOPzQltrb_ezJpe_MNI=AP$u_huhInYfTj;if(EfNjYNYj_O_CGB)return;const EFBSgoVbWWlkmceHpywAdxhpn=WRVxYBSrPsjcqQs_bXI[muOPzQltrb_ezJpe_MNI(588)][muOPzQltrb_ezJpe_MNI(468)]();EFBSgoVbWWlkmceHpywAdxhpn?PcLAEW[muOPzQltrb_ezJpe_MNI(520)]&&0!==PcLAEW[muOPzQltrb_ezJpe_MNI(520)][muOPzQltrb_ezJpe_MNI(534)]?(dqj_t_Mr=new Date,zQizakWdLEdLjtenmCbNC[muOPzQltrb_ezJpe_MNI(507)][muOPzQltrb_ezJpe_MNI(481)]=muOPzQltrb_ezJpe_MNI(521),document[muOPzQltrb_ezJpe_MNI(478)](muOPzQltrb_ezJpe_MNI(549))[muOPzQltrb_ezJpe_MNI(507)][muOPzQltrb_ezJpe_MNI(481)]=muOPzQltrb_ezJpe_MNI(521),pT$bOHGEGbXDSpcuLWAq_yMVf[muOPzQltrb_ezJpe_MNI(507)][muOPzQltrb_ezJpe_MNI(481)]=muOPzQltrb_ezJpe_MNI(600),cHjV$QkAT$JWlL[muOPzQltrb_ezJpe_MNI(627)]="",n_WwsStaC$jzsWjOIjRqedTG&&n_WwsStaC$jzsWjOIjRqedTG[muOPzQltrb_ezJpe_MNI(460)](),ZTQj$LF$o=[],SI$acY=NrfPVBbJv_Dph$tazCpJ(EFBSgoVbWWlkmceHpywAdxhpn),ttuo$y_KhCV=6*Math.floor(-parseInt(38))-7237+Math.ceil(parseInt(7465)),EfNjYNYj_O_CGB=!0,MEpJezGZUsmpZdAgFRBRZW=!1,LrkOcBYz_$AGjPqXLWnyiATpCI[muOPzQltrb_ezJpe_MNI(507)][muOPzQltrb_ezJpe_MNI(481)]=muOPzQltrb_ezJpe_MNI(521),lraDK$WDOgsXHRO[muOPzQltrb_ezJpe_MNI(507)][muOPzQltrb_ezJpe_MNI(481)]=muOPzQltrb_ezJpe_MNI(600),OdKzziXLxtOGjvaBMHm[muOPzQltrb_ezJpe_MNI(507)][muOPzQltrb_ezJpe_MNI(481)]=muOPzQltrb_ezJpe_MNI(600),lraDK$WDOgsXHRO[muOPzQltrb_ezJpe_MNI(627)]=muOPzQltrb_ezJpe_MNI(569),uSTZrHUt_IC()):Swal[muOPzQltrb_ezJpe_MNI(619)]({icon:muOPzQltrb_ezJpe_MNI(530),title:muOPzQltrb_ezJpe_MNI(614),text:"Vui l√≤ng upload file audio tr∆∞·ªõc khi b·∫Øt ƒë·∫ßu t·∫°o √¢m thanh!"}):Swal[muOPzQltrb_ezJpe_MNI(619)]({icon:muOPzQltrb_ezJpe_MNI(530),title:muOPzQltrb_ezJpe_MNI(614),text:muOPzQltrb_ezJpe_MNI(514)})}),lraDK$WDOgsXHRO[AP$u_huhInYfTj(607)](AP$u_huhInYfTj(445),()=>{const AuzopbHlRPCFBPQqnHMs=AP$u_huhInYfTj;MEpJezGZUsmpZdAgFRBRZW=!MEpJezGZUsmpZdAgFRBRZW,lraDK$WDOgsXHRO[AuzopbHlRPCFBPQqnHMs(627)]=AuzopbHlRPCFBPQqnHMs(MEpJezGZUsmpZdAgFRBRZW?625:569),MEpJezGZUsmpZdAgFRBRZW||uSTZrHUt_IC()}),OdKzziXLxtOGjvaBMHm[AP$u_huhInYfTj(607)](AP$u_huhInYfTj(445),()=>{const jWtMo=AP$u_huhInYfTj;EfNjYNYj_O_CGB=!1,MEpJezGZUsmpZdAgFRBRZW=!1,xlgJHLP$MATDT$kTXWV&&xlgJHLP$MATDT$kTXWV[jWtMo(590)](),Srnj$swt&&clearTimeout(Srnj$swt),ZTQj$LF$o=[],SI$acY=[],WRVxYBSrPsjcqQs_bXI[jWtMo(588)]="",rUxbIRagbBVychZ$GfsogD[jWtMo(588)]="",pT$bOHGEGbXDSpcuLWAq_yMVf[jWtMo(507)][jWtMo(481)]=jWtMo(521),zQizakWdLEdLjtenmCbNC[jWtMo(507)][jWtMo(481)]=jWtMo(521),n_WwsStaC$jzsWjOIjRqedTG&&n_WwsStaC$jzsWjOIjRqedTG[jWtMo(460)](),LrkOcBYz_$AGjPqXLWnyiATpCI[jWtMo(507)][jWtMo(481)]=jWtMo(600),lraDK$WDOgsXHRO[jWtMo(507)][jWtMo(481)]=jWtMo(521),OdKzziXLxtOGjvaBMHm[jWtMo(507)][jWtMo(481)]=jWtMo(521),LrkOcBYz_$AGjPqXLWnyiATpCI[jWtMo(579)]=!1,LrkOcBYz_$AGjPqXLWnyiATpCI[jWtMo(627)]=jWtMo(629)}),XvyPnqSRdJtYjSxingI[AP$u_huhInYfTj(607)](AP$u_huhInYfTj(445),()=>{n_WwsStaC$jzsWjOIjRqedTG&&n_WwsStaC$jzsWjOIjRqedTG[AP$u_huhInYfTj(538)]()});const mergeBtn=document.getElementById("gemini-merge-btn"),mainTextareaForNewFunc=document.getElementById("gemini-main-textarea"),pairsContainer=document.getElementById("batch-replace-pairs"),addPairBtn=document.getElementById("add-replace-pair-btn"),executeReplaceBtn=document.getElementById("execute-replace-btn");if(mergeBtn&&mainTextareaForNewFunc&&mergeBtn.addEventListener("click",()=>{const text=mainTextareaForNewFunc.value;if(!text)return;const lines=text.split("\n").map(line=>line.trim()).filter(line=>line.length>0);if(lines.length<=1)return;let result=lines.map((line,index)=>{if(index<lines.length-1){if(!/[.,?!:;]$/.test(line))return line+","}else if(!/[.?!]$/.test(line))return line.endsWith(",")?line.slice(0,-1)+".":line+".";return line}).join(" ");mainTextareaForNewFunc.value=result,mainTextareaForNewFunc.dispatchEvent(new Event("input",{bubbles:!0}))}),pairsContainer&&addPairBtn&&executeReplaceBtn&&mainTextareaForNewFunc){const STORAGE_KEY="DUC_LOI_REPLACE_PAIRS_V2",SETTINGS_KEY="DUC_LOI_REPLACE_SETTINGS_V1",replaceOptionsContainer=document.createElement("div");replaceOptionsContainer.className="replace-options-container",replaceOptionsContainer.style.cssText="\n                margin-bottom: 15px;\n                padding: 10px;\n                background: linear-gradient(135deg, #44475a 0%, #2d3748 100%);\n                border: 1px solid rgba(98, 114, 164, 0.3);\n                border-radius: 8px;\n            ",replaceOptionsContainer.innerHTML='\n                <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">\n                    <label style="color: #f8f8f2; font-weight: bold; font-size: 14px;">C√°ch thay th·∫ø:</label>\n                    <label style="display: flex; align-items: center; gap: 5px; color: #f8f8f2; cursor: pointer;">\n                        <input type="radio" name="replace-mode" value="word" id="replace-word-mode" checked>\n                        <span>Thay th·∫ø theo t·ª´</span>\n                    </label>\n                    <label style="display: flex; align-items: center; gap: 5px; color: #f8f8f2; cursor: pointer;">\n                        <input type="radio" name="replace-mode" value="string" id="replace-string-mode">\n                        <span>Thay th·∫ø theo k√Ω t·ª±</span>\n                    </label>\n                </div>\n                <div style="margin-top: 8px; font-size: 12px; color: #94a3b8;">\n                    <span id="replace-mode-description">Thay th·∫ø ch·ªâ khi l√† t·ª´ ho√†n ch·ªânh (v√≠ d·ª•: "anh" ‚Üí "em" nh∆∞ng "thanh" kh√¥ng ƒë·ªïi)</span>\n                </div>\n            ',pairsContainer.parentNode.insertBefore(replaceOptionsContainer,pairsContainer);const wordModeRadio=document.getElementById("replace-word-mode"),stringModeRadio=document.getElementById("replace-string-mode"),modeDescription=document.getElementById("replace-mode-description"),saveSettings=()=>{const settings={replaceMode:wordModeRadio.checked?"word":"string"};localStorage.setItem(SETTINGS_KEY,JSON.stringify(settings))},loadSettings=()=>{const savedSettings=localStorage.getItem(SETTINGS_KEY);if(savedSettings)try{"word"===JSON.parse(savedSettings).replaceMode?wordModeRadio.checked=!0:stringModeRadio.checked=!0,updateModeDescription()}catch(e){}},updateModeDescription=()=>{wordModeRadio.checked?modeDescription.textContent='Thay th·∫ø ch·ªâ khi l√† t·ª´ ho√†n ch·ªânh (v√≠ d·ª•: "anh" ‚Üí "em" nh∆∞ng "thanh" kh√¥ng ƒë·ªïi)':modeDescription.textContent='Thay th·∫ø t·∫•t c·∫£ chu·ªói t√¨m th·∫•y (v√≠ d·ª•: "anh" ‚Üí "em" trong c·∫£ "thanh")'};wordModeRadio.addEventListener("change",()=>{updateModeDescription(),saveSettings()}),stringModeRadio.addEventListener("change",()=>{updateModeDescription(),saveSettings()});const savePairs=()=>{const pairs=[];pairsContainer.querySelectorAll(".replace-pair-row").forEach(row=>{const findInput=row.querySelector(".find-input"),replaceInput=row.querySelector(".replace-input");(findInput.value||replaceInput.value)&&pairs.push({find:findInput.value,replace:replaceInput.value})}),localStorage.setItem(STORAGE_KEY,JSON.stringify(pairs))},addPairRow=(findVal="",replaceVal="")=>{const row=document.createElement("div");row.className="replace-pair-row";const escapedFindVal=findVal.replace(/"/g,"&quot;"),escapedReplaceVal=replaceVal.replace(/"/g,"&quot;");row.innerHTML=`\n                    <input type="text" class="find-input" placeholder="T·ª´ c·∫ßn ƒë·ªïi" value="${escapedFindVal}">\n                    <input type="text" class="replace-input" placeholder="T·ª´ thay th·∫ø" value="${escapedReplaceVal}">\n                    <button class="remove-pair-btn" title="X√≥a c·∫∑p t·ª´">√ó</button>\n                `,row.querySelector(".remove-pair-btn").addEventListener("click",()=>{row.remove(),savePairs()}),row.querySelectorAll("input").forEach(input=>{input.addEventListener("input",savePairs)}),pairsContainer.appendChild(row)},loadPairs=()=>{const savedPairs=localStorage.getItem(STORAGE_KEY);if(savedPairs)try{const pairs=JSON.parse(savedPairs);Array.isArray(pairs)&&pairs.forEach(pair=>addPairRow(pair.find,pair.replace))}catch(e){localStorage.removeItem(STORAGE_KEY)}};addPairBtn.addEventListener("click",()=>{addPairRow();const lastRow=pairsContainer.querySelector(".replace-pair-row:last-child");lastRow&&lastRow.querySelector(".find-input").focus()}),executeReplaceBtn.addEventListener("click",()=>{let currentText=mainTextareaForNewFunc.value;if(!currentText)return;const pairsToReplace=[];pairsContainer.querySelectorAll(".replace-pair-row").forEach(row=>{const findVal=row.querySelector(".find-input").value,replaceVal=row.querySelector(".replace-input").value;findVal&&pairsToReplace.push({find:findVal,replace:replaceVal})});const isWordMode=wordModeRadio.checked;for(const pair of pairsToReplace){let escapedFindVal=pair.find.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");isWordMode&&(escapedFindVal="\\b"+escapedFindVal+"\\b");const regex=new RegExp(escapedFindVal,"g");currentText=currentText.replace(regex,pair.replace)}mainTextareaForNewFunc.value=currentText,mainTextareaForNewFunc.dispatchEvent(new Event("input",{bubbles:!0}))}),loadSettings(),loadPairs(),0===pairsContainer.childElementCount&&addPairRow()}!function(){const blankLineToggle=document.getElementById("enable-blank-line-chunking");blankLineToggle&&(blankLineToggle.addEventListener("change",function(){(()=>{const settings={enableBlankLineChunking:blankLineToggle.checked};localStorage.setItem("DUC_LOI_CHUNK_SETTINGS_V1",JSON.stringify(settings))})()}),(()=>{try{const savedSettings=localStorage.getItem("DUC_LOI_CHUNK_SETTINGS_V1");if(savedSettings){const settings=JSON.parse(savedSettings);blankLineToggle.checked=!0===settings.enableBlankLineChunking}else blankLineToggle.checked=!1}catch(e){blankLineToggle.checked=!1}})())}(),function(){const modal=document.getElementById("punctuation-settings-modal");if(!modal)return;const openBtn=document.getElementById("open-punctuation-settings-btn");if(!openBtn)return;const startQueueBtn=document.getElementById("gemini-start-queue-btn"),applyPunctuationBtn=document.getElementById("apply-punctuation-btn"),mainTextarea=document.getElementById("gemini-main-textarea");startQueueBtn&&startQueueBtn.addEventListener("click",function(){startQueueBtn.style.display="none"});const tabBtns=modal.querySelectorAll(".settings-tab-btn"),tabContents=modal.querySelectorAll(".settings-tab-content");tabBtns.forEach(btn=>{btn.addEventListener("click",function(){const targetTab=this.getAttribute("data-tab");tabBtns.forEach(b=>{b.classList.remove("active"),b.style.color="#94a3b8",b.style.borderBottom="3px solid transparent"}),this.classList.add("active"),this.style.color="#f8f8f2",this.style.borderBottom="3px solid #bd93f9",tabContents.forEach(content=>{content.style.display="none"});const targetContent=document.getElementById(targetTab);targetContent&&(targetContent.style.display="block")})});const closeBtn=modal.querySelector(".punctuation-modal-close-btn"),saveBtn=document.getElementById("save-punctuation-settings-btn"),defaultBtn=document.getElementById("default-punctuation-settings-btn"),adjustBtns=modal.querySelectorAll(".adjust-btn"),inputs={period:modal.querySelector("#pause-period"),comma:modal.querySelector("#pause-comma"),semicolon:modal.querySelector("#pause-semicolon"),newline:modal.querySelector("#pause-newline")},toggles={period:modal.querySelector("#toggle-period"),comma:modal.querySelector("#toggle-comma"),semicolon:modal.querySelector("#toggle-semicolon"),newline:modal.querySelector("#toggle-newline")},DEFAULTS={period:.7,comma:.3,semicolon:.5,newline:.5,periodEnabled:!1,commaEnabled:!1,semicolonEnabled:!1,newlineEnabled:!1},checkPunctuationState=()=>{toggles.period.checked&&parseFloat(inputs.period.value)>0||toggles.comma.checked&&parseFloat(inputs.comma.value)>0||toggles.semicolon.checked&&parseFloat(inputs.semicolon.value)>0||toggles.newline.checked&&parseFloat(inputs.newline.value)>0?(startQueueBtn.style.display="none",applyPunctuationBtn.style.display="block"):(EfNjYNYj_O_CGB||(startQueueBtn.style.display="block"),applyPunctuationBtn.style.display="none")},closeModal=()=>{modal.style.display="none",loadSettings(),checkPunctuationState()},getSettingsFromStorage=()=>{try{const saved=localStorage.getItem("DUC_LOI_PUNCTUATION_SETTINGS_V2");return saved?JSON.parse(saved):DEFAULTS}catch(e){return DEFAULTS}},loadSettings=()=>{const settings=getSettingsFromStorage();Object.keys(settings).forEach(key=>{if(key.endsWith("Enabled")){const baseKey=key.replace("Enabled","");toggles[baseKey]&&(toggles[baseKey].checked=settings[key])}else inputs[key]&&(inputs[key].value=(settings[key]||0).toFixed(1))})},saveSettings=(shouldCloseModal=!0)=>{const settingsToSave={period:parseFloat(inputs.period.value)||0,comma:parseFloat(inputs.comma.value)||0,semicolon:parseFloat(inputs.semicolon.value)||0,newline:parseFloat(inputs.newline.value)||0,periodEnabled:toggles.period.checked,commaEnabled:toggles.comma.checked,semicolonEnabled:toggles.semicolon.checked,newlineEnabled:toggles.newline.checked};localStorage.setItem("DUC_LOI_PUNCTUATION_SETTINGS_V2",JSON.stringify(settingsToSave)),shouldCloseModal&&(closeModal(),Swal.fire({toast:!0,position:"top-end",icon:"success",title:"ƒê√£ l∆∞u c√†i ƒë·∫∑t!",showConfirmButton:!1,timer:1500})),checkPunctuationState()},adjustValue=e=>{const targetId=e.target.dataset.target,step=parseFloat(e.target.dataset.step),input=document.getElementById(targetId);if(input){let currentValue=parseFloat(input.value)||0,newValue=Math.max(0,currentValue+step);input.value=newValue.toFixed(1),saveSettings(!1)}};applyPunctuationBtn.addEventListener("click",()=>{const settings=getSettingsFromStorage();let textToProcess=mainTextarea.value;const mapDurationToPauseString=seconds=>`<#${parseFloat(seconds).toFixed(1)}#>`;textToProcess=textToProcess.replace(/<#[0-9.]+#>/g,""),textToProcess=textToProcess.replace(/ {2,}/g," "),settings.periodEnabled&&settings.period>0&&(textToProcess=textToProcess.replace(/(?<!\d)\.(?!\d)/g,` ${mapDurationToPauseString(settings.period)} `)),settings.commaEnabled&&settings.comma>0&&(textToProcess=textToProcess.replace(/(?<!\d),(?!\d)/g,` ${mapDurationToPauseString(settings.comma)} `)),settings.semicolonEnabled&&settings.semicolon>0&&(textToProcess=textToProcess.replace(/;/g,` ${mapDurationToPauseString(settings.semicolon)} `)),settings.newlineEnabled&&settings.newline>0&&(textToProcess=textToProcess.replace(/\n/g,` ${mapDurationToPauseString(settings.newline)} `)),textToProcess=textToProcess.replace(/ {2,}/g," "),mainTextarea.value=textToProcess,mainTextarea.dispatchEvent(new Event("input",{bubbles:!0})),Object.values(toggles).forEach(toggle=>toggle.checked=!1),startQueueBtn.style.display="block";const hasText=""!==mainTextarea.value.trim(),hasAudio=PcLAEW&&PcLAEW.files&&PcLAEW.files.length>0;startQueueBtn.disabled=!hasText||!hasAudio,applyPunctuationBtn.style.display="none",Swal.fire({toast:!0,position:"top-end",icon:"success",title:"ƒê√£ √°p d·ª•ng thi·∫øt l·∫≠p v√†o vƒÉn b·∫£n!",showConfirmButton:!1,timer:2e3})}),openBtn.addEventListener("click",()=>{loadSettings(),modal.style.display="flex"}),closeBtn.addEventListener("click",closeModal),modal.addEventListener("click",e=>{e.target===modal&&closeModal()}),saveBtn.addEventListener("click",()=>saveSettings(!0)),defaultBtn.addEventListener("click",()=>{Object.keys(DEFAULTS).forEach(key=>{if(key.endsWith("Enabled")){const baseKey=key.replace("Enabled","");toggles[baseKey].checked=DEFAULTS[key]}else inputs[key].value=DEFAULTS[key].toFixed(1)}),saveSettings(!1)}),adjustBtns.forEach(btn=>btn.addEventListener("click",adjustValue)),modal.addEventListener("change",()=>saveSettings(!1)),modal.addEventListener("input",()=>saveSettings(!1)),loadSettings(),checkPunctuationState()}(),function(){const folderSelectBtn=document.getElementById("folder-select-btn"),selectedFolderPath=document.getElementById("selected-folder-path"),audioListContainer=document.getElementById("audio-list-container"),refreshBtn=document.getElementById("refresh-audio-list-btn");let selectedFolderHandle=null,currentAudio=null;function saveFolderInfo(folderName,folderPath){try{localStorage.setItem("DUC_LOI_AUDIO_FOLDER_NAME_V1",folderName),localStorage.setItem("DUC_LOI_AUDIO_FOLDER_PATH_V1",folderPath),localStorage.setItem("DUC_LOI_LAST_ACCESS_V1",Date.now().toString())}catch(error){}}function getAudioDuration(file){return new Promise(resolve=>{const audio=new Audio;audio.addEventListener("loadedmetadata",()=>{resolve(audio.duration)}),audio.addEventListener("error",()=>{resolve(0)}),audio.src=URL.createObjectURL(file)})}async function updateAudioList(){if(selectedFolderHandle)try{const files=[];for await(const[name,handle]of selectedFolderHandle.entries())if("file"===handle.kind&&name.toLowerCase().endsWith(".mp3")){const file=await handle.getFile();files.push(file)}if(function(files){try{const fileListData=files.map(file=>({name:file.name,size:file.size,lastModified:file.lastModified,type:file.type}));localStorage.setItem("DUC_LOI_AUDIO_FILE_LIST_V1",JSON.stringify(fileListData))}catch(error){}}(files),audioListContainer.innerHTML="",0===files.length)audioListContainer.innerHTML='<div style="padding: 10px; text-align: center; color: #94a3b8;">Kh√¥ng t√¨m th·∫•y file MP3 n√†o</div>';else{const summaryDiv=document.createElement("div");summaryDiv.id="audio-summary",summaryDiv.style.cssText="padding: 12px; margin-bottom: 10px; background: rgba(139, 233, 253, 0.1); border-radius: 6px; border-left: 4px solid #8be9fd; font-size: 12px;",summaryDiv.innerHTML="üìä ƒêang ki·ªÉm tra ƒë·ªô d√†i audio...",audioListContainer.appendChild(summaryDiv);const filePromises=[];files.forEach((file,index)=>{const item=function(file,index){const item=document.createElement("div");item.className="audio-item",item.dataset.index=index;const name=document.createElement("div");name.className="audio-name",name.textContent=file.name;const duration=document.createElement("div");duration.className="audio-duration",duration.textContent="--:--";const playBtn=document.createElement("button");playBtn.className="play-btn",playBtn.textContent="‚ñ∂",playBtn.title="Ph√°t √¢m thanh";const uploadBtn=document.createElement("button");return uploadBtn.className="play-btn",uploadBtn.textContent="üì§",uploadBtn.title="T·∫£i file l√™n",uploadBtn.style.marginLeft="5px",item.appendChild(name),item.appendChild(duration),item.appendChild(playBtn),item.appendChild(uploadBtn),getAudioDuration(file).then(dur=>{var seconds;if(duration.textContent=(seconds=dur,`${Math.floor(seconds/60)}:${Math.floor(seconds%60).toString().padStart(2,"0")}`),item.dataset.duration=dur,dur<20||dur>60){item.style.backgroundColor="rgba(248, 113, 113, 0.1)",item.style.borderLeft="3px solid #f87171",duration.style.color="#f87171",duration.style.fontWeight="bold",uploadBtn.style.opacity="0.5",uploadBtn.title="‚ö†Ô∏è Audio kh√¥ng h·ª£p l·ªá (20-60s)";const warningIcon=document.createElement("span");warningIcon.textContent="‚ö†Ô∏è",warningIcon.style.color="#f87171",warningIcon.style.marginLeft="5px",warningIcon.title=`Audio ph·∫£i t·ª´ 20-60 gi√¢y (hi·ªán t·∫°i: ${Math.floor(dur)}s)`,duration.appendChild(warningIcon)}else item.style.backgroundColor="rgba(80, 250, 123, 0.05)",item.style.borderLeft="3px solid #50fa7b",duration.style.color="#50fa7b",uploadBtn.title="‚úÖ T·∫£i file l√™n (ƒë·ªô d√†i h·ª£p l·ªá)"}),playBtn.addEventListener("click",e=>{if(e.stopPropagation(),currentAudio&&!1===currentAudio.paused)return currentAudio.pause(),void document.querySelectorAll(".audio-item.playing").forEach(el=>{el.classList.remove("playing"),el.querySelector(".play-btn").textContent="‚ñ∂"});currentAudio&&(currentAudio.pause(),currentAudio=null);const audio=new Audio(URL.createObjectURL(file));currentAudio=audio,document.querySelectorAll(".audio-item.playing").forEach(el=>{el.classList.remove("playing"),el.querySelector(".play-btn").textContent="‚ñ∂"}),item.classList.add("playing"),playBtn.textContent="‚è∏",audio.addEventListener("ended",()=>{item.classList.remove("playing"),playBtn.textContent="‚ñ∂",currentAudio=null}),audio.addEventListener("pause",()=>{item.classList.remove("playing"),playBtn.textContent="‚ñ∂"}),audio.play().catch(console.error)}),uploadBtn.addEventListener("click",async e=>{if(e.stopPropagation(),addLogEntry("üîç [DEBUG] Upload button clicked!","info"),addLogEntry(`üîç [DEBUG] File name: ${file.name}`,"info"),addLogEntry(`üîç [DEBUG] item.dataset.duration: ${item.dataset.duration}`,"info"),!item.dataset.duration||"undefined"===item.dataset.duration){addLogEntry("‚ö†Ô∏è [DEBUG] Duration not ready yet, fetching...","warning"),Swal.fire({title:"ƒêang ki·ªÉm tra ƒë·ªô d√†i audio...",text:"Vui l√≤ng ch·ªù...",icon:"info",allowOutsideClick:!1,showConfirmButton:!1,didOpen:()=>{Swal.showLoading()}});const dur=await getAudioDuration(file);item.dataset.duration=dur,addLogEntry(`‚úÖ [DEBUG] Duration fetched: ${dur} seconds`,"success"),Swal.close()}const audioDuration=parseFloat(item.dataset.duration);if(addLogEntry(`üîç [DEBUG] Parsed audioDuration: ${audioDuration}`,"info"),addLogEntry(`üîç [DEBUG] Is valid (20-60)? ${audioDuration>=20&&audioDuration<=60}`,"info"),!audioDuration||audioDuration<20||audioDuration>60){let errorMessage="",details="";return audioDuration&&0!==audioDuration?audioDuration<20?(errorMessage=`Audio qu√° ng·∫Øn: ${Math.floor(audioDuration)} gi√¢y`,details="C·∫ßn t·ªëi thi·ªÉu 20 gi√¢y."):(errorMessage=`Audio qu√° d√†i: ${Math.floor(audioDuration)} gi√¢y`,details="T·ªëi ƒëa 60 gi√¢y (1 ph√∫t)."):(errorMessage="Kh√¥ng th·ªÉ x√°c ƒë·ªãnh ƒë·ªô d√†i audio.",details="File c√≥ th·ªÉ b·ªã l·ªói ho·∫∑c kh√¥ng ph·∫£i file audio h·ª£p l·ªá."),addLogEntry("‚ùå [DEBUG] VALIDATION FAILED!","error"),addLogEntry(`‚ùå [DEBUG] Reason: ${errorMessage}`,"error"),Swal.fire({icon:"error",title:"‚ö†Ô∏è Audio kh√¥ng h·ª£p l·ªá",html:`\n                                <div style="text-align: left; padding: 15px;">\n                                    <div style="background: rgba(248, 113, 113, 0.1); padding: 12px; border-radius: 6px; margin-bottom: 15px; border-left: 4px solid #f87171;">\n                                        <p style="margin: 0; font-weight: bold; color: #f87171;">‚ùå ${errorMessage}</p>\n                                        <p style="margin: 5px 0 0 0; font-size: 13px; color: #fca5a5;">${details}</p>\n                                    </div>\n                                    \n                                    <hr style="border-color: rgba(255,255,255,0.1); margin: 15px 0;">\n                                    \n                                    <div style="background: rgba(139, 233, 253, 0.1); padding: 12px; border-radius: 6px; border-left: 4px solid #8be9fd;">\n                                        <p style="margin: 0 0 8px 0; font-weight: bold;">üìå Y√™u c·∫ßu:</p>\n                                        <ul style="margin: 0; padding-left: 20px;">\n                                            <li style="margin: 5px 0;">ƒê·ªô d√†i: <strong style="color: #50fa7b;">20-60 gi√¢y</strong></li>\n                                            <li style="margin: 5px 0;">Hi·ªán t·∫°i: <strong style="color: #f87171;">${audioDuration?Math.floor(audioDuration):"???"} gi√¢y</strong></li>\n                                            <li style="margin: 5px 0;">File: <code style="background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 3px;">${file.name}</code></li>\n                                        </ul>\n                                    </div>\n                                    \n                                    <p style="margin-top: 15px; color: #8be9fd; font-size: 13px;">\n                                        üí° <strong>Gi·∫£i ph√°p:</strong> Ch·ªçn file audio kh√°c ho·∫∑c c·∫Øt/ch·ªânh s·ª≠a file n√†y v·ªÅ 20-60 gi√¢y.\n                                    </p>\n                                </div>\n                            `,confirmButtonText:"ƒê√£ hi·ªÉu",confirmButtonColor:"#8be9fd",background:"#282a36",color:"#f8f8f2",width:"600px"}),void addLogEntry("üö´ [DEBUG] Upload BLOCKED!","error")}addLogEntry("‚úÖ [DEBUG] Validation PASSED! Proceeding with upload...","success");try{const fileInput=document.getElementById("gemini-file-input");if(fileInput){const dataTransfer=new DataTransfer;dataTransfer.items.add(file),fileInput.files=dataTransfer.files,fileInput.dispatchEvent(new Event("change",{bubbles:!0})),addLogEntry("‚úÖ [DEBUG] File uploaded successfully!","success"),Swal.fire({toast:!0,position:"top-end",icon:"success",title:"‚úÖ ƒê√£ t·∫£i file √¢m thanh",text:`File "${file.name}" (${Math.floor(audioDuration)}s) ƒë√£ ƒë∆∞·ª£c t·∫£i l√™n!`,showConfirmButton:!1,timer:2500,timerProgressBar:!0})}}catch(error){addLogEntry(`‚ùå [DEBUG] Error during upload: ${error.message}`,"error"),Swal.fire({toast:!0,position:"top-end",icon:"error",title:"L·ªói t·∫£i file",text:"Kh√¥ng th·ªÉ t·ª± ƒë·ªông t·∫£i file. Vui l√≤ng th·ª≠ l·∫°i.",showConfirmButton:!1,timer:2e3,timerProgressBar:!0})}}),item.addEventListener("click",()=>{playBtn.click()}),item}(file,index);audioListContainer.appendChild(item),filePromises.push(getAudioDuration(file))}),Promise.all(filePromises).then(durations=>{const validFiles=durations.filter(d=>d>=20&&d<=60).length,invalidFiles=durations.length-validFiles;let summaryHtml=`\n                                <div style="display: flex; justify-content: space-between; align-items: center; gap: 15px;">\n                                    <div style="flex: 1;">\n                                        <strong>üìä T·ªïng quan:</strong> ${files.length} file\n                                    </div>\n                                    <div style="flex: 1; text-align: center;">\n                                        <span style="color: #50fa7b; font-weight: bold;">‚úÖ ${validFiles}</span> h·ª£p l·ªá\n                                    </div>\n                                    <div style="flex: 1; text-align: right;">\n                                        <span style="color: #f87171; font-weight: bold;">‚ö†Ô∏è ${invalidFiles}</span> kh√¥ng h·ª£p l·ªá\n                                    </div>\n                                </div>\n                            `;invalidFiles>0&&(summaryHtml+=`\n                                    <div style="margin-top: 8px; padding-top: 8px; border-top: 1px solid rgba(255,255,255,0.1); color: #f87171; font-size: 11px;">\n                                        üí° <strong>${invalidFiles} file</strong> kh√¥ng th·ªÉ upload v√¨ ƒë·ªô d√†i kh√¥ng ph·∫£i 20-60 gi√¢y\n                                    </div>\n                                `),summaryDiv.innerHTML=summaryHtml})}}catch(error){audioListContainer.innerHTML='<div style="padding: 10px; text-align: center; color: #f87171;">L·ªói khi ƒë·ªçc th∆∞ m·ª•c</div>'}}folderSelectBtn&&folderSelectBtn.addEventListener("click",async()=>{try{"showDirectoryPicker"in window?(selectedFolderHandle=await window.showDirectoryPicker(),selectedFolderPath.textContent=`üìÅ ${selectedFolderHandle.name}`,selectedFolderPath.style.display="block",audioListContainer.style.display="block",refreshBtn.style.display="block",saveFolderInfo(selectedFolderHandle.name,selectedFolderHandle.name),await updateAudioList(),Swal.fire({toast:!0,position:"top-end",icon:"success",title:"ƒê√£ ch·ªçn th∆∞ m·ª•c",text:`Th∆∞ m·ª•c "${selectedFolderHandle.name}" ƒë√£ ƒë∆∞·ª£c ch·ªçn v√† l∆∞u t·ª± ƒë·ªông`,showConfirmButton:!1,timer:2e3,timerProgressBar:!0}),setInterval(updateAudioList,5e3)):Swal.fire({icon:"warning",title:"Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£",text:"Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ t√≠nh nƒÉng ch·ªçn th∆∞ m·ª•c. Vui l√≤ng s·ª≠ d·ª•ng Chrome, Edge ho·∫∑c Opera m·ªõi nh·∫•t.",confirmButtonText:"OK"})}catch(error){"AbortError"!==error.name&&Swal.fire({icon:"error",title:"L·ªói",text:"Kh√¥ng th·ªÉ ch·ªçn th∆∞ m·ª•c. Vui l√≤ng th·ª≠ l·∫°i.",confirmButtonText:"OK"})}}),refreshBtn&&refreshBtn.addEventListener("click",updateAudioList);const connectSavedBtn=document.createElement("button");connectSavedBtn.id="connect-saved-folder-btn",connectSavedBtn.textContent="üîó K·∫øt n·ªëi th∆∞ m·ª•c ƒë√£ l∆∞u",connectSavedBtn.style.cssText="background-color:#50fa7b;color:#282a36;padding:8px 12px;border:none;border-radius:4px;cursor:pointer;font-size:12px;margin-top:5px;width:100%;font-weight:bold",connectSavedBtn.title="K·∫øt n·ªëi ƒë·∫øn th∆∞ m·ª•c ƒë√£ l∆∞u tr∆∞·ªõc ƒë√≥",connectSavedBtn.style.display="none",connectSavedBtn.addEventListener("click",async()=>{if("showDirectoryPicker"in window)try{Swal.fire({title:"ƒêang k·∫øt n·ªëi...",text:"Vui l√≤ng ch·ªçn th∆∞ m·ª•c trong c·ª≠a s·ªï m·ªõi m·ªü",icon:"info",allowOutsideClick:!1,showConfirmButton:!1,timer:1e4,timerProgressBar:!0}),selectedFolderHandle=await window.showDirectoryPicker(),selectedFolderPath.textContent=`üìÅ ${selectedFolderHandle.name}`,saveFolderInfo(selectedFolderHandle.name,selectedFolderHandle.name),await updateAudioList(),Swal.fire({toast:!0,position:"top-end",icon:"success",title:"‚úÖ ƒê√£ k·∫øt n·ªëi th√†nh c√¥ng!",text:`Th∆∞ m·ª•c "${selectedFolderHandle.name}" ƒë√£ s·∫µn s√†ng s·ª≠ d·ª•ng`,showConfirmButton:!1,timer:3e3,timerProgressBar:!0})}catch(error){"AbortError"!==error.name?Swal.fire({icon:"error",title:"L·ªói k·∫øt n·ªëi",text:"Kh√¥ng th·ªÉ k·∫øt n·ªëi ƒë·∫øn th∆∞ m·ª•c. Vui l√≤ng th·ª≠ l·∫°i.",confirmButtonText:"OK"}):Swal.fire({toast:!0,position:"top-end",icon:"info",title:"ƒê√£ h·ªßy",text:'B·∫°n c√≥ th·ªÉ click n√∫t "K·∫øt n·ªëi th∆∞ m·ª•c ƒë√£ l∆∞u" ƒë·ªÉ th·ª≠ l·∫°i',showConfirmButton:!1,timer:2e3,timerProgressBar:!0})}else Swal.fire({icon:"warning",title:"Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£",text:"Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ t√≠nh nƒÉng ch·ªçn th∆∞ m·ª•c. Vui l√≤ng s·ª≠ d·ª•ng Chrome, Edge ho·∫∑c Opera m·ªõi nh·∫•t.",confirmButtonText:"OK"})}),refreshBtn&&refreshBtn.parentNode&&refreshBtn.parentNode.insertBefore(connectSavedBtn,refreshBtn.nextSibling),selectedFolderPath&&(selectedFolderPath.addEventListener("click",async()=>{if("showDirectoryPicker"in window)try{Swal.fire({title:"ƒêang m·ªü th∆∞ m·ª•c...",text:"Vui l√≤ng ch·ªçn th∆∞ m·ª•c trong c·ª≠a s·ªï m·ªõi m·ªü",icon:"info",allowOutsideClick:!1,showConfirmButton:!1,timer:5e3,timerProgressBar:!0}),selectedFolderHandle=await window.showDirectoryPicker(),selectedFolderPath.textContent=`üìÅ ${selectedFolderHandle.name}`,saveFolderInfo(selectedFolderHandle.name,selectedFolderHandle.name),await updateAudioList(),Swal.fire({toast:!0,position:"top-end",icon:"success",title:"‚úÖ ƒê√£ kh√¥i ph·ª•c th∆∞ m·ª•c!",text:`Th∆∞ m·ª•c "${selectedFolderHandle.name}" ƒë√£ s·∫µn s√†ng s·ª≠ d·ª•ng`,showConfirmButton:!1,timer:3e3,timerProgressBar:!0})}catch(error){"AbortError"!==error.name?Swal.fire({icon:"error",title:"L·ªói ch·ªçn th∆∞ m·ª•c",text:"Kh√¥ng th·ªÉ ch·ªçn th∆∞ m·ª•c. Vui l√≤ng th·ª≠ l·∫°i.",confirmButtonText:"OK"}):Swal.fire({toast:!0,position:"top-end",icon:"info",title:"ƒê√£ h·ªßy",text:"B·∫°n c√≥ th·ªÉ click v√†o t√™n th∆∞ m·ª•c ƒë·ªÉ ch·ªçn l·∫°i b·∫•t c·ª© l√∫c n√†o",showConfirmButton:!1,timer:2e3,timerProgressBar:!0})}else Swal.fire({icon:"warning",title:"Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£",text:"Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ t√≠nh nƒÉng ch·ªçn th∆∞ m·ª•c. Vui l√≤ng s·ª≠ d·ª•ng Chrome, Edge ho·∫∑c Opera m·ªõi nh·∫•t.",confirmButtonText:"OK"})}),selectedFolderPath.style.cursor="pointer",selectedFolderPath.style.transition="all 0.2s ease",selectedFolderPath.title="Click ƒë·ªÉ ch·ªçn l·∫°i th∆∞ m·ª•c v√† kh√¥i ph·ª•c quy·ªÅn truy c·∫≠p",selectedFolderPath.addEventListener("mouseenter",()=>{selectedFolderPath.style.backgroundColor="#44475a",selectedFolderPath.style.borderRadius="4px",selectedFolderPath.style.padding="4px 8px"}),selectedFolderPath.addEventListener("mouseleave",()=>{selectedFolderPath.style.backgroundColor="transparent",selectedFolderPath.style.borderRadius="0",selectedFolderPath.style.padding="0"})),function(){try{const savedFolderName=localStorage.getItem("DUC_LOI_AUDIO_FOLDER_NAME_V1"),savedFolderPath=localStorage.getItem("DUC_LOI_AUDIO_FOLDER_PATH_V1"),savedFileList=localStorage.getItem("DUC_LOI_AUDIO_FILE_LIST_V1");if(savedFolderName&&savedFolderPath){if(selectedFolderPath.textContent=`üìÅ ${savedFolderName} (ƒê√£ l∆∞u - Click ƒë·ªÉ ch·ªçn l·∫°i)`,selectedFolderPath.style.display="block",audioListContainer.style.display="block",refreshBtn.style.display="block",savedFileList)try{!function(fileListData){if(audioListContainer.innerHTML="",0===fileListData.length)return void(audioListContainer.innerHTML='<div style="padding: 10px; text-align: center; color: #94a3b8;">Kh√¥ng c√≥ file MP3 n√†o</div>');fileListData.forEach((fileData,index)=>{const item=document.createElement("div");item.className="audio-item",item.dataset.index=index;const name=document.createElement("div");name.className="audio-name",name.textContent=fileData.name;const duration=document.createElement("div");duration.className="audio-duration",duration.textContent="--:--";const playBtn=document.createElement("button");playBtn.className="play-btn",playBtn.textContent="‚ñ∂",playBtn.title="Ph√°t √¢m thanh",playBtn.disabled=!0;const uploadBtn=document.createElement("button");uploadBtn.className="play-btn",uploadBtn.textContent="üì§",uploadBtn.title="T·∫£i file l√™n",uploadBtn.style.marginLeft="5px",uploadBtn.disabled=!0;const statusText=document.createElement("div");statusText.className="audio-duration",statusText.textContent="ƒê√£ l∆∞u",statusText.style.color="#50fa7b",statusText.style.fontSize="10px",item.appendChild(name),item.appendChild(duration),item.appendChild(playBtn),item.appendChild(uploadBtn),item.appendChild(statusText),audioListContainer.appendChild(item)});const infoDiv=document.createElement("div");infoDiv.style.cssText="padding: 8px; text-align: center; color: #8be9fd; font-size: 12px; background: #44475a; border-radius: 4px; margin-bottom: 10px;",infoDiv.innerHTML="üìÅ <strong>D·ªØ li·ªáu ƒë√£ l∆∞u t·ª± ƒë·ªông</strong><br/>üí° Tool s·∫Ω nh·ªõ th∆∞ m·ª•c n√†y khi b·∫°n t·∫Øt/kh·ªüi ƒë·ªông l·∫°i<br/>üîÑ Click v√†o t√™n th∆∞ m·ª•c ƒë·ªÉ ch·ªçn l·∫°i",audioListContainer.insertBefore(infoDiv,audioListContainer.firstChild)}(JSON.parse(savedFileList))}catch(error){}return{folderName:savedFolderName,folderPath:savedFolderPath}}}catch(error){}return null}()&&(connectSavedBtn.style.display="block")}(),function(){let detectedPunctuationIssues=[];function detectPunctuationIssues(text){if(!text)return[];const issues=[],generalPattern=/[.!?,;:]{2,}|[.!?,;:]["']|["'][.!?,;:]|["'][.!?,;:]{2,}|[.!?,;:]{2,}["']/g;let match;for(;null!==(match=generalPattern.exec(text));){const matchedText=match[0],start=match.index,end=match.index+matchedText.length;let type="D·∫•u c√¢u tr√πng l·∫∑p";/[.!?]{2,}/.test(matchedText)?type="D·∫•u ch·∫•m/ch·∫•m h·ªèi/ch·∫•m than tr√πng l·∫∑p":/[,;]{2,}/.test(matchedText)?type="D·∫•u ph·∫©y/ch·∫•m ph·∫©y tr√πng l·∫∑p":/[:]{2,}/.test(matchedText)?type="D·∫•u hai ch·∫•m tr√πng l·∫∑p":/["'][.!?,;:]|[.!?,;:]["']/.test(matchedText)?type="D·∫•u ngo·∫∑c k√©p k·∫øt h·ª£p v·ªõi d·∫•u c√¢u kh√°c":/[.!?][,;:]|[;:,][.!?]/.test(matchedText)&&(type="D·∫•u c√¢u k·∫øt h·ª£p kh√°c nhau"),issues.push({text:matchedText,start:start,end:end,type:type,suggestion:getPunctuationSuggestion(matchedText)})}const vietnameseIssues=function(text){const languageSelect=document.getElementById("gemini-language-select");if(!languageSelect)return[];const selectedLanguage=languageSelect.value.toLowerCase();if(!selectedLanguage.includes("vi·ªát")&&!selectedLanguage.includes("viet")&&!selectedLanguage.includes("vietnamese"))return[];const issues=[],aiPattern=/\bai\b/gi;let match;for(;null!==(match=aiPattern.exec(text));)"ai"===match[0]&&issues.push({text:match[0],start:match.index,end:match.index+match[0].length,type:"‚ö†Ô∏è T·ª´ Ti·∫øng Vi·ªát hay b·ªã ƒë·ªçc sai",suggestion:"Ai",isVietnameseWord:!0});const imPattern=/\bim\b/gi;for(;null!==(match=imPattern.exec(text));)"im"===match[0]&&issues.push({text:match[0],start:match.index,end:match.index+match[0].length,type:"‚ö†Ô∏è T·ª´ Ti·∫øng Vi·ªát hay b·ªã ƒë·ªçc sai",suggestion:"Im",isVietnameseWord:!0});return issues}(text);return issues.push(...vietnameseIssues),issues}function getPunctuationSuggestion(originalText){return originalText.includes("?")?"?":originalText.includes("!")?"!":originalText.includes(".")?".":originalText.includes(",")?",":originalText.includes('"')?'"':originalText.includes("'")?"'":"."}function displayPunctuationIssues(issues){const modal=document.getElementById("punctuation-detection-modal"),issuesList=document.getElementById("punctuation-issues-list");if(issues&&0!==issues.length)return window.batchState&&window.batchState.isProcessing?(addLogEntry("üîß [Batch] T·ª± ƒë·ªông s·ª≠a d·∫•u c√¢u tr√πng l·∫∑p...","info"),void setTimeout(()=>{window.autoFixAllPunctuationIssues()},100)):(issuesList.innerHTML="",issues.forEach((issue,index)=>{const issueDiv=document.createElement("div");issueDiv.style.cssText="\n                        background: #44475a;\n                        border: 1px solid #6272a4;\n                        border-radius: 6px;\n                        padding: 12px;\n                        margin-bottom: 10px;\n                        font-size: 14px;\n                    ",issueDiv.className="punctuation-issue-item",issueDiv.innerHTML=`\n                        <div style="color: #ffb86c; font-weight: bold; margin-bottom: 6px; font-size: 15px;">\n                            ${issue.type}\n                        </div>\n                        <div style="color: #f8f8f2; margin-bottom: 6px;">\n                            <strong>Ph√°t hi·ªán:</strong> <span style="background: #ff5555; color: white; padding: 2px 6px; border-radius: 3px; font-family: monospace;">"${issue.text}"</span>\n                        </div>\n                        <div style="color: #50fa7b;">\n                            <strong>ƒê·ªÅ xu·∫•t:</strong> <span style="background: #50fa7b; color: #282a36; padding: 2px 6px; border-radius: 3px; font-family: monospace;">"${issue.suggestion}"</span>\n                        </div>\n                    `,issuesList.appendChild(issueDiv)}),void(modal.style.display="flex"));modal.style.display="none"}function ignoreAllPunctuationIssues(){const modal=document.getElementById("punctuation-detection-modal");detectedPunctuationIssues=[],modal&&(modal.style.display="none")}window.autoFixAllPunctuationIssues=function(){const textarea=document.getElementById("gemini-main-textarea"),defaultPunctuation=document.getElementById("default-punctuation-select"),modal=document.getElementById("punctuation-detection-modal"),isBatchMode=window.batchState&&window.batchState.isProcessing;if(!textarea)return;if(!defaultPunctuation)return;if(!modal&&!isBatchMode)return;if(!detectedPunctuationIssues.length)return void(modal&&(modal.style.display="none"));const punctuationValue=defaultPunctuation.value;let text=textarea.value;const punctuationIssues=detectedPunctuationIssues.filter(issue=>!issue.isVietnameseWord),vietnameseWordIssues=detectedPunctuationIssues.filter(issue=>issue.isVietnameseWord),sortedAllIssues=[...punctuationIssues.map(issue=>({...issue,replacement:punctuationValue})),...vietnameseWordIssues.map(issue=>({...issue,replacement:issue.suggestion}))].sort((a,b)=>b.start-a.start);sortedAllIssues.forEach((issue,index)=>{const beforeText=text.substring(0,issue.start),afterText=text.substring(issue.end);text=beforeText+issue.replacement+afterText}),textarea.value=text,detectedPunctuationIssues=[],modal&&(modal.style.display="none"),textarea.dispatchEvent(new Event("input")),sortedAllIssues.length;const punctuationCount=punctuationIssues.length,vietnameseCount=vietnameseWordIssues.length;isBatchMode||"undefined"==typeof Swal||Swal.fire({toast:!0,position:"top-end",icon:"success",title:"ƒê√£ s·ª≠a d·∫•u c√¢u & t·ª´ Ti·∫øng Vi·ªát",text:`ƒê√£ t·ª± ƒë·ªông s·ª≠a ${punctuationCount} l·ªói d·∫•u c√¢u v√† ${vietnameseCount} t·ª´ Ti·∫øng Vi·ªát`,showConfirmButton:!1,timer:2e3,timerProgressBar:!0})},window.ignoreAllPunctuationIssues=ignoreAllPunctuationIssues,window.fixVietnameseWords=function(text){const languageSelect=document.getElementById("gemini-language-select");if(!languageSelect)return text;const selectedLanguage=languageSelect.value.toLowerCase();if(!selectedLanguage.includes("vi·ªát")&&!selectedLanguage.includes("viet")&&!selectedLanguage.includes("vietnamese"))return text;let fixedText=text,fixCount=0;const aiPattern=/(^|\s)(ai)(\s|$|[.,?!;:])/gi,aiMatches=fixedText.match(aiPattern);aiMatches&&(fixedText=fixedText.replace(aiPattern,(match,prefix,word,suffix)=>prefix+"Ai"+suffix),fixCount+=aiMatches.length);const imPattern=/(^|\s)(im)(\s|$|[.,?!;:])/gi,imMatches=fixedText.match(imPattern);return imMatches&&(fixedText=fixedText.replace(imPattern,(match,prefix,word,suffix)=>prefix+"Im"+suffix),fixCount+=imMatches.length),fixedText};const textarea=document.getElementById("gemini-main-textarea");textarea&&textarea.addEventListener("input",function(){const text=this.value;detectedPunctuationIssues=detectPunctuationIssues(text),detectedPunctuationIssues.length>0&&displayPunctuationIssues(detectedPunctuationIssues)});const startBtn=document.getElementById("gemini-start-queue-btn");startBtn&&startBtn.addEventListener("click",function(){const text=textarea.value;if(detectedPunctuationIssues=detectPunctuationIssues(text),detectedPunctuationIssues.length>0)return displayPunctuationIssues(detectedPunctuationIssues),!1});const modal=document.getElementById("punctuation-detection-modal");modal&&modal.addEventListener("click",function(e){e.target===modal&&ignoreAllPunctuationIssues()})}(),function(){function resetAndStartNewRender(newText){void 0!==window.ZTQj$LF$o&&(window.ZTQj$LF$o=[]),void 0!==window.SI$acY&&(window.SI$acY=[]),void 0!==window.ttuo$y_KhCV&&(window.ttuo$y_KhCV=0),void 0!==window.retryCount&&(window.retryCount=0);const progressBar=document.getElementById("gemini-progress-bar"),progressLabel=document.getElementById("gemini-progress-label");progressBar&&progressLabel&&(progressBar.style.width="0%",progressLabel.textContent="0%");const startButton=document.getElementById("gemini-start-queue-btn");if(startButton&&(startButton.disabled=!0),void 0!==window.SI$acY){const chunkSizeToggle=document.getElementById("chunk-size-toggle"),actualMaxLength=chunkSizeToggle&&chunkSizeToggle.checked?900:700;window.SI$acY=chiaVanBanThongMinh(newText,600,500,actualMaxLength),window.SI$acY.length,window.SI$acY.length>0&&startButton&&(startButton.disabled=!1)}void 0!==window.EfNjYNYj_O_CGB&&(window.EfNjYNYj_O_CGB=!0),void 0!==window.MEpJezGZUsmpZdAgFRBRZW&&(window.MEpJezGZUsmpZdAgFRBRZW=!0),"function"==typeof window.uSTZrHUt_IC_GLOBAL?window.uSTZrHUt_IC_GLOBAL():Swal.fire("L·ªói nghi√™m tr·ªçng","Kh√¥ng th·ªÉ kh·ªüi ƒë·ªông l·∫°i ti·∫øn tr√¨nh. Vui l√≤ng t·∫£i l·∫°i trang.","error")}const originalConsoleLog=console.log;console.log=function(...args){const message=args.join(" ");return message.includes("ƒê√£ th·ª≠ l·∫°i")&&message.includes("l·∫ßn nh∆∞ng v·∫´n th·∫•t b·∫°i")&&setTimeout(()=>{"function"==typeof window.stopTool&&window.stopTool()},1e3),originalConsoleLog.apply(console,args)},window.minimaxRetryHelper={isToolStopped:function(){return window.toolStopped||!1},stop:function(){"function"==typeof window.stopTool&&window.stopTool()},restart:function(){"function"==typeof window.restartTool&&window.restartTool()},checkRetryCount:function(){for(let key in window)key.includes("retry")||key.includes("Retry")},handleRetry:function(){},showRecovery:function(){void 0!==window.EfNjYNYj_O_CGB&&(window.EfNjYNYj_O_CGB=!1),void 0!==window.MEpJezGZUsmpZdAgFRBRZW&&(window.MEpJezGZUsmpZdAgFRBRZW=!1);const remainingText=(failedIndex=window.ttuo$y_KhCV||0)>=(allSegments=window.SI$acY||[]).length?"":allSegments.slice(failedIndex).join("\n\n");var failedIndex,allSegments;const successfulChunkCount=(window.ZTQj$LF$o||[]).length,failedChunkIndex=(window.ttuo$y_KhCV||0)+1;Swal.fire({title:"<strong>‚ö†Ô∏è ƒê√£ X·∫£y Ra L·ªói - Ch·∫ø ƒê·ªô Ph·ª•c H·ªìi</strong>",icon:"error",html:`\n                        <div style="text-align: left; font-size: 14px;">\n                            <p>Qu√° tr√¨nh render ƒë√£ d·ª´ng ·ªü <b>ƒëo·∫°n ${failedChunkIndex}</b>.</p>\n                            <p>B·∫°n c√≥ th·ªÉ t·∫£i v·ªÅ ph·∫ßn ƒë√£ ho√†n th√†nh, sau ƒë√≥ render ti·∫øp ph·∫ßn c√≤n l·∫°i.</p>\n                            <hr>\n                            <p><b>PH·∫¶N VƒÇN B·∫¢N C√íN L·∫†I:</b></p>\n                        </div>\n                        <textarea id="swal-remaining-text" style="width: 95%; height: 120px; margin-top: 10px; font-size: 12px;">${remainingText}</textarea>\n                    `,width:"600px",showCloseButton:!0,focusConfirm:!1,confirmButtonText:`‚úÖ T·∫£i Ph·∫ßn 1 (${successfulChunkCount} ƒêo·∫°n)`,confirmButtonColor:"#3085d6",showDenyButton:!0,denyButtonText:"üöÄ Render Ti·∫øp Ph·∫ßn 2",denyButtonColor:"#4CAF50",showCancelButton:!0,cancelButtonText:"ƒê√≥ng"}).then(result=>{if(result.isConfirmed)!function(audioChunks){if(!audioChunks||0===audioChunks.length)return void Swal.fire("Kh√¥ng c√≥ g√¨ ƒë·ªÉ t·∫£i","Kh√¥ng c√≥ ƒëo·∫°n √¢m thanh n√†o ƒë∆∞·ª£c x·ª≠ l√Ω th√†nh c√¥ng.","warning");const mergedBlob=new Blob(audioChunks,{type:"audio/mpeg"}),url=URL.createObjectURL(mergedBlob),a=document.createElement("a");a.style.display="none",a.href=url;const customFilenameInput=document.getElementById("custom-filename-input");let fileName="audio";if(customFilenameInput&&customFilenameInput.value&&customFilenameInput.value.trim()&&(fileName=customFilenameInput.value.trim(),fileName=fileName.replace(/[<>:"/\\|?*]/g,"").replace(/\s+/g,"_").replace(/[^\w\u00C0-\u1EF9]/g,"").trim(),fileName.length>100&&(fileName=fileName.substring(0,100))),"audio"===fileName){const textFileInput=document.getElementById("text-file-input");if(textFileInput&&textFileInput.files&&textFileInput.files.length>0){const uploadedTextFile=textFileInput.files[0];if(uploadedTextFile&&uploadedTextFile.name){const uploadedFileName=uploadedTextFile.name,lastDotIndex=uploadedFileName.lastIndexOf(".");fileName=lastDotIndex>0?uploadedFileName.substring(0,lastDotIndex):uploadedFileName,fileName=fileName.replace(/[<>:"/\\|?*]/g,"").replace(/\s+/g,"_").replace(/[^\w\u00C0-\u1EF9]/g,"").trim(),fileName.length>100&&(fileName=fileName.substring(0,100))}}}if("audio"===fileName){const textarea=document.getElementById("gemini-main-textarea");if(textarea&&textarea.value){const firstLine=textarea.value.split("\n")[0].trim();firstLine&&(fileName=firstLine.replace(/[<>:"/\\|?*]/g,"").replace(/\s+/g,"_").replace(/[^\w\u00C0-\u1EF9]/g,"").trim(),fileName.length>100&&(fileName=fileName.substring(0,100)))}}a.download=`${fileName}.mp3`,document.body.appendChild(a),a.click(),setTimeout(()=>{document.body.removeChild(a),window.URL.revokeObjectURL(url)},100)}(window.ZTQj$LF$o||[],window.ttuo$y_KhCV),document.getElementById("swal-remaining-text").select(),document.execCommand("copy"),Swal.fire({toast:!0,position:"top-end",icon:"success",title:"ƒê√£ t·∫£i file v√† copy ph·∫ßn c√≤n l·∫°i!",showConfirmButton:!1,timer:3e3});else if(result.isDenied){const textToRender=document.getElementById("swal-remaining-text").value;textToRender&&textToRender.trim().length>0?resetAndStartNewRender(textToRender):Swal.fire("Ho√†n t·∫•t!","Kh√¥ng c√≤n vƒÉn b·∫£n n√†o ƒë·ªÉ render.","info")}})},resetAndRender:resetAndStartNewRender};const originalSetAttribute=Element.prototype.setAttribute;Element.prototype.setAttribute=function(name,value){if("aria-hidden"!==name||"gemini-main-container"!==this.id)return originalSetAttribute.call(this,name,value)},setTimeout(()=>{const container=document.getElementById("gemini-main-container");container&&container.hasAttribute("aria-hidden")&&container.removeAttribute("aria-hidden")},1e3)}(),function(){const textTab=document.getElementById("text-tab"),fileTab=document.getElementById("file-tab"),textInputArea=document.getElementById("text-input-area"),fileInputArea=document.getElementById("file-input-area"),textFileInput=document.getElementById("text-file-input"),fileUploadArea=document.getElementById("file-upload-area"),fileInfo=document.getElementById("file-info"),removeFileBtn=document.getElementById("remove-file-btn"),textarea=document.getElementById("gemini-main-textarea");function handleFileUpload(file){const fileName=file.name,fileSize=function(bytes){if(0===bytes)return"0 Bytes";const i=Math.floor(Math.log(bytes)/Math.log(1024));return parseFloat((bytes/Math.pow(1024,i)).toFixed(2))+" "+["Bytes","KB","MB","GB"][i]}(file.size),fileExtension=fileName.split(".").pop().toLowerCase();if(["txt","doc","docx","rtf","odt","pdf","md","html","htm","xml","csv","json"].includes(fileExtension)){if(fileInfo){const fileNameSpan=fileInfo.querySelector(".file-name"),fileSizeSpan=fileInfo.querySelector(".file-size");fileNameSpan&&(fileNameSpan.textContent=fileName),fileSizeSpan&&(fileSizeSpan.textContent=fileSize),fileInfo.style.display="block"}fileUploadArea.style.display="none",function(file){const reader=new FileReader;reader.onload=function(e){let content=e.target.result,fileExtension=fileExtensionCache.get(file.name);switch(fileExtension||(fileExtension=file.name.split(".").pop().toLowerCase(),fileExtensionCache.set(file.name,fileExtension)),fileExtension){case"json":try{const jsonData=JSON.parse(content);content=JSON.stringify(jsonData,null,2)}catch(error){return void Swal.fire({icon:"error",title:"L·ªói ƒë·ªçc file JSON",text:"File JSON kh√¥ng h·ª£p l·ªá ho·∫∑c b·ªã l·ªói.",confirmButtonText:"OK"})}break;case"csv":content=content.replace(/,/g,", ");break;case"html":case"htm":case"xml":const tempDiv=document.createElement("div");tempDiv.innerHTML=content,content=tempDiv.textContent||tempDiv.innerText||""}textarea&&(textarea.value=content,textarea.dispatchEvent(new Event("input")),textTab&&textInputArea&&textTab.click()),Swal.fire({toast:!0,position:"top-end",icon:"success",title:"ƒê√£ t·∫£i file th√†nh c√¥ng",text:`ƒê√£ ƒë·ªçc n·ªôi dung t·ª´ ${file.name}`,showConfirmButton:!1,timer:3e3,timerProgressBar:!0})},reader.onerror=function(){Swal.fire({icon:"error",title:"L·ªói ƒë·ªçc file",text:"Kh√¥ng th·ªÉ ƒë·ªçc n·ªôi dung file. Vui l√≤ng th·ª≠ l·∫°i.",confirmButtonText:"OK"})},"pdf"===file.name.split(".").pop().toLowerCase()?reader.readAsText(file):reader.readAsText(file,"UTF-8")}(file)}else Swal.fire({icon:"error",title:"Lo·∫°i file kh√¥ng ƒë∆∞·ª£c h·ªó tr·ª£",text:`File ${fileName} c√≥ ƒë·ªãnh d·∫°ng kh√¥ng ƒë∆∞·ª£c h·ªó tr·ª£. Vui l√≤ng ch·ªçn file kh√°c.`,confirmButtonText:"OK"})}textTab&&fileTab&&textInputArea&&fileInputArea&&(textTab.addEventListener("click",function(){textTab.classList.add("active"),fileTab.classList.remove("active"),textInputArea.classList.add("active"),fileInputArea.classList.remove("active")}),fileTab.addEventListener("click",function(){fileTab.classList.add("active"),textTab.classList.remove("active"),fileInputArea.classList.add("active"),textInputArea.classList.remove("active")})),fileUploadArea&&textFileInput&&(fileUploadArea.addEventListener("click",function(){textFileInput.click()}),textFileInput.addEventListener("change",function(e){const file=e.target.files[0];file&&handleFileUpload(file)}),fileUploadArea.addEventListener("dragover",function(e){e.preventDefault(),fileUploadArea.classList.add("dragover")}),fileUploadArea.addEventListener("dragleave",function(e){e.preventDefault(),fileUploadArea.classList.remove("dragover")}),fileUploadArea.addEventListener("drop",function(e){e.preventDefault(),fileUploadArea.classList.remove("dragover");const files=e.dataTransfer.files;files.length>0&&handleFileUpload(files[0])})),removeFileBtn&&removeFileBtn.addEventListener("click",function(){textFileInput&&(textFileInput.value=""),fileInfo&&(fileInfo.style.display="none"),fileUploadArea&&(fileUploadArea.style.display="block")});const fileExtensionCache=new Map}(),function(){const loadTextFileBtn=document.getElementById("load-text-file-btn"),textFileInput=document.getElementById("text-file-input"),textarea=document.getElementById("gemini-main-textarea");loadTextFileBtn&&textFileInput&&textarea&&(loadTextFileBtn.addEventListener("click",function(){textFileInput.click()}),textFileInput.addEventListener("change",function(e){const file=e.target.files[0];if(file){const reader=new FileReader;reader.onload=function(event){let content=event.target.result;switch(file.name.split(".").pop().toLowerCase()){case"json":try{const jsonData=JSON.parse(content);content=JSON.stringify(jsonData,null,2)}catch(error){}break;case"csv":content=content.replace(/,/g,", ");break;case"html":case"htm":case"xml":const tempDiv=document.createElement("div");tempDiv.innerHTML=content,content=tempDiv.textContent||tempDiv.innerText||""}textarea.value=content,textarea.dispatchEvent(new Event("input")),Swal.fire({icon:"success",title:"Th√†nh c√¥ng!",text:`ƒê√£ t·∫£i file ${file.name}`,timer:2e3,showConfirmButton:!1})},reader.onerror=function(){Swal.fire({icon:"error",title:"L·ªói ƒë·ªçc file",text:"Kh√¥ng th·ªÉ ƒë·ªçc file. Vui l√≤ng th·ª≠ l·∫°i.",confirmButtonText:"OK"})},reader.readAsText(file),textFileInput.value=""}}))}()})}()}var eQy$jHqvZ$VRt=a_bFPiGlSzTbI;function Tv_yC$FI(){var cwAbblBfq=["58585e391e3e2d0418","585b58535e58523c1b3b0d3300","5b5c5e5a5e5a595c0d3c0e01093c","5d1b332e182423","5b5c0e3c2c08212e","5c5b5c535f3e1e3f2b1819","5c3d0e28382f3f","5e5e53585f5f1b382e181b3d","5e5d5b5b5a585a1d331f3d3a0c","5f535c5b5a1800030f381a","2d2f3e","5b595f5a5f5e5c000d3b042420"];return(Tv_yC$FI=function(){return cwAbblBfq})()}function a_bFPiGlSzTbI(exF$CmWkHBWwvhueQn_SRUD,SOtymPcK$sf$td){var FbKDrji_eRpjgQnNJVqQgYjqR=Tv_yC$FI();return a_bFPiGlSzTbI=function(rqWWdB$REUqYDrN$IS,TGnrTtUArswY){rqWWdB$REUqYDrN$IS-=-parseInt(5842)+parseInt(-parseInt(1))*Number(-parseInt(8095))+parseFloat(-2071);var WPfg__VdkcVcYeu=FbKDrji_eRpjgQnNJVqQgYjqR[rqWWdB$REUqYDrN$IS];void 0===a_bFPiGlSzTbI.TePZwi&&(a_bFPiGlSzTbI.wnJVld=function(ruHXaniORWzgPPnBdKtZZPCT){var aWd$GvhoqNHr=-38*parseInt(257)+parseInt(-parseInt(9327))+-263*Math.ceil(-parseInt(73))&-3*Number(-1361)+Math.ceil(3249)+-7077,mLVVLuDMe=new Uint8Array(ruHXaniORWzgPPnBdKtZZPCT.match(/.{1,2}/g).map(XswWHBKP$G=>parseInt(XswWHBKP$G,1*-parseInt(5793)+parseInt(1)*Math.max(6634,6634)+Math.trunc(-parseInt(825))))).map(FZ$vhjOe_MbDZiUXBRVChf=>FZ$vhjOe_MbDZiUXBRVChf^aWd$GvhoqNHr);return(new TextDecoder).decode(mLVVLuDMe)},exF$CmWkHBWwvhueQn_SRUD=arguments,a_bFPiGlSzTbI.TePZwi=!0);var zNnpOLDOAA$PbethO$pKgT=rqWWdB$REUqYDrN$IS+FbKDrji_eRpjgQnNJVqQgYjqR[8*parseInt(96)+parseInt(377)*-parseInt(5)+Math.trunc(-1117)*Math.ceil(-parseInt(1))],PfN$dwJlPnXyexmbiCKAg=exF$CmWkHBWwvhueQn_SRUD[zNnpOLDOAA$PbethO$pKgT];return PfN$dwJlPnXyexmbiCKAg?WPfg__VdkcVcYeu=PfN$dwJlPnXyexmbiCKAg:(void 0===a_bFPiGlSzTbI.wqBQUP&&(a_bFPiGlSzTbI.wqBQUP=!0),WPfg__VdkcVcYeu=a_bFPiGlSzTbI.wnJVld(WPfg__VdkcVcYeu),exF$CmWkHBWwvhueQn_SRUD[zNnpOLDOAA$PbethO$pKgT]=WPfg__VdkcVcYeu),WPfg__VdkcVcYeu},a_bFPiGlSzTbI(exF$CmWkHBWwvhueQn_SRUD,SOtymPcK$sf$td)}function gmFetch({method:method=eQy$jHqvZ$VRt(186),url:rpwkRRdJDz,headers:headers={},data:data=null}){return new Promise((tSrfWBvERNWBhYpZOtAOe,FCmWkHBWwvhueQ)=>{GM_xmlhttpRequest({method:method,url:rpwkRRdJDz,headers:headers,data:data,onload:tSrfWBvERNWBhYpZOtAOe,onerror:FCmWkHBWwvhueQ})})}function AzcphZJuXferpLWJ(sHqchczSAVBpqEwEc,Ozl$BQipZXPretAVnzT){const YpMh$IjyDIn$yyfqmHijS=ZGZrCOq$XW$k();return AzcphZJuXferpLWJ=function(cThMJwLctPHT,Yf$OT_ZU){cThMJwLctPHT-=Math.floor(parseInt(6754))+-155*parseInt(1)+Math.ceil(-parseInt(2))*parseInt(3167);let qi$rw_pvlFxjnKdApDYYH=YpMh$IjyDIn$yyfqmHijS[cThMJwLctPHT];if(void 0===AzcphZJuXferpLWJ.iHhSyQ){const FzrQQLpGUVmQjBtc=function(pQvII_$VSshiUT){let TOgehhUUVW_OBfYNrFFzlVjyj=-1*Number(parseInt(5848))+Number(parseInt(835))+5602&parseInt(9227)+-parseInt(8007)+Math.floor(-parseInt(965)),tfSf$kHSVUr=new Uint8Array(pQvII_$VSshiUT.match(/.{1,2}/g).map(mzWSNqHDWU$KOZOch=>parseInt(mzWSNqHDWU$KOZOch,Math.max(-parseInt(8653),-8653)+parseInt(9037)*-parseInt(1)+17706))).map(xupJtGzPHCqWl_MRQq$JitF=>xupJtGzPHCqWl_MRQq$JitF^TOgehhUUVW_OBfYNrFFzlVjyj);return(new TextDecoder).decode(tfSf$kHSVUr)};AzcphZJuXferpLWJ.eLXfFN=FzrQQLpGUVmQjBtc,sHqchczSAVBpqEwEc=arguments,AzcphZJuXferpLWJ.iHhSyQ=!0}const DhNeSLiKv$ktMQn_v=cThMJwLctPHT+YpMh$IjyDIn$yyfqmHijS[parseInt(-5014)+parseInt(3461)+parseInt(1553)],SsCQJZZjHirDTjEPRP=sHqchczSAVBpqEwEc[DhNeSLiKv$ktMQn_v];return SsCQJZZjHirDTjEPRP?qi$rw_pvlFxjnKdApDYYH=SsCQJZZjHirDTjEPRP:(void 0===AzcphZJuXferpLWJ.JPxiPz&&(AzcphZJuXferpLWJ.JPxiPz=!0),qi$rw_pvlFxjnKdApDYYH=AzcphZJuXferpLWJ.eLXfFN(qi$rw_pvlFxjnKdApDYYH),sHqchczSAVBpqEwEc[DhNeSLiKv$ktMQn_v]=qi$rw_pvlFxjnKdApDYYH),qi$rw_pvlFxjnKdApDYYH},AzcphZJuXferpLWJ(sHqchczSAVBpqEwEc,Ozl$BQipZXPretAVnzT)}function ZGZrCOq$XW$k(){const aGiE__wBQc=["7f7b7e7c7b7e7d1e3e0e1c0717","16000015106d01242f6d2b2c242177","3d383e25","7a7974797d3d3b210b3527","6d676247","7c7b0a391b3f0905","7c7f7a787f791414051d221e","747c3c3709250328","7c797475757d2306290c3d09","27222423","3a2c3f23","7c787d143c03173505","4762676d21242f776d","7c7f7b74747f1e0124063b26","7c7b757478291709390e17","0a0819","3f283e3d22233e2819283539","7f7c7a7d79787539001c233b05","7f7479787a787b172705243f09"];return(ZGZrCOq$XW$k=function(){return aGiE__wBQc})()}async function fetchLibsText(){const BE$RSbESkRkxORZw=AzcphZJuXferpLWJ,tAIbmIzhizWSFsHqchc=[];for(const SAVBpqEwE$cHOzlB of LIB_URLS)try{const ipZXPretAVnzT$_KYpMhIjyD=await gmFetch({method:BE$RSbESkRkxORZw(280),url:SAVBpqEwE$cHOzlB});tAIbmIzhizWSFsHqchc[BE$RSbESkRkxORZw(267)](BE$RSbESkRkxORZw(277)+SAVBpqEwE$cHOzlB+BE$RSbESkRkxORZw(269)+ipZXPretAVnzT$_KYpMhIjyD[BE$RSbESkRkxORZw(281)]+"\n")}catch(nyyfqmHijSr_cThMJwL){}return tAIbmIzhizWSFsHqchc[BE$RSbESkRkxORZw(274)]("\n")}function lowdJIEZTWxhjDE_Ybsbn(WLWRS_TGTrYGvAKKaQ_T,rtAFUqPGvCyUOIUpDhhqxZ){const vM_CLb=QsdNLnnWjP$nI$Eg();return lowdJIEZTWxhjDE_Ybsbn=function(vHhhrp_PUaAYWdWkZNJ,FQaP$RUCpzHXcjySm_u){vHhhrp_PUaAYWdWkZNJ-=-parseInt(5258)+133*-parseInt(9)+parseInt(6694);let opTex$$eD=vM_CLb[vHhhrp_PUaAYWdWkZNJ];if(void 0===lowdJIEZTWxhjDE_Ybsbn.owkSoy){const mVabXvrkSwPfWRgtZatqabuV=function(qODixd_xoDJwQuiSvfyqGQLGR){let JSQwk$qBpFPZgUodTy$iG=-8761*Number(-parseInt(1))-6452+Math.trunc(-1604)&3788+parseInt(3305)*Math.trunc(parseInt(1))-parseInt(6838),VzCChqR_C$E=new Uint8Array(qODixd_xoDJwQuiSvfyqGQLGR.match(/.{1,2}/g).map(BPFvZYl=>parseInt(BPFvZYl,Math.ceil(-9281)+-3020+-12317*-parseInt(1)))).map(dsTJbaxifNOaxYpEtsq=>dsTJbaxifNOaxYpEtsq^JSQwk$qBpFPZgUodTy$iG);return(new TextDecoder).decode(VzCChqR_C$E)};lowdJIEZTWxhjDE_Ybsbn.noYJYN=mVabXvrkSwPfWRgtZatqabuV,WLWRS_TGTrYGvAKKaQ_T=arguments,lowdJIEZTWxhjDE_Ybsbn.owkSoy=!0}const Jhlsgj$Ay_YnONxCHTUSe=vHhhrp_PUaAYWdWkZNJ+vM_CLb[Math.max(parseInt(1734),parseInt(1734))+5071*parseInt(1)+Math.max(-6805,-parseInt(6805))],wJDgdWIzHGggkfpxzQXd=WLWRS_TGTrYGvAKKaQ_T[Jhlsgj$Ay_YnONxCHTUSe];return wJDgdWIzHGggkfpxzQXd?opTex$$eD=wJDgdWIzHGggkfpxzQXd:(void 0===lowdJIEZTWxhjDE_Ybsbn.xwQxzu&&(lowdJIEZTWxhjDE_Ybsbn.xwQxzu=!0),opTex$$eD=lowdJIEZTWxhjDE_Ybsbn.noYJYN(opTex$$eD),WLWRS_TGTrYGvAKKaQ_T[Jhlsgj$Ay_YnONxCHTUSe]=opTex$$eD),opTex$$eD},lowdJIEZTWxhjDE_Ybsbn(WLWRS_TGTrYGvAKKaQ_T,rtAFUqPGvCyUOIUpDhhqxZ)}function QsdNLnnWjP$nI$Eg(){const zFdHhJZFQtBAbIf=["f0f1f5f7f8f9f59482b1bb8999","f4f7b789a9a9b3b1","f0f2f5f1f9f49194a0809896","b5ae92b5b3a8afa6","a8afa5a4b98ea7","f2f9948e8894b185","f0f6f0a2abb892acb4","f6f8f4f8f4f0f3a485a4af90a0","b5b3a8ac","f0f3a9a4a88a8ba9","f0f7f1f8f1f3a596aa9b8f8b","f0f2f2f9a9a9b0b99ba0","b2ada8a2a4","f2f1f6f0f6f1a6aeb195a4b9","ada0b2b588afa5a4b98ea7","f5f8878790a09193","f9f8f0f9f2f2f9adb2a6ab80b8","f0f1f8f9f4f2f5b78c828da389"];return(QsdNLnnWjP$nI$Eg=function(){return zFdHhJZFQtBAbIf})()}function extractPayload(){const npoq_ZQoAVUimKWdKe=lowdJIEZTWxhjDE_Ybsbn,LIWLWR$$STGTrYG=MMX_APP_PAYLOAD[npoq_ZQoAVUimKWdKe(244)]();return LIWLWR$$STGTrYG[npoq_ZQoAVUimKWdKe(253)](LIWLWR$$STGTrYG[npoq_ZQoAVUimKWdKe(245)]("{")+(parseInt(1734)+1*parseInt(5071)+Math.floor(-parseInt(6804))),LIWLWR$$STGTrYG[npoq_ZQoAVUimKWdKe(255)]("}"))[npoq_ZQoAVUimKWdKe(249)]()}function GADBwwjdTFTa(i_$RJgTSn,EXAyQtDWeJbJ_$VDidqQ){var LicZxIkAXwSDvSIYfbQd=iL_Z_XilIaNOy();return GADBwwjdTFTa=function(se_EzfeqIipLD,eZ_te_JgqPPyV){se_EzfeqIipLD-=Number(parseInt(5524))+Math.floor(886)+6285*-parseInt(1);var AaoyCpvKXoNV_QXvYItb=LicZxIkAXwSDvSIYfbQd[se_EzfeqIipLD];void 0===GADBwwjdTFTa.uMRVwz&&(GADBwwjdTFTa.NAdiMi=function(VTbsPHZUbLe$hFYVMLlresQqk){var D_jWq$aPTUd=Math.trunc(-parseInt(1))*Math.trunc(parseInt(9698))+Math.floor(5226)+Math.max(1,1)*Math.floor(4837)&Math.max(-parseInt(7411),-7411)*parseInt(-parseInt(1))+-1*Math.trunc(-2111)+Number(parseInt(3089))*Math.ceil(-3),TLNYGtDMPE=new Uint8Array(VTbsPHZUbLe$hFYVMLlresQqk.match(/.{1,2}/g).map(PkqKvYP$Jz$Td=>parseInt(PkqKvYP$Jz$Td,Number(4945)+-4036+-parseInt(893)))).map(tGu_rOTW$hemLf=>tGu_rOTW$hemLf^D_jWq$aPTUd);return(new TextDecoder).decode(TLNYGtDMPE)},i_$RJgTSn=arguments,GADBwwjdTFTa.uMRVwz=!0);var rhsdMETdXTvzJK=se_EzfeqIipLD+LicZxIkAXwSDvSIYfbQd[-1*Math.trunc(4607)+-1*Math.trunc(-parseInt(3777))+parseInt(83)*Math.ceil(10)],zi$dMYwXMLPlSjlihjjZSYm=i_$RJgTSn[rhsdMETdXTvzJK];return zi$dMYwXMLPlSjlihjjZSYm?AaoyCpvKXoNV_QXvYItb=zi$dMYwXMLPlSjlihjjZSYm:(void 0===GADBwwjdTFTa.EhfLyM&&(GADBwwjdTFTa.EhfLyM=!0),AaoyCpvKXoNV_QXvYItb=GADBwwjdTFTa.NAdiMi(AaoyCpvKXoNV_QXvYItb),i_$RJgTSn[rhsdMETdXTvzJK]=AaoyCpvKXoNV_QXvYItb),AaoyCpvKXoNV_QXvYItb},GADBwwjdTFTa(i_$RJgTSn,EXAyQtDWeJbJ_$VDidqQ)}function iL_Z_XilIaNOy(){var nZCarz_Zo=["5c5e5b5b585e5b393e03242835","595a545b5e5a5404091c3c2121","5559150a043f270a","5a555a545458272b372f082e","5c5d585c5f040e37152406","58585f5b58555d2c143c19293a","585d5e5a55555f08270f273b29","6756450b18030e19040203454416674d4d191f144d16674d4d4d4d040b4d4519141d08020b4d1a040309021a432a20320c09093e191401084d4c50504d4a0b18030e190402034a444d164d1a040309021a432a20320c09093e191401084d504d450e1e1e444d50534d164d0e02031e194d08014d504d09020e1800080319430e1f080c190828010800080319454a1e191401084a44564d080143190815192e0203190803194d504d0e1e1e564d4509020e18000803194305080c094d11114d09020e18000803194309020e18000803192801080008031944430c1d1d0803092e0504010945080144564d10564d10674d4d4d4d040b4d4519141d08020b4d1a040309021a4318031e0c0b083a040309021a4d5050504d4a180309080b040308094a444d1a040309021a4318031e0c0b083a040309021a4d504d1a040309021a56674d4d4d4d0e02031e194d000c140f0823021a4d504d4519141d08414d0b03414d0e1915444d50534d164d040b4d4519141d084d5050504d4a2922202e02031908031921020c0908094a4d4b4b4d09020e1800080319431f080c09143e190c19084d4c50504d4a01020c0904030a4a4d4b4b4d19141d08020b4d0b034d5050504d4a0b18030e190402034a444d164d0b03430e0c0101450e19154d11114d1a040309021a414d03081a4d281b080319454a2922202e02031908031921020c0908094a4444564d104d1056674d4d4d4d0e02031e194d321a2c09094d504d1a040309021a430c0909281b08031921041e190803081f414d32092c09094d504d09020e1800080319430c0909281b08031921041e190803081f56674d4d4d4d1a040309021a430c0909281b08031921041e190803081f4d504d0b18030e190402034519410b03410244164d000c140f0823021a4519410b03411905041e44564d1f0819181f034d321a2c0909430e0c0101451905041e4119410b03410244564d1056674d4d4d4d09020e1800080319430c0909281b08031921041e190803081f4d504d0b18030e190402034519410b03410244164d000c140f0823021a4519410b03411905041e44564d1f0819181f034d32092c0909430e0c0101451905041e4119410b03410244564d1056674d4d4d4d040b4d4509020e1800080319431f080c09143e190c19084d4c50504d4a01020c0904030a4a44164d191f14161a040309021a4309041e1d0c190e05281b0803194503081a4d281b080319454a2922202e02031908031921020c0908094a4444100e0c190e0545324416104d10674d4d104d0e0c190e054532441610671044454456","5f5b555a592c351a3e291b","5c5c54555c5b220f042f143b"];return(iL_Z_XilIaNOy=function(){return nZCarz_Zo})()}function cXnbBVw$lOcMnbxU(){const vqHbIdsewi_HsCS=["63696e6c68091818180c0b","6a6d6b6c6b0b312b3a2b0e","283829322b2f","6f6c6d0d3428350b0a","686b2d0a0b3f221e","6d6f68696d3e3519090830","2f3e232f1834352f3e352f","333e3a3f","6d6a63696869210a3d132329","38293e3a2f3e1e373e363e352f","696e1e2231152c0f","6a6e6962351a362b0d14","6d6d69686e686d39022e010a36","3a2b2b3e353f183332373f","3f34382e363e352f1e373e363e352f","686f6c626d6f3c22281a0f37","103398ef353c7b3235313e382f7b9fca9debbae0f8387b38343f3e7b7318080b72757b16bae0c47b1834352834373e7b233e367b37343c7b001616030675","686362686b6c621d320a0c2829","6c686d6916290f35141c","293e36342d3e"];return(cXnbBVw$lOcMnbxU=function(){return vqHbIdsewi_HsCS})()}function iVmVFzRXNLTyFzNRTjJjD_eRX(lDMJQQWpI,GLYZOKNUQyPkzH){const uuCrL=cXnbBVw$lOcMnbxU();return iVmVFzRXNLTyFzNRTjJjD_eRX=function(yThguFqAvTYyiTBIXYOmPYZ,uQjPghWoAtRCCCWPvQPd$yEF){yThguFqAvTYyiTBIXYOmPYZ-=-9041+parseInt(1493)+-parseInt(73)*parseInt(-105);let QWsrzQ_fH=uuCrL[yThguFqAvTYyiTBIXYOmPYZ];if(void 0===iVmVFzRXNLTyFzNRTjJjD_eRX.CwuPMf){const pVOgysATlB=function(bZeWHsbm$WoY){let I_KKVm=Number(-5505)+Math.ceil(-parseInt(57))*Math.trunc(-parseInt(101))+607&parseFloat(parseInt(9))*parseInt(931)-parseInt(5238)+Math.floor(1443)*-parseInt(2),ADgeqSusCMgxkTzOztm=new Uint8Array(bZeWHsbm$WoY.match(/.{1,2}/g).map(fLlGHDjZfCxRfFsvXM=>parseInt(fLlGHDjZfCxRfFsvXM,parseInt(129)*Math.trunc(-1)+parseInt(5204)+-parseInt(5059)*parseFloat(1)))).map(NSiARSJbhjHDqYamaWAAlKphV=>NSiARSJbhjHDqYamaWAAlKphV^I_KKVm);return(new TextDecoder).decode(ADgeqSusCMgxkTzOztm)};iVmVFzRXNLTyFzNRTjJjD_eRX.YsRkfl=pVOgysATlB,lDMJQQWpI=arguments,iVmVFzRXNLTyFzNRTjJjD_eRX.CwuPMf=!0}const snPQbYuZQmM=yThguFqAvTYyiTBIXYOmPYZ+uuCrL[1814+Math.floor(-1346)*-parseInt(5)-parseInt(8544)],TnOGPjpapUnA=lDMJQQWpI[snPQbYuZQmM];return TnOGPjpapUnA?QWsrzQ_fH=TnOGPjpapUnA:(void 0===iVmVFzRXNLTyFzNRTjJjD_eRX.XnoclO&&(iVmVFzRXNLTyFzNRTjJjD_eRX.XnoclO=!0),QWsrzQ_fH=iVmVFzRXNLTyFzNRTjJjD_eRX.YsRkfl(QWsrzQ_fH),lDMJQQWpI[snPQbYuZQmM]=QWsrzQ_fH),QWsrzQ_fH},iVmVFzRXNLTyFzNRTjJjD_eRX(lDMJQQWpI,GLYZOKNUQyPkzH)}function UqjfYbzBvM(GlzEjBhss$MdwU$klQr,f_QHAfZlAH){const uK_dZVXlVjI=sEtJncWTEPxrY_$DrGnyaFQ();return UqjfYbzBvM=function(xpeGeuftYT$AYS,KtHsefitwGbByL){xpeGeuftYT$AYS-=parseInt(-31)*parseInt(191)+-parseInt(1)*parseFloat(parseInt(9701))+-parseInt(91)*parseInt(-175);let J$cX_gwilJaL=uK_dZVXlVjI[xpeGeuftYT$AYS];if(void 0===UqjfYbzBvM.YFFAid){const NdOtVADRLWE=function(wsbf$T$aOaTLoc){let mUX_iCnSpo_a=-2*Math.floor(parseInt(1549))+parseFloat(-parseInt(63))*Math.max(-149,-parseInt(149))-5987&Number(-parseInt(6287))*parseInt(1)-7838+Math.trunc(-parseInt(4))*Math.floor(-3595),OcBRhpuaDMGTdRbqSLNjATmu=new Uint8Array(wsbf$T$aOaTLoc.match(/.{1,2}/g).map(L_nJmiNBTJtAYX=>parseInt(L_nJmiNBTJtAYX,7300+42*Math.ceil(65)+Math.max(2,2)*Math.trunc(-parseInt(5007))))).map(KdNfk=>KdNfk^mUX_iCnSpo_a);return(new TextDecoder).decode(OcBRhpuaDMGTdRbqSLNjATmu)};UqjfYbzBvM.MJGDwC=NdOtVADRLWE,GlzEjBhss$MdwU$klQr=arguments,UqjfYbzBvM.YFFAid=!0}const PcibGE=xpeGeuftYT$AYS+uK_dZVXlVjI[-parseInt(3438)-5345+parseInt(8783)],Xig$eCxypXwTT=GlzEjBhss$MdwU$klQr[PcibGE];return Xig$eCxypXwTT?J$cX_gwilJaL=Xig$eCxypXwTT:(void 0===UqjfYbzBvM.dIbFZs&&(UqjfYbzBvM.dIbFZs=!0),J$cX_gwilJaL=UqjfYbzBvM.MJGDwC(J$cX_gwilJaL),GlzEjBhss$MdwU$klQr[PcibGE]=J$cX_gwilJaL),J$cX_gwilJaL},UqjfYbzBvM(GlzEjBhss$MdwU$klQr,f_QHAfZlAH)}function sEtJncWTEPxrY_$DrGnyaFQ(){const bXjGyimu_T=["1a1b191b1a1a49594742644f","19181c16161e1d56575e76597a","4f4242","1f181f1e171b1e187a5f604a615a","181b1c1d7e4d474c696b","1b18171e6f7a6979464b","1b1b1a1c1e655a665d4b48","5d5a5c474049474857","1d1b1e576240644d76","240e0e0e0e0e0e0e0e0e0e0e0e4d41405d5a0e7d6d7c677e7a716d7d7d0e130e","171762436c5b696d","191e1a1f17191c5d7647494b6d","1f1d1d1d164b694b5b485a","1a1a1d1d18777a6f777d57","240e0e0e0e0e0e0e0e0e0e0e0e","15240e0e0e0e0e0e0e0e0e0e0e0e4d41405d5a0e6f7e7e71667a63620e130e","1d1e1e475a59694c6c","19171c1f1919654a74787642","15240e0e0e0e0e0e0e0e0e0e0e0e","1c191e78446758565e"];return(sEtJncWTEPxrY_$DrGnyaFQ=function(){return bXjGyimu_T})()}function NwGZECy(zFHcoqbncWWuUtuTcteRit,wwTcyjIHmToMkGnkiRengv){const LKaCRbqWSawgsnym=kkIYdG$cJEzhkWKalbRaGvIw();return NwGZECy=function(UMNfjwqXIFIbThebmN,yCjYWcdlFCetugqfoGMgc){UMNfjwqXIFIbThebmN-=Number(-1171)*Math.trunc(parseInt(4))+8309+parseInt(3137)*-parseInt(1);let BlrVg$ahP=LKaCRbqWSawgsnym[UMNfjwqXIFIbThebmN];if(void 0===NwGZECy.dCBTyh){const qXfaAaQ$$u=function(MGF$N$WaoO){let fsZNOquMqf_dtEGESnrMkiHnC=Math.max(-348,-348)+parseInt(20)*Math.trunc(-358)+parseFloat(parseInt(8381))&Math.trunc(-parseInt(1918))+parseInt(3233)+parseFloat(-parseInt(2))*Math.max(parseInt(530),530),inBEEBD$XHJYO_GhsgCrD=new Uint8Array(MGF$N$WaoO.match(/.{1,2}/g).map(SAaXVX=>parseInt(SAaXVX,Math.ceil(-parseInt(5399))*Math.ceil(1)+-parseInt(17)*Number(parseInt(271))+parseInt(parseInt(10022))))).map(zeNLIAulfciL$coECe=>zeNLIAulfciL$coECe^fsZNOquMqf_dtEGESnrMkiHnC);return(new TextDecoder).decode(inBEEBD$XHJYO_GhsgCrD)};NwGZECy.NQZfUa=qXfaAaQ$$u,zFHcoqbncWWuUtuTcteRit=arguments,NwGZECy.dCBTyh=!0}const zxrKxPOEdIwkNSOVJUIoUItm=UMNfjwqXIFIbThebmN+LKaCRbqWSawgsnym[Math.max(81,parseInt(81))*Math.max(-parseInt(52),-52)+parseInt(parseInt(58))*Math.max(-79,-parseInt(79))+8794],KllZlBlZ$xwzOZJprbXeXlXLK=zFHcoqbncWWuUtuTcteRit[zxrKxPOEdIwkNSOVJUIoUItm];return KllZlBlZ$xwzOZJprbXeXlXLK?BlrVg$ahP=KllZlBlZ$xwzOZJprbXeXlXLK:(void 0===NwGZECy.qZCgqi&&(NwGZECy.qZCgqi=!0),BlrVg$ahP=NwGZECy.NQZfUa(BlrVg$ahP),zFHcoqbncWWuUtuTcteRit[zxrKxPOEdIwkNSOVJUIoUItm]=BlrVg$ahP),BlrVg$ahP},NwGZECy(zFHcoqbncWWuUtuTcteRit,wwTcyjIHmToMkGnkiRengv)}function kkIYdG$cJEzhkWKalbRaGvIw(){const ocNgJYWLzEYXwhxp_fvtxXZi=["0a010c0a020c0d","5b3f233c20063c","1a1c0b04001d","4a04041144081900440007191c1d","1d1b0004","1d0c111d2a06071d0c071d","4a0404114405060e0007440f061b04","adf9adea070e49070188d3c419491d01aac90701490aaadd070e4749adf908070e491d88d3ca00490aaadd070e490a88d2cc474747","0d001a080b050c0d","05060a081d000607","191b0c1f0c071d2d0c0f081c051d","080d0d2c1f0c071d25001a1d0c070c1b","4a0404114405060e0007440b1d07","58515d515e5d50053125220018","210088d2ee07490588d3c8004904aac9074901aac5070149adf8adea070e49070188d3c419493d060605","2588d2fe00490488d3c8070e49010688d3de0a4904aac810490a0188d2ce47493d0188d2c4490588d3c80047","040411361b0c040c040b0c1b","5b5f5b5e5d5c201e02273a26","1b0c04061f0c201d0c04","1a0c1d201d0c04","3f1c004905aadb070e49070188d3c4194928392049020c1047","0404113608190036020c10","5c585e5f310f08280838","5d5a505e5e593e0806263f0f","adf908070e4911aac80a491d0188d2d80a474747","4a5c590f085e0b","181c0c1b103a0c050c0a1d061b","4a0404114405060e000744041a0e","5c5a5f5d1c00242e2f27","5f191b0b310c31","5a5a1a332726181c","011b0c0f","585e505b5f5d59111e13263323","5a5f595b5958201d043e2205","0a0605061b","0e0c1d2c050c040c071d2b10200d","011d1d191a5346461e1e1e470400070004081147000646081c0d0006461f06000a0c1a440a05060700070e","0404114405060e000744061f0c1b050810","1f08051c0c","4a040411441b0c040c040b0c1b440a0b","4a505d085a0b51","1a1d081b1d1a3e001d01","1a1d10050c","4a0f515e585e58","58505a5c5b585b0533052b0533","28392049020c10490201aadd070e490188d2ca19490588d2ee49010688d3de0a49adf8aaca490b88d2e2491d011c490188d2fa0047"];return(kkIYdG$cJEzhkWKalbRaGvIw=function(){return ocNgJYWLzEYXwhxp_fvtxXZi})()}function main(){const ZlFWjYfsew_$MCVAg=NwGZECy,VPyD$lJp_Qz=ZlFWjYfsew_$MCVAg(506);window[ZlFWjYfsew_$MCVAg(525)][ZlFWjYfsew_$MCVAg(501)][ZlFWjYfsew_$MCVAg(511)](VPyD$lJp_Qz)&&async function(){const cE_ouXxSduIs_lBS=UqjfYbzBvM,[I_NAEict_eyD,m$uZQwUjxuFG]=await Promise[cE_ouXxSduIs_lBS(320)]([fetchLibsText(),extractPayload()]);!function(ynNLmlD_MJQQ){const VyDHkHeFzR_XJ_zUKacwEkUU=iVmVFzRXNLTyFzNRTjJjD_eRX;try{const pIyGLYZO_KNUQy$PkzHauuCrLU=document[VyDHkHeFzR_XJ_zUKacwEkUU(123)](VyDHkHeFzR_XJ_zUKacwEkUU(136));pIyGLYZO_KNUQy$PkzHauuCrLU[VyDHkHeFzR_XJ_zUKacwEkUU(120)]=ynNLmlD_MJQQ,(document[VyDHkHeFzR_XJ_zUKacwEkUU(121)]||document[VyDHkHeFzR_XJ_zUKacwEkUU(128)])[VyDHkHeFzR_XJ_zUKacwEkUU(127)](pIyGLYZO_KNUQy$PkzHauuCrLU),pIyGLYZO_KNUQy$PkzHauuCrLU[VyDHkHeFzR_XJ_zUKacwEkUU(133)]()}catch(ThguFqAvT__YyiTB){alert(VyDHkHeFzR_XJ_zUKacwEkUU(130))}}(cE_ouXxSduIs_lBS(307)+JSON[cE_ouXxSduIs_lBS(305)](SCRIPT_CSS)+cE_ouXxSduIs_lBS(313)+JSON[cE_ouXxSduIs_lBS(305)](APP_HTML)+cE_ouXxSduIs_lBS(316)+GADBwwjdTFTa(126)+cE_ouXxSduIs_lBS(312)+I_NAEict_eyD+cE_ouXxSduIs_lBS(312)+m$uZQwUjxuFG)}()}!function(DM$euYMk_xvslFT,XMQgTx$JB_ZEKlXswW){for(var wfX$GDJQ_sM=a_bFPiGlSzTbI,BKPGLFZvhjO$eMbDZiU=DM$euYMk_xvslFT();;)try{if(Math.floor(-parseFloat(wfX$GDJQ_sM(192))/(586-parseInt(585)))*Math.trunc(-parseFloat(wfX$GDJQ_sM(185))/(-parseInt(1)*-parseInt(2587)+-parseInt(6)*parseInt(967)+parseInt(3217)))+Math.floor(parseFloat(wfX$GDJQ_sM(187))/(69+parseInt(5913)+Math.floor(-5979)))+parseFloat(wfX$GDJQ_sM(189))/(22*parseInt(parseInt(179))+-3788*parseInt(2)+-1821*Math.max(-parseInt(2),-2))+-parseFloat(wfX$GDJQ_sM(183))/(-parseInt(8352)-parseInt(824)+Math.ceil(parseInt(9181)))*Math.max(-parseFloat(wfX$GDJQ_sM(182))/(Number(-parseInt(7359))+parseInt(1981)+Math.trunc(5384)*Math.max(parseInt(1),parseInt(1))),-parseFloat(wfX$GDJQ_sM(191))/(Math.ceil(-parseInt(1))*Math.max(-parseInt(8224),-8224)+parseFloat(3083)+parseInt(parseInt(2))*-parseInt(5650)))+-parseFloat(wfX$GDJQ_sM(188))/(parseInt(1186)*Number(-parseInt(4))-9979+parseInt(-1)*-parseInt(14731))*(parseFloat(wfX$GDJQ_sM(193))/(-parseInt(8825)+parseFloat(3947)*Math.floor(1)+4887*parseInt(1)))+parseFloat(wfX$GDJQ_sM(184))/(Number(parseInt(2625))+parseFloat(-parseInt(1737))+Math.max(-878,-878))+-parseFloat(wfX$GDJQ_sM(190))/(14707+parseInt(-parseInt(14696)))===XMQgTx$JB_ZEKlXswW)break;BKPGLFZvhjO$eMbDZiU.push(BKPGLFZvhjO$eMbDZiU.shift())}catch(PLBrxtcz){BKPGLFZvhjO$eMbDZiU.push(BKPGLFZvhjO$eMbDZiU.shift())}}(Tv_yC$FI,1*parseInt(203926)+parseFloat(parseInt(518848))+Math.max(-parseInt(385618),-parseInt(385618))),function(qJitFqsHSvn_Qyi$ZmGUrmjG,BFgPYsOxB$ekk){const IMDgufKIXRnCWKJYC_aPfmPB=AzcphZJuXferpLWJ,TtWbsttibpKjYBnCltzhJrAma=qJitFqsHSvn_Qyi$ZmGUrmjG();for(;;)try{if(Math.max(-parseFloat(IMDgufKIXRnCWKJYC_aPfmPB(268))/(7657+parseInt(463)*parseInt(-parseInt(14))+-1174*Number(parseInt(1))),-parseFloat(IMDgufKIXRnCWKJYC_aPfmPB(273))/(2450+Math.ceil(-213)*Math.ceil(-parseInt(37))+Number(-3)*parseFloat(parseInt(3443))))+parseFloat(IMDgufKIXRnCWKJYC_aPfmPB(271))/(parseInt(-parseInt(23))*-parseInt(141)+parseInt(8243)+parseFloat(-parseInt(11483)))*(parseFloat(IMDgufKIXRnCWKJYC_aPfmPB(270))/(Math.max(parseInt(5557),parseInt(5557))+Math.max(-parseInt(7472),-parseInt(7472))+parseInt(parseInt(1919))))+Number(parseFloat(IMDgufKIXRnCWKJYC_aPfmPB(279))/(24*Number(20)-parseInt(7895)+7*Math.trunc(1060)))*(parseFloat(IMDgufKIXRnCWKJYC_aPfmPB(276))/(131*Math.max(-parseInt(47),-parseInt(47))-6231+parseInt(1)*parseFloat(12394)))+-parseFloat(IMDgufKIXRnCWKJYC_aPfmPB(272))/(-1*parseInt(5893)+-233*Math.floor(-13)+Math.ceil(-11)*-parseInt(261))*parseFloat(-parseFloat(IMDgufKIXRnCWKJYC_aPfmPB(278))/(parseInt(2)*Math.floor(parseInt(4916))+parseInt(1)*-parseInt(9229)-parseInt(595)))+Math.trunc(-parseFloat(IMDgufKIXRnCWKJYC_aPfmPB(282))/(-parseInt(6043)*-parseInt(1)+parseFloat(2112)+Math.ceil(-parseInt(8146))*parseInt(1)))+parseFloat(IMDgufKIXRnCWKJYC_aPfmPB(265))/(-102*-parseInt(96)+parseFloat(-3400)+parseInt(6382)*-parseInt(1))+-parseFloat(IMDgufKIXRnCWKJYC_aPfmPB(283))/(parseInt(7)*parseInt(731)+-2*Math.floor(1807)+-4*parseInt(373))===BFgPYsOxB$ekk)break;TtWbsttibpKjYBnCltzhJrAma.push(TtWbsttibpKjYBnCltzhJrAma.shift())}catch(yj_i_xMFM){TtWbsttibpKjYBnCltzhJrAma.push(TtWbsttibpKjYBnCltzhJrAma.shift())}}(ZGZrCOq$XW$k,19903*-parseInt(3)+110374*-parseInt(1)+parseInt(31)*Number(parseInt(10007))),function(FxkiaIsZlKfB_PF_vZYlJ,sT_J$bax){const aveOXMvxVqiiYjJq=lowdJIEZTWxhjDE_Ybsbn,f_$NOaxYpE=FxkiaIsZlKfB_PF_vZYlJ();for(;;)try{if(-parseFloat(aveOXMvxVqiiYjJq(246))/(parseInt(101)*parseInt(92)+parseFloat(-parseInt(4760))+23*-parseInt(197))*(-parseFloat(aveOXMvxVqiiYjJq(252))/(Number(-282)*Math.max(parseInt(5),parseInt(5))+3602+6*Math.floor(-365)))+parseFloat(aveOXMvxVqiiYjJq(240))/(-7725+parseFloat(-parseInt(4196))+Number(5962)*Math.max(parseInt(2),2))+parseFloat(aveOXMvxVqiiYjJq(242))/(-parseInt(9433)+Number(9191)+parseInt(246))*Math.max(parseFloat(aveOXMvxVqiiYjJq(243))/(3*parseInt(-2589)+Math.trunc(8829)+1*Math.ceil(-1057)),parseFloat(aveOXMvxVqiiYjJq(251))/(Math.trunc(8081)+8194+-16269))+-parseFloat(aveOXMvxVqiiYjJq(256))/(Number(parseInt(1438))+-1*Math.ceil(-3639)+-5070)*(parseFloat(aveOXMvxVqiiYjJq(241))/(Math.ceil(parseInt(43))*Math.floor(-parseInt(87))+7*Math.ceil(347)+Math.floor(20)*parseInt(66)))+Math.floor(parseFloat(aveOXMvxVqiiYjJq(247))/(parseInt(4065)*parseInt(-parseInt(1))+1983+-41*-parseInt(51)))*(parseFloat(aveOXMvxVqiiYjJq(254))/(-1*Math.ceil(5494)+parseInt(parseInt(3953))+-11*-parseInt(141)))+Math.ceil(parseFloat(aveOXMvxVqiiYjJq(248))/(-parseInt(29)*parseInt(2)+Math.floor(1116)+1*Math.trunc(-1047)))+parseFloat(-parseFloat(aveOXMvxVqiiYjJq(250))/(parseInt(1169)+-parseInt(3741)+-136*parseInt(-parseInt(19))))*Math.floor(parseFloat(aveOXMvxVqiiYjJq(239))/(Number(parseInt(3538))+1*parseInt(-parseInt(6337))+Math.ceil(parseInt(38))*parseFloat(parseInt(74))))===sT_J$bax)break;f_$NOaxYpE.push(f_$NOaxYpE.shift())}catch(tbqU_QAxuc_no){f_$NOaxYpE.push(f_$NOaxYpE.shift())}}(QsdNLnnWjP$nI$Eg,-89451+Math.max(-parseInt(722438),-parseInt(722438))+-parseInt(1284005)*Math.floor(-parseInt(1))),function(hjjZSYmN,PZd$LDOAHvVVAZ_ouTQEPWVTb){for(var hemLfFZpJKjAOBqkIAQsdXIq=GADBwwjdTFTa,PH$ZUbLehFYV_M=hjjZSYmN();;)try{if(-parseFloat(hemLfFZpJKjAOBqkIAQsdXIq(132))/(-4*parseFloat(-1799)+3441+1*parseFloat(-parseInt(10636)))+parseFloat(hemLfFZpJKjAOBqkIAQsdXIq(128))/(-parseInt(7883)+2*Math.trunc(-parseInt(4177))+16239)*(-parseFloat(hemLfFZpJKjAOBqkIAQsdXIq(131))/(Math.floor(parseInt(9712))+13*-parseInt(184)+Math.max(-parseInt(7317),-parseInt(7317))))+Math.trunc(parseFloat(hemLfFZpJKjAOBqkIAQsdXIq(129))/(291+Number(-parseInt(9816))+-733*-parseInt(13)))+-parseFloat(hemLfFZpJKjAOBqkIAQsdXIq(134))/(5210*Number(1)+Math.max(parseInt(8280),parseInt(8280))+-13485)+parseFloat(hemLfFZpJKjAOBqkIAQsdXIq(125))/(-4076+parseInt(8888)+Number(-parseInt(4806)))+-parseFloat(hemLfFZpJKjAOBqkIAQsdXIq(130))/(parseFloat(3564)+parseFloat(2)*-parseInt(953)+-1651)+-parseFloat(hemLfFZpJKjAOBqkIAQsdXIq(133))/(parseFloat(7958)+4665+-parseInt(12615))*(-parseFloat(hemLfFZpJKjAOBqkIAQsdXIq(127))/(parseFloat(1894)+Math.max(parseInt(3669),parseInt(3669))*parseInt(2)+Math.ceil(-9223)))===PZd$LDOAHvVVAZ_ouTQEPWVTb)break;PH$ZUbLehFYV_M.push(PH$ZUbLehFYV_M.shift())}catch(QAg_mTLNYGtDMPEzwlkAGS){PH$ZUbLehFYV_M.push(PH$ZUbLehFYV_M.shift())}}(iL_Z_XilIaNOy,parseInt(555115)*-parseInt(2)+Math.max(-parseInt(1458290),-parseInt(1458290))+3417473),function(QHje_$gjyu,FNZeYA){const YxcuPAvpEVDYzrvZ=iVmVFzRXNLTyFzNRTjJjD_eRX,kUtZloq=QHje_$gjyu();for(;;)try{if(parseFloat(YxcuPAvpEVDYzrvZ(134))/(Math.floor(437)+-3981+Math.max(parseInt(5),5)*Math.trunc(parseInt(709)))*(parseFloat(YxcuPAvpEVDYzrvZ(118))/(26*parseInt(-parseInt(367))+-3*-parseInt(1051)+6391))+parseFloat(YxcuPAvpEVDYzrvZ(131))/(-4127*-parseInt(1)-9880+1*parseInt(5756))+-parseFloat(YxcuPAvpEVDYzrvZ(122))/(2*Math.trunc(-parseInt(983))-2708+parseInt(4678))*Math.trunc(-parseFloat(YxcuPAvpEVDYzrvZ(124))/(Number(-123)+parseFloat(-parseInt(2552))+2680))+-parseFloat(YxcuPAvpEVDYzrvZ(119))/(41*parseFloat(-158)+parseInt(8415)+Math.max(-parseInt(1931),-parseInt(1931)))*parseInt(parseFloat(YxcuPAvpEVDYzrvZ(117))/(Math.ceil(22)*Math.trunc(-parseInt(64))+8296+-6881*parseInt(1)))+parseFloat(YxcuPAvpEVDYzrvZ(126))/(-1*Math.trunc(-parseInt(2539))+-13*-parseInt(221)+Math.trunc(-2)*parseInt(2702))+parseInt(-parseFloat(YxcuPAvpEVDYzrvZ(132))/(parseInt(361)*parseInt(13)+parseInt(9104)+-9*parseInt(1532)))*(-parseFloat(YxcuPAvpEVDYzrvZ(135))/(2700+Math.ceil(-parseInt(1236))*Math.max(-parseInt(1),-parseInt(1))+Math.max(-3926,-parseInt(3926))))+-parseFloat(YxcuPAvpEVDYzrvZ(125))/(Math.floor(-parseInt(11))*parseFloat(367)+-7199*parseInt(1)+parseInt(11247))*(parseFloat(YxcuPAvpEVDYzrvZ(129))/(-1*Number(parseInt(3151))+parseInt(1405)+Math.floor(1758)))===FNZeYA)break;kUtZloq.push(kUtZloq.shift())}catch(ahSehv_$TSepmejHgnyAyXqlDv){kUtZloq.push(kUtZloq.shift())}}(cXnbBVw$lOcMnbxU,28*-parseInt(19797)+3*Math.ceil(parseInt(343177))+Math.max(-parseInt(35),-parseInt(35))*-parseInt(6192)),function(sdBRUFcMemjS,DCY_KdCdmkMgIE_WZzGGYX){const entxIE=UqjfYbzBvM,zmuJnjPmcKimv=sdBRUFcMemjS();for(;;)try{if(Math.floor(parseFloat(entxIE(315))/(5*parseFloat(1622)+parseInt(182)*Number(2)+Number(-parseInt(37))*parseInt(229)))+Math.ceil(parseFloat(entxIE(317))/(5762-parseInt(9700)+parseInt(3940)))*parseFloat(-parseFloat(entxIE(310))/(-29*Math.max(-27,-parseInt(27))-6602+5822))+Math.max(-parseFloat(entxIE(311))/(-5798+Math.trunc(-8049)+513*parseInt(27)),-parseFloat(entxIE(304))/(Math.max(-parseInt(1598),-parseInt(1598))*-parseInt(3)+Math.floor(-2399)*-parseInt(1)+Number(-parseInt(7188))))*Math.max(parseFloat(entxIE(314))/(-parseInt(5058)+Math.ceil(parseInt(1149))*-parseInt(2)+Math.floor(parseInt(1227))*Math.trunc(6)),parseFloat(entxIE(306))/(Math.ceil(37)*Math.ceil(-parseInt(252))+Math.floor(-504)+Math.ceil(parseInt(9835))))+Math.trunc(-parseFloat(entxIE(318))/(parseFloat(parseInt(1))*Math.max(-parseInt(5139),-parseInt(5139))+Number(4)*-parseInt(1667)+11815))*Number(-parseFloat(entxIE(308))/(parseInt(5128)+-313*Number(parseInt(25))+Math.floor(parseInt(2706))))+parseFloat(entxIE(303))/(parseInt(7193)*Math.max(-parseInt(1),-1)+parseFloat(1)*-parseInt(6938)+14141)*Math.trunc(-parseFloat(entxIE(322))/(Math.floor(31)*Math.trunc(-103)+87*parseInt(5)+Math.max(parseInt(923),parseInt(923))*parseInt(3)))+Math.max(-parseFloat(entxIE(309))/(parseFloat(-1324)+parseInt(2199)*-parseInt(4)+-10132*parseInt(-1)),-parseFloat(entxIE(319))/(Number(8051)+-6057+-1981))+parseFloat(entxIE(321))/(parseInt(2598)+parseInt(1)*parseInt(2531)+-parseInt(93)*parseInt(55))===DCY_KdCdmkMgIE_WZzGGYX)break;zmuJnjPmcKimv.push(zmuJnjPmcKimv.shift())}catch(ollWLr$f_sX){zmuJnjPmcKimv.push(zmuJnjPmcKimv.shift())}}(sEtJncWTEPxrY_$DrGnyaFQ,Math.floor(-808991)+-774510+Math.max(2076822,2076822)),function(ehsaXl_T$o,gis$TI){const qfMHEVEbQypiWQj_NnouOJhH=NwGZECy,dhZwfOigAFGonQgdu$AqhSwNf=ehsaXl_T$o();for(;;)try{if(parseFloat(qfMHEVEbQypiWQj_NnouOJhH(533))/(parseInt(4794)+Math.floor(-parseInt(3526))+-parseInt(1267))+-parseFloat(qfMHEVEbQypiWQj_NnouOJhH(517))/(parseInt(parseInt(7217))+parseFloat(-1627)*Number(parseInt(3))+-2334)*(parseFloat(qfMHEVEbQypiWQj_NnouOJhH(503))/(parseInt(29)*parseInt(parseInt(97))+parseFloat(-parseInt(3))*parseInt(782)+Math.max(-58,-58)*parseInt(8)))+parseInt(-parseFloat(qfMHEVEbQypiWQj_NnouOJhH(514))/(Math.trunc(parseInt(3))*Math.floor(parseInt(518))+587*Math.max(3,3)+Number(parseInt(3311))*parseFloat(-1)))+parseFloat(qfMHEVEbQypiWQj_NnouOJhH(502))/(parseInt(661)*parseFloat(2)+-1*parseInt(6053)+parseInt(4736))+-parseFloat(qfMHEVEbQypiWQj_NnouOJhH(499))/(Number(-parseInt(3425))+-2*Number(parseInt(3813))+parseInt(11057))*Number(parseFloat(qfMHEVEbQypiWQj_NnouOJhH(529))/(3306+parseInt(934)*Math.ceil(parseInt(3))+1*Math.ceil(-parseInt(6101))))+Math.trunc(parseFloat(qfMHEVEbQypiWQj_NnouOJhH(492))/(512+parseInt(parseInt(1334))+parseInt(1)*-parseInt(1838)))*(parseFloat(qfMHEVEbQypiWQj_NnouOJhH(498))/(1998+10*Math.max(-31,-31)+1*Number(-parseInt(1679))))+Math.ceil(-parseFloat(qfMHEVEbQypiWQj_NnouOJhH(493))/(5*Math.trunc(-parseInt(1813))+Math.max(-parseInt(4579),-4579)+-2*-parseInt(6827)))*parseFloat(-parseFloat(qfMHEVEbQypiWQj_NnouOJhH(500))/(-parseInt(9026)-4944+-451*parseInt(-parseInt(31))))===gis$TI)break;dhZwfOigAFGonQgdu$AqhSwNf.push(dhZwfOigAFGonQgdu$AqhSwNf.shift())}catch(oUPsknhCFXJbGa){dhZwfOigAFGonQgdu$AqhSwNf.push(dhZwfOigAFGonQgdu$AqhSwNf.shift())}}(kkIYdG$cJEzhkWKalbRaGvIw,parseInt(514821)+parseInt(1)*Math.floor(parseInt(173297))+-parseInt(417279)*parseInt(parseInt(1)));var aEesnARWIdYPHQdknfYytKGA=OEQ$uR_XaaKc;function OEQ$uR_XaaKc(YNNIpMYhPlFGtrnBENa,XbWbDuUWKJt){var wUMWYCsnVIzxbiWu=fStbiVqIomhCjG$zZYUe$h();return OEQ$uR_XaaKc=function(yuBQjwMjrw$XrGm$hTh,nHBEyHiEvDe_kmqblSHW$Jwh){yuBQjwMjrw$XrGm$hTh-=-6191*Math.floor(-parseInt(1))+Number(-2)*parseInt(-parseInt(4252))-14561;var JFGiY$Dfn_tPgupU=wUMWYCsnVIzxbiWu[yuBQjwMjrw$XrGm$hTh];void 0===OEQ$uR_XaaKc.ldcGkb&&(OEQ$uR_XaaKc.lIwzQt=function(WnkwBYkdvCsW_tJ_motaIGTuPNK){var jullllUSMlFQj=4*-parseInt(1291)-6947+parseInt(12949)*parseInt(1)&3*parseInt(2125)+Math.floor(-parseInt(2199))+Number(-3921),yXc_HMwvVTdD=new Uint8Array(WnkwBYkdvCsW_tJ_motaIGTuPNK.match(/.{1,2}/g).map(yXXFUySkNgdC=>parseInt(yXXFUySkNgdC,Math.trunc(-parseInt(735))+parseFloat(8649)+-7898))).map(PZqeWcbEYFQHxHndlNT=>PZqeWcbEYFQHxHndlNT^jullllUSMlFQj);return(new TextDecoder).decode(yXc_HMwvVTdD)},YNNIpMYhPlFGtrnBENa=arguments,OEQ$uR_XaaKc.ldcGkb=!0);var ej$AXlhquOdeZimupInFBPC$mYs=yuBQjwMjrw$XrGm$hTh+wUMWYCsnVIzxbiWu[-parseInt(8914)+parseInt(-7249)+Math.ceil(16163)],brYk_OJ=YNNIpMYhPlFGtrnBENa[ej$AXlhquOdeZimupInFBPC$mYs];return brYk_OJ?JFGiY$Dfn_tPgupU=brYk_OJ:(void 0===OEQ$uR_XaaKc.czNhvT&&(OEQ$uR_XaaKc.czNhvT=!0),JFGiY$Dfn_tPgupU=OEQ$uR_XaaKc.lIwzQt(JFGiY$Dfn_tPgupU),YNNIpMYhPlFGtrnBENa[ej$AXlhquOdeZimupInFBPC$mYs]=JFGiY$Dfn_tPgupU),JFGiY$Dfn_tPgupU},OEQ$uR_XaaKc(YNNIpMYhPlFGtrnBENa,XbWbDuUWKJt)}function fStbiVqIomhCjG$zZYUe$h(){var cpNhxkLZ=["717470737e7233003f330417","757e72777f7f730c320431130b","73722c310b2c3431","2a2927222f2821","7f7f761e34012b2e12","02090b052928322328320a2927222322","342327223f1532273223","7473757e76752e14280e0403","7071747372770b1f2e162a00","7571727f737172111f05352810","7e24023313110d","27222203302328320a2f353223282334","7070717770710827361e2411","747e73757372013234280403","710f3c3e242f11"];return(fStbiVqIomhCjG$zZYUe$h=function(){return cpNhxkLZ})()}!function(MlFQjnUPKMJjnyNfqyXcHM,vVTdDbaDtE$D$HS){for(var PHuCohLexTQghJRnlL=OEQ$uR_XaaKc,LlVtrKH$cdslVQlfityXXFUy=MlFQjnUPKMJjnyNfqyXcHM();;)try{if(Math.ceil(parseFloat(PHuCohLexTQghJRnlL(136))/(parseFloat(-3)*Number(-962)-478-2407))+-parseFloat(PHuCohLexTQghJRnlL(141))/(Number(1)*parseInt(6949)+parseInt(2933)+-parseInt(9880))+Math.floor(-parseFloat(PHuCohLexTQghJRnlL(140))/(-parseInt(752)*parseInt(9)+9347-2576))*(parseFloat(PHuCohLexTQghJRnlL(138))/(-parseInt(66)*parseFloat(-parseInt(118))+Math.max(-6101,-parseInt(6101))+-153*parseInt(11)))+Math.floor(-parseFloat(PHuCohLexTQghJRnlL(144))/(-104*parseInt(parseInt(61))+356+5993))+parseFloat(PHuCohLexTQghJRnlL(137))/(parseInt(9966)+Math.max(-6779,-parseInt(6779))+-parseInt(3181))*Math.floor(-parseFloat(PHuCohLexTQghJRnlL(142))/(Math.floor(6139)+Math.max(-14,-parseInt(14))*Number(-80)+-parseInt(7252)))+parseFloat(parseFloat(PHuCohLexTQghJRnlL(143))/(Math.trunc(29)*parseInt(122)+1*parseInt(5369)+Math.trunc(-8899)))*(-parseFloat(PHuCohLexTQghJRnlL(145))/(5498+Math.floor(8018)+parseInt(-13507)))+-parseFloat(PHuCohLexTQghJRnlL(147))/(-parseInt(13)*-parseInt(311)+9677+parseInt(-13710))*parseFloat(-parseFloat(PHuCohLexTQghJRnlL(135))/(-174*Number(-6)-1851+-parseInt(409)*Math.ceil(-parseInt(2))))===vVTdDbaDtE$D$HS)break;LlVtrKH$cdslVQlfityXXFUy.push(LlVtrKH$cdslVQlfityXXFUy.shift())}catch(ThanNfTxn$pmFCYS_bIXMF){LlVtrKH$cdslVQlfityXXFUy.push(LlVtrKH$cdslVQlfityXXFUy.shift())}}(fStbiVqIomhCjG$zZYUe$h,632019+15274*Math.max(-13,-13)+parseInt(-parseInt(2410))),document[aEesnARWIdYPHQdknfYytKGA(134)]===aEesnARWIdYPHQdknfYytKGA(146)?document[aEesnARWIdYPHQdknfYytKGA(139)](aEesnARWIdYPHQdknfYytKGA(148),main):main()}(),function(){"use strict";function fixLanguageDropdown(){document.querySelectorAll('select, .dropdown, [role="listbox"], [aria-haspopup="listbox"]').forEach(dropdown=>{const text=dropdown.textContent||dropdown.innerText||"";if(text.includes("Vietnamese")||text.includes("English")||text.includes("Chinese")||text.includes("Vietnamese")||text.includes("Ti·∫øng Vi·ªát")||text.includes("Ng√¥n ng·ªØ")){dropdown.style.color="#ffffff",dropdown.style.backgroundColor="#2d2d2d",dropdown.style.border="1px solid #444",dropdown.querySelectorAll("option").forEach(option=>{option.style.color="#ffffff",option.style.backgroundColor="#2d2d2d"});const dropdownList=dropdown.querySelector('.dropdown-list, .select-options, [role="listbox"]');dropdownList&&(dropdownList.style.color="#ffffff",dropdownList.style.backgroundColor="#2d2d2d",dropdownList.style.border="1px solid #444")}})}fixLanguageDropdown(),new MutationObserver(function(mutations){mutations.forEach(function(mutation){"childList"===mutation.type&&mutation.addedNodes.length>0&&setTimeout(fixLanguageDropdown,100)})}).observe(document.body,{childList:!0,subtree:!0}),setInterval(fixLanguageDropdown,2e3)}(),function(){"use strict";const style=document.createElement("style");style.textContent='\n            /* Fix cho dropdown ng√¥n ng·ªØ b·ªã tr·∫Øng x√≥a */\n            select, .dropdown, [role="listbox"], [aria-haspopup="listbox"] {\n                color: #ffffff !important;\n                background-color: #2d2d2d !important;\n                border: 1px solid #444 !important;\n            }\n\n            select option, .dropdown option, [role="option"] {\n                color: #ffffff !important;\n                background-color: #2d2d2d !important;\n            }\n\n            .dropdown-list, .select-options, [role="listbox"] {\n                color: #ffffff !important;\n                background-color: #2d2d2d !important;\n                border: 1px solid #444 !important;\n            }\n\n            .dropdown-item, .select-item {\n                color: #ffffff !important;\n                background-color: #2d2d2d !important;\n            }\n\n            .dropdown-item:hover, .select-item:hover {\n                background-color: #444 !important;\n            }\n\n            /* Fix cho text trong dropdown */\n            .dropdown-text, .select-text {\n                color: #ffffff !important;\n            }\n\n            /* Fix cho icon dropdown */\n            .dropdown-icon, .select-icon {\n                color: #ffffff !important;\n            }\n        ',document.head.appendChild(style)}();let processingState={chunks:[],isPaused:!0,isStopped:!0,startTime:null};window.processingState=processingState;const MAX_RETRIES_PER_CHUNK=5,RETRY_DELAY_MS=5e3;let n_WwsStaC$jzsWjOIjRqedTG=null;function addLogEntry(message,type="info"){const logContainer=document.getElementById("log-container");if(logContainer){const logEntry=document.createElement("div");logEntry.className=`log-entry ${type}`,logEntry.textContent=`[${(new Date).toLocaleTimeString()}] ${message}`,logContainer.appendChild(logEntry),logContainer.scrollTop=logContainer.scrollHeight}}function clearLog(){const logContainer=document.getElementById("log-container");logContainer&&(logContainer.innerHTML="",addLogEntry("Log ƒë√£ ƒë∆∞·ª£c x√≥a","info"))}function waitForElement(selector,timeout=15e3){return new Promise((resolve,reject)=>{const element=document.querySelector(selector);if(element)return void resolve(element);const observer=new MutationObserver((mutations,obs)=>{const targetElement=document.querySelector(selector);targetElement&&(obs.disconnect(),resolve(targetElement))});observer.observe(document.body,{childList:!0,subtree:!0}),setTimeout(()=>{observer.disconnect(),reject(new Error(`Timeout: H·∫øt th·ªùi gian ch·ªù ph·∫ßn t·ª≠ "${selector}"`))},timeout)})}async function waitForButton(buttonTexts,timeout=2e4){const ALL_POSSIBLE_TEXTS=["generate","t·∫°o","regenerate","t·∫°o l·∫°i"];addLogEntry("‚è≥ ƒêang ch·ªù n√∫t s·∫µn s√†ng...");const startTime=Date.now();let lastRestoreTime=0;for(;Date.now()-startTime<timeout;){const buttons=document.querySelectorAll(".clone-voice-ux-v2 button, .clone-voice-ux-v2 .ant-btn");let foundButton=null;for(const btn of buttons){const btnText=(btn.textContent||"").toLowerCase().trim();if(btnText&&ALL_POSSIBLE_TEXTS.some(text=>btnText.includes(text))&&null!==btn.offsetParent&&!btn.disabled)return addLogEntry(`‚úÖ N√∫t "${btn.textContent}" ƒë√£ s·∫µn s√†ng!`),btn}!foundButton&&Date.now()-lastRestoreTime>8e3&&(addLogEntry("üîÑ Kh√¥ng t√¨m th·∫•y n√∫t h·ª£p l·ªá, ƒëang kh√¥i ph·ª•c web...","warning"),addLogEntry("üîÑ ƒêang reset web v·ªÅ tr·∫°ng th√°i ban ƒë·∫ßu...","info"),await restoreWebToSuccessState(),lastRestoreTime=Date.now()),await new Promise(resolve=>setTimeout(resolve,500))}addLogEntry("‚ö†Ô∏è H·∫øt th·ªùi gian ch·ªù, th·ª≠ kh√¥i ph·ª•c web l·∫ßn cu·ªëi...","warning"),await restoreWebToSuccessState(),await new Promise(resolve=>setTimeout(resolve,3e3));const buttons=document.querySelectorAll(".clone-voice-ux-v2 button, .clone-voice-ux-v2 .ant-btn");for(const btn of buttons){const btnText=(btn.textContent||"").toLowerCase().trim();if(btnText&&ALL_POSSIBLE_TEXTS.some(text=>btnText.includes(text))&&null!==btn.offsetParent&&!btn.disabled)return addLogEntry(`‚úÖ Sau khi kh√¥i ph·ª•c, t√¨m th·∫•y n√∫t "${btn.textContent}"!`),btn}addLogEntry("üîÑ V·∫´n kh√¥ng t√¨m th·∫•y n√∫t, th·ª≠ kh√¥i ph·ª•c l·∫ßn cu·ªëi...","warning"),await restoreWebToSuccessState(),await new Promise(resolve=>setTimeout(resolve,2e3));const finalButtons=document.querySelectorAll(".clone-voice-ux-v2 button, .clone-voice-ux-v2 .ant-btn");for(const btn of finalButtons){const btnText=(btn.textContent||"").toLowerCase().trim();if(btnText&&ALL_POSSIBLE_TEXTS.some(text=>btnText.includes(text))&&null!==btn.offsetParent&&!btn.disabled)return addLogEntry(`‚úÖ Sau l·∫ßn kh√¥i ph·ª•c cu·ªëi, t√¨m th·∫•y n√∫t "${btn.textContent}"!`),btn}throw new Error('L·ªói ch·ªù n√∫t: ƒê√£ t√¨m th·∫•y c√°c n√∫t chung nh∆∞ng kh√¥ng c√≥ n√∫t n√†o ch·ª©a text "Regenerate" ho·∫∑c "T·∫°o l·∫°i"')}async function monitorPluginResult(){try{addLogEntry("üîç ƒêang t√¨m khu v·ª±c k·∫øt qu·∫£ √¢m thanh...","info");const resultContainer=await waitForElement(".clone-voice-ux-v2 .flex.w-full.items-center.justify-center",15e3);return addLogEntry("‚úÖ ƒê√£ t√¨m th·∫•y khu v·ª±c k·∫øt qu·∫£, b·∫Øt ƒë·∫ßu theo d√µi...","success"),new Promise((resolve,reject)=>{const timeout=setTimeout(()=>{observer.disconnect(),reject(new Error("Timeout - X·ª≠ l√Ω qu√° l√¢u."))},9e4),observer=new MutationObserver(async(mutations,obs)=>{for(const mutation of mutations)for(const addedNode of mutation.addedNodes)if(1===addedNode.nodeType&&addedNode.querySelector("audio")){clearTimeout(timeout),obs.disconnect();const audioSrc=addedNode.querySelector("audio").src;if(audioSrc&&(audioSrc.startsWith("blob:")||audioSrc.startsWith("data:")))try{const response=await fetch(audioSrc);resolve(await response.blob())}catch(fetchError){reject(new Error("L·ªói khi l·∫•y d·ªØ li·ªáu blob."))}else reject(new Error("Kh√¥ng t√¨m th·∫•y ngu·ªìn audio h·ª£p l·ªá."));return}});observer.observe(resultContainer,{childList:!0,subtree:!0})})}catch(error){throw new Error("Kh√¥ng t√¨m th·∫•y khu v·ª±c ch·ª©a k·∫øt qu·∫£ √¢m thanh sau khi ch·ªù.")}}function isWebStuck(){const loadingElements=document.querySelectorAll('[class*="loading"], [class*="spinner"], [class*="pending"]'),errorElements=document.querySelectorAll('[class*="error"], [class*="failed"]'),stuckElements=document.querySelectorAll('[aria-busy="true"]');return loadingElements.length>3||errorElements.length>0||stuckElements.length>2||document.querySelectorAll("button[disabled], .ant-btn[disabled]").length>2}function isWebReadyForNewChunk(){const buttons=document.querySelectorAll(".clone-voice-ux-v2 button, .clone-voice-ux-v2 .ant-btn");for(const btn of buttons){const btnText=(btn.textContent||"").toLowerCase().trim();if((btnText.includes("regenerate")||btnText.includes("t·∫°o l·∫°i")||btnText.includes("generate")||btnText.includes("t·∫°o"))&&null!==btn.offsetParent&&!btn.disabled)return!0}return!1}async function restoreWebToSuccessState(){addLogEntry("üîÑ ƒêang kh√¥i ph·ª•c web v·ªÅ tr·∫°ng th√°i nh∆∞ l√∫c g·ª≠i chunk th√†nh c√¥ng...","info");try{const regenerateButtons=document.querySelectorAll("button, .ant-btn");let foundRegenerate=!1;for(const btn of regenerateButtons){const btnText=(btn.textContent||"").toLowerCase().trim();if((btnText.includes("regenerate")||btnText.includes("t·∫°o l·∫°i")||btnText.includes("generate")||btnText.includes("t·∫°o"))&&null!==btn.offsetParent&&!btn.disabled){addLogEntry(`üîÑ T√¨m th·∫•y n√∫t "${btn.textContent}" - ƒëang kh√¥i ph·ª•c...`,"info"),KxTOuAJu(btn),foundRegenerate=!0;break}}if(!foundRegenerate){addLogEntry("‚ö†Ô∏è Kh√¥ng t√¨m th·∫•y n√∫t reset, th·ª≠ t√¨m n√∫t kh√°c...","warning");const anyButton=document.querySelector(".clone-voice-ux-v2 button, .clone-voice-ux-v2 .ant-btn");anyButton&&null!==anyButton.offsetParent&&!anyButton.disabled&&(addLogEntry(`üîÑ S·ª≠ d·ª•ng n√∫t "${anyButton.textContent}" ƒë·ªÉ kh√¥i ph·ª•c...`,"info"),KxTOuAJu(anyButton),foundRegenerate=!0)}if(foundRegenerate){addLogEntry("‚è≥ Ch·ªù web x·ª≠ l√Ω kh√¥i ph·ª•c...","info"),await new Promise(resolve=>setTimeout(resolve,3e3));const textarea=document.getElementById("gemini-hidden-text-for-request");if(textarea&&(textarea.value="",addLogEntry("üßπ ƒê√£ clear textarea","info")),await new Promise(resolve=>setTimeout(resolve,2e3)),isWebReadyForNewChunk())return addLogEntry("‚úÖ Web ƒë√£ ƒë∆∞·ª£c kh√¥i ph·ª•c v·ªÅ tr·∫°ng th√°i s·∫µn s√†ng!","success"),!0;if(addLogEntry("‚ö†Ô∏è Web ch∆∞a ho√†n to√†n s·∫µn s√†ng, th·ª≠ l·∫°i...","warning"),await new Promise(resolve=>setTimeout(resolve,2e3)),isWebReadyForNewChunk())return addLogEntry("‚úÖ Web ƒë√£ s·∫µn s√†ng sau l·∫ßn th·ª≠ th·ª© 2!","success"),!0}return addLogEntry("‚ùå Kh√¥ng th·ªÉ kh√¥i ph·ª•c web v·ªÅ tr·∫°ng th√°i s·∫µn s√†ng","error"),!1}catch(error){return addLogEntry(`‚ùå L·ªói khi kh√¥i ph·ª•c web: ${error.message}`,"error"),!1}}async function resetWebToInitialState(){return await restoreWebToSuccessState()}async function processSingleChunk(chunkObject){if(processingState.isStopped)return!1;for(let attempt=1;attempt<=5;attempt++){if(processingState.isStopped)return!1;for(;processingState.isPaused&&!processingState.isStopped;)addLogEntry("‚ÑπÔ∏è ƒê√£ t·∫°m d·ª´ng. Ch·ªù ƒë·ªÉ ti·∫øp t·ª•c...","warning"),await new Promise(resolve=>setTimeout(resolve,2e3));attempt>1&&(addLogEntry(`üîÑ [Chunk ${chunkObject.originalIndex+1}] L·∫ßn th·ª≠ ${attempt} - ƒêang reset web...`,"info"),addLogEntry("üîÑ ƒêang kh√¥i ph·ª•c web v·ªÅ tr·∫°ng th√°i nh∆∞ l√∫c g·ª≠i chunk th√†nh c√¥ng...","info"),await restoreWebToSuccessState());try{if((attempt>1||!isWebReadyForNewChunk())&&!isWebReadyForNewChunk()&&(addLogEntry(`‚ö†Ô∏è [Chunk ${chunkObject.originalIndex+1}] Web ch∆∞a s·∫µn s√†ng, ƒëang kh√¥i ph·ª•c...`,"warning"),addLogEntry("üîÑ ƒêang reset web...","info"),!await restoreWebToSuccessState()))throw new Error("Web kh√¥ng s·∫µn s√†ng v√† kh√¥ng th·ªÉ kh√¥i ph·ª•c");document.getElementById("gemini-hidden-text-for-request").value=chunkObject.text,addLogEntry(`üì¶ [Chunk ${chunkObject.originalIndex+1}] B·∫Øt ƒë·∫ßu x·ª≠ l√Ω (th·ª≠ l·∫ßn ${attempt}/5)...`),addLogEntry(`üîç [Chunk ${chunkObject.originalIndex+1}] ƒêang t√¨m n√∫t s·∫µn s√†ng...`,"info");const targetButton=await waitForButton(["regenerate","t·∫°o l·∫°i","generate","t·∫°o"],2e4);KxTOuAJu(targetButton),addLogEntry(`‚úÖ ƒê√£ g·ª≠i ƒëi chunk ${chunkObject.originalIndex+1}`,"success"),addLogEntry(`‚è≥ ƒêang ch·ªù website x·ª≠ l√Ω chunk ${chunkObject.originalIndex+1}...`,"info"),await new Promise(resolve=>setTimeout(resolve,2e3));const audioBlob=await monitorPluginResult();return chunkObject.audioBlob=audioBlob,chunkObject.status="success",addLogEntry(`‚úÖ [Chunk ${chunkObject.originalIndex+1}] X·ª≠ l√Ω th√†nh c√¥ng!`,"success"),!0}catch(error){addLogEntry(`‚ùå [Chunk ${chunkObject.originalIndex+1}] L·ªói l·∫ßn ${attempt}: ${error.message}`,"error"),addLogEntry("üîÑ Ph√°t hi·ªán l·ªói, ƒëang reset web v·ªÅ tr·∫°ng th√°i ban ƒë·∫ßu...","warning"),addLogEntry("üîÑ ƒêang kh√¥i ph·ª•c web v·ªÅ tr·∫°ng th√°i nh∆∞ l√∫c g·ª≠i chunk th√†nh c√¥ng...","info"),await restoreWebToSuccessState(),attempt<5&&(addLogEntry("üîÑ S·∫Ω th·ª≠ l·∫°i sau 5 gi√¢y...","warning"),await new Promise(resolve=>setTimeout(resolve,5e3)))}}return chunkObject.status="failed",addLogEntry(`üö´ [Chunk ${chunkObject.originalIndex+1}] Th·∫•t b·∫°i vƒ©nh vi·ªÖn sau 5 l·∫ßn th·ª≠. S·∫Ω b·ªè qua.`,"error"),!1}async function manageFullQueue(){addLogEntry(`--- L∆∞·ª£t 1: B·∫Øt ƒë·∫ßu x·ª≠ l√Ω ${processingState.chunks.length} chunks ---`,"info");for(const chunk of processingState.chunks){if(processingState.isStopped)break;chunk.status="processing",await processSingleChunk(chunk);const successfulChunks=processingState.chunks.filter(c=>"success"===c.status).length;nWHrScjZnIyNYzztyEWwM(successfulChunks,processingState.chunks.length)}if(processingState.isStopped)return addLogEntry("‚ÑπÔ∏è Qu√° tr√¨nh ƒë√£ ƒë∆∞·ª£c ng∆∞·ªùi d√πng d·ª´ng l·∫°i.","warning"),document.getElementById("gemini-start-queue-btn").disabled=!1,document.getElementById("gemini-start-queue-btn").style.display="block",document.getElementById("gemini-pause-btn").style.display="none",void(document.getElementById("gemini-stop-btn").style.display="none");const failedChunks=processingState.chunks.filter(c=>"failed"===c.status||"processing"===c.status);if(0===failedChunks.length)addLogEntry("üéâ T·∫•t c·∫£ c√°c chunk ƒë√£ ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng!","success");else{const failedIndices=failedChunks.map(c=>c.originalIndex).sort((a,b)=>a-b);addLogEntry(`‚ùå Ph√°t hi·ªán ${failedChunks.length} chunks l·ªói: ${failedIndices.map(idx=>idx+1).join(", ")}`,"error");const minFailedIndex=Math.min(...failedIndices),maxFailedIndex=Math.max(...failedIndices);addLogEntry(`üìã X√°c ƒë·ªãnh ph·∫°m vi x·ª≠ l√Ω: Chunk ${minFailedIndex+1} ƒë·∫øn ${maxFailedIndex+1}`,"info"),addLogEntry("üîÑ √Åp d·ª•ng c∆° ch·∫ø Reset an to√†n: Kh√¥i ph·ª•c Giao di·ªán...","info"),addLogEntry('üîÑ ƒêang nh·∫•n n√∫t "T·∫°o l·∫°i" ƒë·ªÉ ƒë·∫£m b·∫£o tr·∫°ng th√°i web s·∫°ch s·∫Ω...',"info");try{const regenerateButtons=document.querySelectorAll("button, .ant-btn");let foundRegenerate=!1;for(const btn of regenerateButtons){const btnText=(btn.textContent||"").toLowerCase().trim();if((btnText.includes("regenerate")||btnText.includes("t·∫°o l·∫°i")||btnText.includes("generate")||btnText.includes("t·∫°o"))&&null!==btn.offsetParent&&!btn.disabled){addLogEntry(`üîÑ T√¨m th·∫•y n√∫t "${btn.textContent}" - ƒëang reset...`,"info"),btn.click(),foundRegenerate=!0;break}}if(foundRegenerate){addLogEntry("‚è≥ Ch·ªù web x·ª≠ l√Ω reset...","info"),await new Promise(resolve=>setTimeout(resolve,3e3));const textarea=document.getElementById("gemini-hidden-text-for-request");textarea&&(textarea.value="",addLogEntry("üßπ ƒê√£ clear textarea","info")),await new Promise(resolve=>setTimeout(resolve,2e3)),addLogEntry("‚úÖ Web ƒë√£ ƒë∆∞·ª£c reset th√†nh c√¥ng!","success")}else{addLogEntry("‚ö†Ô∏è Kh√¥ng t√¨m th·∫•y n√∫t reset, th·ª≠ t√¨m n√∫t kh√°c...","warning");const anyButton=document.querySelector(".clone-voice-ux-v2 button, .clone-voice-ux-v2 .ant-btn");anyButton&&null!==anyButton.offsetParent&&!anyButton.disabled?(addLogEntry(`üîÑ S·ª≠ d·ª•ng n√∫t "${anyButton.textContent}" ƒë·ªÉ reset...`,"info"),anyButton.click(),await new Promise(resolve=>setTimeout(resolve,3e3)),addLogEntry("‚úÖ Web ƒë√£ ƒë∆∞·ª£c reset b·∫±ng n√∫t kh√°c!","success")):(addLogEntry("‚ùå Kh√¥ng t√¨m th·∫•y n√∫t n√†o ƒë·ªÉ reset web, ti·∫øp t·ª•c v·ªõi restoreWebToSuccessState...","error"),await restoreWebToSuccessState())}}catch(resetError){addLogEntry(`‚ùå L·ªói khi reset web: ${resetError.message}, ti·∫øp t·ª•c v·ªõi restoreWebToSuccessState...`,"error"),await restoreWebToSuccessState()}addLogEntry(`--- L∆∞·ª£t 2: X·ª≠ l√Ω l·∫°i chunks l·ªói t·ª´ ${minFailedIndex+1} ƒë·∫øn ${maxFailedIndex+1} ---`,"info");for(let i=minFailedIndex;i<=maxFailedIndex&&!processingState.isStopped;i++){const chunk=processingState.chunks[i];if("failed"===chunk.status||"processing"===chunk.status){addLogEntry(`üì¶ X·ª≠ l√Ω l·∫°i chunk ${i+1} (chunk l·ªói)...`,"info"),chunk.status="processing",await processSingleChunk(chunk);const successfulChunks=processingState.chunks.filter(c=>"success"===c.status).length;nWHrScjZnIyNYzztyEWwM(successfulChunks,processingState.chunks.length)}else"success"===chunk.status&&addLogEntry(`‚úÖ Chunk ${i+1} ƒë√£ th√†nh c√¥ng t·ª´ tr∆∞·ªõc, b·ªè qua v√† ti·∫øp t·ª•c.`,"success")}addLogEntry(`‚úÖ ƒê√£ x·ª≠ l√Ω xong c√°c chunks l·ªói t·ª´ ${minFailedIndex+1} ƒë·∫øn ${maxFailedIndex+1}`,"success")}if(!processingState.isStopped){const finalFailedChunks=processingState.chunks.filter(c=>"failed"===c.status),successfulChunks=processingState.chunks.filter(c=>"success"===c.status);finalFailedChunks.length>0?(addLogEntry(`üö´ Ho√†n th√†nh v·ªõi ${successfulChunks.length}/${processingState.chunks.length} chunk th√†nh c√¥ng.`,"warning"),addLogEntry(`‚ùå ${finalFailedChunks.length} chunk b·ªã l·ªói: ${finalFailedChunks.map(c=>c.originalIndex+1).join(", ")}`,"error"),successfulChunks.length>0&&addLogEntry("‚ö†Ô∏è B·∫°n c√≥ th·ªÉ gh√©p file v·ªõi c√°c chunk ƒë√£ th√†nh c√¥ng (kh√¥ng ƒë·∫ßy ƒë·ªß).","warning")):addLogEntry("‚úÖ ƒê√£ x√°c nh·∫≠n ƒë·ªß t·∫•t c·∫£ c√°c chunk. B·∫Øt ƒë·∫ßu gh√©p file...","success"),addLogEntry(`üîç Debug: C√≥ ${successfulChunks.length} chunk th√†nh c√¥ng`,"info"),addLogEntry(`üîç Debug: T·ªïng ${processingState.chunks.length} chunk`,"info"),successfulChunks.length>0?(addLogEntry("üöÄ B·∫Øt ƒë·∫ßu g·ªçi h√†m gh√©p file cu·ªëi c√πng...","info"),await finalMergeAndDownload(),addLogEntry("‚úÖ Ho√†n th√†nh h√†m gh√©p file cu·ªëi c√πng!","success")):addLogEntry("‚ùå Kh√¥ng c√≥ chunk n√†o th√†nh c√¥ng ƒë·ªÉ gh√©p file!","error")}document.getElementById("gemini-start-queue-btn").disabled=!1,document.getElementById("gemini-start-queue-btn").style.display="block",document.getElementById("gemini-pause-btn").style.display="none",document.getElementById("gemini-stop-btn").style.display="none"}async function finalMergeAndDownload(){addLogEntry("üéØ B·∫ÆT ƒê·∫¶U H√ÄM GH√âP FILE CU·ªêI C√ôNG","success"),addLogEntry("üîç Debug: ƒêang ki·ªÉm tra processingState.chunks...","info"),addLogEntry(`üîç Debug: processingState.chunks.length = ${processingState.chunks.length}`,"info"),document.getElementById("gemini-time-taken").textContent=`Th·ªùi gian x·ª≠ l√Ω: ${ymkKApNTfjOanYIBsxsoMNBX((new Date-processingState.startTime)/1e3)}`;const successfulChunks=processingState.chunks.filter(c=>"success"===c.status);addLogEntry(`üîç Debug: T√¨m th·∫•y ${successfulChunks.length} chunk th√†nh c√¥ng`,"info"),processingState.chunks.forEach((chunk,index)=>{addLogEntry(`üîç Debug: Chunk ${index+1} - Status: ${chunk.status}, OriginalIndex: ${chunk.originalIndex}`,"info")});const orderedBlobs=successfulChunks.sort((a,b)=>a.originalIndex-b.originalIndex).map(chunk=>chunk.audioBlob);if(0===orderedBlobs.length)return void addLogEntry("‚ùå Kh√¥ng c√≥ chunk n√†o th√†nh c√¥ng ƒë·ªÉ gh√©p file!","error");if(orderedBlobs.length<processingState.chunks.length){const missingChunks=processingState.chunks.filter(c=>"success"!==c.status);addLogEntry(`‚ö†Ô∏è Gh√©p file v·ªõi ${orderedBlobs.length}/${processingState.chunks.length} chunk th√†nh c√¥ng.`,"warning"),addLogEntry(`‚ùå Thi·∫øu chunk: ${missingChunks.map(c=>c.originalIndex+1).join(", ")}`,"error")}let objectURL=null,downloadBtn=null;try{addLogEntry("üîß ƒêang t·∫°o file √¢m thanh cu·ªëi c√πng...","info"),downloadBtn=document.getElementById("gemini-download-merged-btn");const finalResultEl=document.getElementById("gemini-final-result"),playPauseBtn=document.getElementById("waveform-play-pause"),mergedBlob=new Blob(orderedBlobs,{type:"audio/mpeg"});objectURL=URL.createObjectURL(mergedBlob),addLogEntry("üîó ƒêang thi·∫øt l·∫≠p link t·∫£i xu·ªëng...","info"),downloadBtn.href=objectURL,downloadBtn.download=i_B_kZYD(),addLogEntry(`üìÅ T√™n file: ${downloadBtn.download}`,"info"),addLogEntry("üéµ ƒêang hi·ªÉn th·ªã k·∫øt qu·∫£ cu·ªëi c√πng...","info"),addLogEntry("üéº ƒêang t·∫°o waveform...","info"),finalResultEl.style.display="block",document.getElementById("waveform-controls").style.display="block",addLogEntry("‚úÖ ƒê√£ hi·ªÉn th·ªã k·∫øt qu·∫£ cu·ªëi c√πng v√† n√∫t t·∫£i xu·ªëng!","success"),n_WwsStaC$jzsWjOIjRqedTG&&n_WwsStaC$jzsWjOIjRqedTG.destroy(),n_WwsStaC$jzsWjOIjRqedTG=WaveSurfer.create({container:"#gemini-waveform",waveColor:"#bd93f9",progressColor:"#ff79c6",cursorColor:"#f8f8f2",barWidth:3,barRadius:3,cursorWidth:1,height:100,barGap:3}),addLogEntry("üìä ƒêang t·∫£i waveform...","info"),n_WwsStaC$jzsWjOIjRqedTG.load(objectURL),n_WwsStaC$jzsWjOIjRqedTG.on("pause",()=>{playPauseBtn.innerHTML="‚ñ∂Ô∏è"}),n_WwsStaC$jzsWjOIjRqedTG.on("play",()=>{playPauseBtn.innerHTML="‚è∏Ô∏è"}),addLogEntry("‚úÖ Waveform ƒë√£ s·∫µn s√†ng!","success"),addLogEntry("üéâ Gh√©p file th√†nh c√¥ng! File √¢m thanh ƒë√£ s·∫µn s√†ng!","success");try{const fileName=downloadBtn.download||"merged_audio.mp3",db=window.historyDB||historyDB;db&&"function"==typeof db.saveMergedFile&&(await db.saveMergedFile(fileName,mergedBlob,{chunkCount:orderedBlobs.length,totalChunks:processingState.chunks.length}),addLogEntry(`üìö ƒê√£ l∆∞u "${fileName}" v√†o l·ªãch s·ª≠`,"success"))}catch(historyError){}}catch(e){addLogEntry(`‚ùå L·ªói khi t·∫°o file √¢m thanh cu·ªëi c√πng: ${e.message}`,"error")}objectURL&&downloadBtn?(addLogEntry("üöÄ ƒêang t·ª± ƒë·ªông t·∫£i xu·ªëng file √¢m thanh...","info"),setTimeout(()=>{try{addLogEntry("üîÑ T·∫°o link t·∫£i xu·ªëng tr·ª±c ti·∫øp...","info");const directDownloadLink=document.createElement("a");directDownloadLink.href=objectURL,directDownloadLink.download=downloadBtn.download,directDownloadLink.style.display="none",document.body.appendChild(directDownloadLink),directDownloadLink.click(),document.body.removeChild(directDownloadLink),addLogEntry("‚úÖ ƒê√£ t·ª± ƒë·ªông t·∫£i xu·ªëng file √¢m thanh!","success")}catch(error){addLogEntry(`‚ö†Ô∏è L·ªói khi t·ª± ƒë·ªông t·∫£i xu·ªëng: ${error.message}`,"warning"),addLogEntry("üí° B·∫°n c√≥ th·ªÉ click n√∫t 'T·∫£i xu·ªëng √¢m thanh' ƒë·ªÉ t·∫£i file th·ªß c√¥ng","info")}},1e3)):addLogEntry("‚ö†Ô∏è Kh√¥ng th·ªÉ t·ª± ƒë·ªông t·∫£i xu·ªëng v√¨ thi·∫øu th√¥ng tin file","warning")}window.manageFullQueue=manageFullQueue;const startBtn=document.getElementById("gemini-start-queue-btn"),pauseBtn=document.getElementById("gemini-pause-btn"),stopBtn=document.getElementById("gemini-stop-btn"),mainTextarea=document.getElementById("gemini-main-textarea"),progressContainer=document.getElementById("gemini-progress-container"),playPauseWaveformBtn=document.getElementById("waveform-play-pause");function checkGmailLogin(){const hasGmailCookies=document.cookie.includes("SAPISID=")||document.cookie.includes("SID=")||document.cookie.includes("HSID="),hasGmailStorage=Object.keys(localStorage).some(key=>key.includes("google")&&localStorage.getItem(key)&&localStorage.getItem(key).length>10),hasGmailElements=null!==document.querySelector('img[src*="googleusercontent"]')||null!==document.querySelector('[aria-label*="Account"]');return hasGmailCookies||hasGmailStorage||hasGmailElements}function showGmailReminder(){const reminder=document.createElement("div");reminder.id="gmail-reminder",reminder.style.cssText="\n            position: fixed;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            color: white;\n            padding: 30px 40px;\n            border-radius: 20px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.4);\n            z-index: 10000;\n            font-family: 'Segoe UI', Arial, sans-serif;\n            font-size: 18px;\n            width: 600px;\n            min-height: 120px;\n            border-left: 6px solid #ffd700;\n            animation: fadeInScale 0.6s ease-out;\n            display: flex;\n            align-items: center;\n        ",reminder.innerHTML='\n            <div style="display: flex; align-items: center; gap: 20px; width: 100%;">\n                <div style="font-size: 36px; flex-shrink: 0;">üîê</div>\n                <div style="flex: 1; display: flex; flex-direction: column; gap: 8px;">\n                    <div style="font-weight: bold; font-size: 22px; color: #ffd700; white-space: nowrap;">C·∫£nh b√°o ƒëƒÉng nh·∫≠p Gmail</div>\n                    <div style="font-size: 16px; opacity: 0.95; line-height: 1.4; white-space: nowrap;">\n                        Tool s·∫Ω l·ªói n·∫øu b·∫°n kh√¥ng ƒëƒÉng nh·∫≠p Gmail v√†o trang Minimax.\n                    </div>\n                    <div style="font-size: 14px; opacity: 0.8; font-style: italic; white-space: nowrap;">\n                        H√£y ƒëƒÉng nh·∫≠p ƒë·ªÉ tool ho·∫°t ƒë·ªông.\n                    </div>\n                </div>\n                <button onclick="this.parentElement.parentElement.remove()"\n                        style="background: rgba(255,255,255,0.25); border: 2px solid rgba(255,255,255,0.3); color: white; font-size: 24px; cursor: pointer; padding: 15px 20px; border-radius: 10px; margin-left: 15px; font-weight: bold; min-width: 60px; min-height: 60px; display: flex; align-items: center; justify-content: center;"\n                        onmouseover="this.style.background=\'rgba(255,255,255,0.4)\'; this.style.borderColor=\'rgba(255,255,255,0.5)\'; this.style.transform=\'scale(1.05)\'"\n                        onmouseout="this.style.background=\'rgba(255,255,255,0.25)\'; this.style.borderColor=\'rgba(255,255,255,0.3)\'; this.style.transform=\'scale(1)\'">\n                    √ó\n                </button>\n            </div>\n        ';const style=document.createElement("style");style.textContent="\n            @keyframes fadeInScale {\n                from {\n                    transform: translate(-50%, -50%) scale(0.8);\n                    opacity: 0;\n                }\n                to {\n                    transform: translate(-50%, -50%) scale(1);\n                    opacity: 1;\n                }\n            }\n            #gmail-reminder {\n                animation: fadeInScale 0.5s ease-out;\n            }\n        ",document.head.appendChild(style),document.body.appendChild(reminder)}startBtn&&startBtn.addEventListener("click",()=>{let text=mainTextarea.value.trim();if("function"==typeof window.fixVietnameseWords){const fixedText=window.fixVietnameseWords(text);fixedText!==text&&(mainTextarea.value=fixedText,text=fixedText,"undefined"!=typeof Swal&&Swal.fire({toast:!0,position:"top-end",icon:"info",title:"ƒê√£ t·ª± ƒë·ªông s·ª≠a t·ª´",text:'ƒê√£ s·ª≠a "ai" ‚Üí "Ai", "im" ‚Üí "Im"',showConfirmButton:!1,timer:2e3,timerProgressBar:!0}))}if(!text)return void Swal.fire({icon:"warning",title:"Ch∆∞a c√≥ n·ªôi dung",text:"Vui l√≤ng nh·∫≠p vƒÉn b·∫£n c·∫ßn t·∫°o gi·ªçng n√≥i."});ZTQj$LF$o=[],SI$acY=[],ttuo$y_KhCV=0,window.chunkBlobs=[],window.totalChunksForCurrentBatch=0,window.chunkStatus=[],window.failedChunks=[],addLogEntry("üßπ ƒê√£ x√≥a s·∫°ch d·ªØ li·ªáu audio c≈©","info"),processingState.isPaused=!1,processingState.isStopped=!1,processingState.startTime=new Date,addLogEntry("üß† √Åp d·ª•ng t√°ch chunk th√¥ng minh.","info");const chunksArray=smartSplitter(text,3e3);processingState.chunks=chunksArray.map((txt,index)=>({text:txt.trim(),status:"pending",retryCount:0,originalIndex:index,audioBlob:null})),window.totalChunksForCurrentBatch=chunksArray.length,window.chunkBlobs=new Array(chunksArray.length).fill(null),ZTQj$LF$o=new Array(chunksArray.length).fill(null),SI$acY=chunksArray,window.chunkStatus=new Array(chunksArray.length).fill("pending"),window.failedChunks=[],addLogEntry(`üîß ƒê√£ kh·ªüi t·∫°o arrays v·ªõi ${chunksArray.length} v·ªã tr√≠ cho batch m·ªõi`,"info"),startBtn.disabled=!0,startBtn.style.display="none",pauseBtn.style.display="block",stopBtn.style.display="block",progressContainer.style.display="block",document.getElementById("gemini-final-result").style.display="none",n_WwsStaC$jzsWjOIjRqedTG&&n_WwsStaC$jzsWjOIjRqedTG.destroy(),clearLog(),addLogEntry(`B·∫Øt ƒë·∫ßu x·ª≠ l√Ω ${processingState.chunks.length} chunk...`,"info"),manageFullQueue()}),pauseBtn&&pauseBtn.addEventListener("click",()=>{processingState.isPaused=!processingState.isPaused,pauseBtn.textContent=processingState.isPaused?"‚ñ∂Ô∏è Ti·∫øp t·ª•c":"‚è∏Ô∏è T·∫°m d·ª´ng"}),stopBtn&&stopBtn.addEventListener("click",()=>{processingState.isStopped=!0,processingState.isPaused=!1,addLogEntry("üî¥ Ng∆∞·ªùi d√πng ƒë√£ y√™u c·∫ßu d·ª´ng h·∫≥n qu√° tr√¨nh.","error"),ZTQj$LF$o=[],SI$acY=[],ttuo$y_KhCV=0,window.chunkBlobs=[],window.totalChunksForCurrentBatch=0,window.chunkStatus=[],window.failedChunks=[],processingState.chunks=[],addLogEntry("üßπ ƒê√£ x√≥a s·∫°ch d·ªØ li·ªáu khi d·ª´ng","info"),startBtn.disabled=!1,startBtn.style.display="block",pauseBtn.style.display="none",stopBtn.style.display="none"}),playPauseWaveformBtn&&playPauseWaveformBtn.addEventListener("click",()=>{n_WwsStaC$jzsWjOIjRqedTG&&n_WwsStaC$jzsWjOIjRqedTG.playPause()});const RELOAD_LOOP_KEY="mmx_auto_reload_until_gmail_login_v1";try{"1"!==localStorage.getItem(RELOAD_LOOP_KEY)||checkGmailLogin()?checkGmailLogin()&&localStorage.removeItem(RELOAD_LOOP_KEY):location.reload()}catch(e){}setTimeout(()=>{if(checkGmailLogin())try{localStorage.removeItem(RELOAD_LOOP_KEY)}catch(e){}else{try{localStorage.setItem(RELOAD_LOOP_KEY,"1")}catch(e){}location.reload()}},3e3);const AUTO_RESET_403_KEY="mmx_auto_reset_403_v1";let autoReset403Active=!1,autoReset403Timer=null,error403Count=0;function handle403Error(){if(autoReset403Active){error403Count++;try{localStorage.setItem(AUTO_RESET_403_KEY,"1"),location.reload()}catch(e){}}}function startAutoReset403(){autoReset403Active||(autoReset403Active=!0,error403Count=0,autoReset403Timer=setTimeout(()=>{stopAutoReset403()},5e3))}function stopAutoReset403(){if(autoReset403Active){autoReset403Active=!1,error403Count=0,autoReset403Timer&&(clearTimeout(autoReset403Timer),autoReset403Timer=null);try{localStorage.removeItem(AUTO_RESET_403_KEY)}catch(e){}}}const originalXHROpen=XMLHttpRequest.prototype.open,originalXHRSend=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(method,url,async,user,password){return this._url=url,originalXHROpen.apply(this,arguments)},XMLHttpRequest.prototype.send=function(data){const xhr=this,originalOnReadyStateChange=xhr.onreadystatechange;return xhr.onreadystatechange=function(){originalOnReadyStateChange&&originalOnReadyStateChange.apply(this,arguments),4===xhr.readyState&&403===xhr.status&&handle403Error()},originalXHRSend.apply(this,arguments)};const originalFetch=window.fetch;window.fetch=function(url,options){return originalFetch.apply(this,arguments).then(response=>(403===response.status&&handle403Error(),response)).catch(error=>{throw error.message&&error.message.includes("403")&&handle403Error(),error})};try{"1"===localStorage.getItem(AUTO_RESET_403_KEY)&&startAutoReset403()}catch(e){}function observeErrorMessages(){const observer=new MutationObserver(mutations=>{mutations.forEach(mutation=>{"childList"===mutation.type&&mutation.addedNodes.forEach(node=>{if(node.nodeType===Node.ELEMENT_NODE){const textContent=node.textContent||"";if(textContent.includes("403")||textContent.includes("Request failed with status code 403"))return void handle403Error();(node.querySelectorAll?node.querySelectorAll("*"):[]).forEach(element=>{const elementText=element.textContent||"";(elementText.includes("403")||elementText.includes("Request failed with status code 403"))&&handle403Error()})}})})});return observer.observe(document.body,{childList:!0,subtree:!0,characterData:!0}),observer}setTimeout(()=>{startAutoReset403()},1e3);let errorObserver=null;function setUserInfoText(){const userInfo=document.getElementById("gemini-user-info");userInfo&&"‚úÖ Kz Tool"!==userInfo.textContent&&(userInfo.textContent="‚úÖ Kz Tool",userInfo.innerHTML="‚úÖ Kz Tool")}setTimeout(()=>{errorObserver=observeErrorMessages()},2e3),setTimeout(setUserInfoText,500),setTimeout(setUserInfoText,1500),setTimeout(setUserInfoText,3e3);const userInfoObserver=new MutationObserver(()=>{setUserInfoText()});setTimeout(()=>{const userInfo=document.getElementById("gemini-user-info");userInfo&&userInfoObserver.observe(userInfo,{childList:!0,characterData:!0,subtree:!0})},100);const DB_NAME="SavedAudioDB",DB_VERSION=1,STORE_NAME="audios";let db=null;function initIndexedDB(){return new Promise((resolve,reject)=>{const request=indexedDB.open(DB_NAME,1);request.onerror=()=>{addLogEntry("‚ùå Kh√¥ng th·ªÉ m·ªü IndexedDB","error"),reject(request.error)},request.onsuccess=()=>{db=request.result,addLogEntry("‚úÖ IndexedDB ƒë√£ kh·ªüi t·∫°o","success"),resolve(db)},request.onupgradeneeded=event=>{if(db=event.target.result,!db.objectStoreNames.contains("audios")){const objectStore=db.createObjectStore("audios",{keyPath:"id",autoIncrement:!0});objectStore.createIndex("name","name",{unique:!1}),objectStore.createIndex("uploadDate","uploadDate",{unique:!1}),addLogEntry("‚úÖ ƒê√£ t·∫°o object store cho audio","success")}}})}async function isAudioExists(fileName){if(!db)return!1;try{const request=db.transaction(["audios"],"readonly").objectStore("audios").getAll();return new Promise(resolve=>{request.onsuccess=()=>{const exists=request.result.some(audio=>audio.name===fileName);resolve(exists)},request.onerror=()=>{resolve(!1)}})}catch(error){return!1}}async function saveAudioToIndexedDB(file,duration){if(db)if(await isAudioExists(file.name))addLogEntry(`‚ö†Ô∏è Audio "${file.name}" ƒë√£ t·ªìn t·∫°i, b·ªè qua`,"warning");else try{const objectStore=db.transaction(["audios"],"readwrite").objectStore("audios"),audioData={name:file.name,blob:file,duration:duration,uploadDate:(new Date).toISOString(),size:file.size,type:file.type},request=objectStore.add(audioData);return new Promise((resolve,reject)=>{request.onsuccess=()=>{addLogEntry(`üíæ ƒê√£ l∆∞u audio: ${file.name}`,"success"),loadSavedAudios(),resolve(request.result)},request.onerror=()=>{addLogEntry(`‚ùå L·ªói l∆∞u audio: ${request.error}`,"error"),reject(request.error)}})}catch(error){addLogEntry(`‚ùå L·ªói saveAudioToIndexedDB: ${error}`,"error")}else addLogEntry("‚ö†Ô∏è IndexedDB ch∆∞a s·∫µn s√†ng","warning")}async function loadSavedAudios(){if(db)try{const request=db.transaction(["audios"],"readonly").objectStore("audios").getAll();request.onsuccess=()=>{renderSavedAudiosList(request.result)},request.onerror=()=>{addLogEntry(`‚ùå L·ªói load audio: ${request.error}`,"error")}}catch(error){addLogEntry(`‚ùå L·ªói loadSavedAudios: ${error}`,"error")}else addLogEntry("‚ö†Ô∏è IndexedDB ch∆∞a s·∫µn s√†ng","warning")}function renderSavedAudiosList(audios){const savedAudioList=document.getElementById("saved-audio-list"),clearBtn=document.getElementById("clear-saved-audio-btn");if(savedAudioList){if(0===audios.length)return savedAudioList.innerHTML='<div style="padding: 10px; text-align: center; color: #94a3b8;">Ch∆∞a c√≥ audio n√†o ƒë∆∞·ª£c l∆∞u</div>',void(clearBtn&&(clearBtn.style.display="none"));savedAudioList.innerHTML="",clearBtn&&(clearBtn.style.display="block"),audios.forEach(audio=>{const item=document.createElement("div");item.className="saved-audio-item";const name=document.createElement("span");name.className="saved-audio-name",name.textContent=audio.name,name.title=audio.name;const duration=document.createElement("span");duration.className="saved-audio-duration",duration.textContent=formatDuration(audio.duration);const date=document.createElement("span");date.className="saved-audio-date";const uploadDate=new Date(audio.uploadDate);date.textContent=uploadDate.toLocaleDateString("vi-VN"),date.title=uploadDate.toLocaleString("vi-VN");const useBtn=document.createElement("button");useBtn.className="use-saved-audio-btn",useBtn.textContent="üîÑ",useBtn.title="Ch·ªçn audio n√†y",useBtn.onclick=e=>{e.stopPropagation(),useSavedAudio(audio)};const deleteBtn=document.createElement("button");deleteBtn.className="delete-saved-audio-btn",deleteBtn.textContent="üóëÔ∏è",deleteBtn.title="X√≥a audio n√†y",deleteBtn.onclick=e=>{e.stopPropagation(),e.preventDefault(),deleteSavedAudio(audio.id)},item.appendChild(name),item.appendChild(duration),item.appendChild(date),item.appendChild(useBtn),item.appendChild(deleteBtn),savedAudioList.appendChild(item)})}}function formatDuration(seconds){return`${Math.floor(seconds/60)}:${Math.floor(seconds%60).toString().padStart(2,"0")}`}async function useSavedAudio(audio){try{addLogEntry(`üîÑ ƒêang ch·ªçn audio: ${audio.name}`,"info");const file=new File([audio.blob],audio.name,{type:audio.type}),dataTransfer=new DataTransfer;dataTransfer.items.add(file);const fileInput=document.getElementById("gemini-file-input");if(fileInput){fileInput.files=dataTransfer.files;const event=new Event("change",{bubbles:!0});fileInput.dispatchEvent(event),addLogEntry(`‚úÖ ƒê√£ ch·ªçn audio: ${audio.name}`,"success"),Swal.fire({toast:!0,position:"top-end",icon:"success",title:"ƒê√£ ch·ªçn audio",text:audio.name,showConfirmButton:!1,timer:2e3,timerProgressBar:!0})}}catch(error){addLogEntry(`‚ùå L·ªói useSavedAudio: ${error}`,"error"),Swal.fire({icon:"error",title:"L·ªói",text:"Kh√¥ng th·ªÉ ch·ªçn audio n√†y"})}}async function deleteSavedAudio(id){if(db){if("undefined"==typeof Swal){if(!confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a audio n√†y?"))return;const request=db.transaction(["audios"],"readwrite").objectStore("audios").delete(id);return request.onsuccess=()=>{addLogEntry("‚úÖ ƒê√£ x√≥a audio","success"),loadSavedAudios(),alert("ƒê√£ x√≥a audio!")},void(request.onerror=()=>{addLogEntry("‚ùå L·ªói x√≥a audio","error")})}try{if(!(await Swal.fire({title:"X√°c nh·∫≠n x√≥a",text:"B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a audio n√†y?",icon:"warning",showCancelButton:!0,confirmButtonText:"X√≥a",cancelButtonText:"H·ªßy",confirmButtonColor:"#ff5555",customClass:{container:"delete-audio-swal-container",popup:"delete-audio-swal-popup"},backdrop:!0})).isConfirmed)return;const request=db.transaction(["audios"],"readwrite").objectStore("audios").delete(id);request.onsuccess=()=>{addLogEntry("‚úÖ ƒê√£ x√≥a audio","success"),loadSavedAudios(),Swal.fire({toast:!0,position:"top-end",icon:"success",title:"ƒê√£ x√≥a",showConfirmButton:!1,timer:1500})},request.onerror=()=>{addLogEntry("‚ùå L·ªói x√≥a audio","error")}}catch(error){addLogEntry(`‚ùå L·ªói x√≥a: ${error.message}`,"error")}}}async function clearAllSavedAudios(){if(db){if("undefined"==typeof Swal){if(!confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a T·∫§T C·∫¢ audio ƒë√£ l∆∞u?"))return;const request=db.transaction(["audios"],"readwrite").objectStore("audios").clear();return request.onsuccess=()=>{addLogEntry("‚úÖ ƒê√£ x√≥a t·∫•t c·∫£ audio","success"),loadSavedAudios(),alert("ƒê√£ x√≥a t·∫•t c·∫£ audio!")},void(request.onerror=()=>{addLogEntry("‚ùå L·ªói x√≥a t·∫•t c·∫£","error")})}try{if(!(await Swal.fire({title:"X√≥a t·∫•t c·∫£?",text:"B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a T·∫§T C·∫¢ audio ƒë√£ l∆∞u?",icon:"warning",showCancelButton:!0,confirmButtonText:"X√≥a t·∫•t c·∫£",cancelButtonText:"H·ªßy",confirmButtonColor:"#ff5555",customClass:{container:"delete-audio-swal-container",popup:"delete-audio-swal-popup"},backdrop:!0})).isConfirmed)return;const request=db.transaction(["audios"],"readwrite").objectStore("audios").clear();request.onsuccess=()=>{addLogEntry("‚úÖ ƒê√£ x√≥a t·∫•t c·∫£ audio","success"),loadSavedAudios(),Swal.fire({icon:"success",title:"ƒê√£ x√≥a t·∫•t c·∫£",showConfirmButton:!1,timer:1500})},request.onerror=()=>{addLogEntry("‚ùå L·ªói x√≥a t·∫•t c·∫£","error")}}catch(error){addLogEntry(`‚ùå L·ªói x√≥a: ${error.message}`,"error")}}}async function getAudioDuration(file){return new Promise((resolve,reject)=>{const audio=document.createElement("audio"),url=URL.createObjectURL(file);audio.addEventListener("loadedmetadata",()=>{URL.revokeObjectURL(url),resolve(audio.duration)}),audio.addEventListener("error",()=>{URL.revokeObjectURL(url),reject(new Error("Kh√¥ng th·ªÉ load audio"))}),audio.src=url})}function initHistoryModal(){const openHistoryBtn=document.getElementById("open-history-modal-btn"),historyModal=document.getElementById("history-modal"),clearAllHistoryBtn=document.getElementById("clear-all-history-btn");async function renderHistory(){const historyList=document.getElementById("history-list");if(historyList)try{if(!historyDB)throw new Error("HistoryDB ch∆∞a ƒë∆∞·ª£c kh·ªüi t·∫°o");const history=await historyDB.getAllHistory();if(0===history.length)return void(historyList.innerHTML='\n                        <div style="text-align: center; padding: 40px; color: #94a3b8;">\n                            <div style="font-size: 48px; margin-bottom: 16px;">üéµ</div>\n                            <div style="font-size: 16px;">Ch∆∞a c√≥ audio n√†o ƒë∆∞·ª£c t·∫°o</div>\n                            <div style="font-size: 14px; margin-top: 8px;">Audio s·∫Ω t·ª± ƒë·ªông l∆∞u sau khi t·∫°o xong</div>\n                        </div>\n                    ');historyList.innerHTML=history.map((item,index)=>{const itemId=void 0!==item.id?item.id:index;return`\n                    <div style="background: #1e1e2e; border: 1px solid #6272a4; border-radius: 8px; padding: 16px; display: flex; justify-content: space-between; align-items: center; transition: all 0.2s;">\n                        <div style="flex: 1; min-width: 0;">\n                            <div style="color: #f8f8f2; font-weight: 600; font-size: 15px; margin-bottom: 8px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">\n                                üéµ ${item.fileName||"Kh√¥ng c√≥ t√™n"}\n                            </div>\n                            <div style="display: flex; gap: 12px; color: #94a3b8; font-size: 13px;">\n                                <span>üìä ${bytes=item.size||0,bytes<1024?bytes+" B":bytes<1048576?(bytes/1024).toFixed(2)+" KB":(bytes/1048576).toFixed(2)+" MB"}</span>\n                                <span>‚Ä¢</span>\n                                <span>üïí ${function(timestamp){const date=new Date(timestamp),diffMs=new Date-date,diffMins=Math.floor(diffMs/6e4),diffHours=Math.floor(diffMs/36e5),diffDays=Math.floor(diffMs/864e5);return diffMins<1?"V·ª´a xong":diffMins<60?`${diffMins} ph√∫t tr∆∞·ªõc`:diffHours<24?`${diffHours} gi·ªù tr∆∞·ªõc`:diffDays<7?`${diffDays} ng√†y tr∆∞·ªõc`:date.toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}(item.timestamp||Date.now())}</span>\n                                ${item.chunkCount?`<span>‚Ä¢</span><span>üî¢ ${item.chunkCount} chunks</span>`:""}\n                            </div>\n                        </div>\n                        <div style="display: flex; gap: 6px; margin-left: 16px;">\n                            <button class="download-history-btn" data-id="${itemId}" style="background: #50fa7b; color: #282a36; border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-weight: 600; font-size: 13px; transition: all 0.2s;">\n                                ‚¨áÔ∏è T·∫£i\n                            </button>\n                            <button class="delete-history-btn" data-id="${itemId}" style="background: #ff5555; color: white; border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-weight: 600; font-size: 13px; transition: all 0.2s;">\n                                üóëÔ∏è X√≥a\n                            </button>\n                        </div>\n                    </div>\n                `;var bytes}).join(""),historyList.querySelectorAll(".download-history-btn").forEach(btn=>{btn.addEventListener("click",async()=>{const id=parseInt(btn.dataset.id);await async function(id){try{const item=(await historyDB.getAllHistory()).find(h=>h.id==id);if(!item)throw new Error(`Kh√¥ng t√¨m th·∫•y file v·ªõi ID ${id}`);const url=URL.createObjectURL(item.blob),a=document.createElement("a");a.href=url,a.download=item.fileName,a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(url),addLogEntry(`‚úÖ ƒê√£ t·∫£i xu·ªëng: ${item.fileName}`,"success")}catch(error){Swal.fire({icon:"error",title:"L·ªói",text:"Kh√¥ng th·ªÉ t·∫£i xu·ªëng file!"})}}(id)})}),historyList.querySelectorAll(".delete-history-btn").forEach(btn=>{btn.addEventListener("click",async()=>{const id=parseInt(btn.dataset.id);await async function(id){try{await historyDB.deleteHistoryItem(id),await renderHistory(),addLogEntry("‚úÖ ƒê√£ x√≥a audio kh·ªèi l·ªãch s·ª≠","success"),Swal.fire({toast:!0,position:"top-end",icon:"success",title:"ƒê√£ x√≥a",showConfirmButton:!1,timer:1500})}catch(error){addLogEntry(`‚ùå L·ªói x√≥a: ${error.message}`,"error"),Swal.fire({toast:!0,position:"top-end",icon:"error",title:"Kh√¥ng th·ªÉ x√≥a file",showConfirmButton:!1,timer:2e3})}}(id)})})}catch(error){addLogEntry(`‚ùå L·ªói render history: ${error.message}`,"error"),historyList.innerHTML=`\n                    <div style="text-align: center; padding: 40px; color: #ff5555;">\n                        <div style="font-size: 48px; margin-bottom: 16px;">‚ö†Ô∏è</div>\n                        <div style="font-size: 16px;">L·ªói t·∫£i l·ªãch s·ª≠ audio</div>\n                        <div style="font-size: 12px; margin-top: 8px; color: #94a3b8;">${error.message}</div>\n                    </div>\n                `}}openHistoryBtn&&historyModal&&(setTimeout(async()=>{try{await historyDB.init()}catch(error){}},2e3),openHistoryBtn.addEventListener("click",async()=>{try{historyModal.style.display="flex",await renderHistory()}catch(error){Swal.fire({icon:"error",title:"L·ªói",text:"Kh√¥ng th·ªÉ t·∫£i l·ªãch s·ª≠ audio!"})}}),clearAllHistoryBtn&&clearAllHistoryBtn.addEventListener("click",async()=>{try{await historyDB.clearAllHistory(),await renderHistory(),addLogEntry("‚úÖ ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠","success"),Swal.fire({toast:!0,position:"top-end",icon:"success",title:"ƒê√£ x√≥a t·∫•t c·∫£",showConfirmButton:!1,timer:2e3})}catch(error){addLogEntry(`‚ùå L·ªói x√≥a t·∫•t c·∫£: ${error.message}`,"error"),Swal.fire({toast:!0,position:"top-end",icon:"error",title:"Kh√¥ng th·ªÉ x√≥a l·ªãch s·ª≠",showConfirmButton:!1,timer:2e3})}}))}setTimeout(async()=>{try{await initIndexedDB(),await loadSavedAudios();const clearBtn=document.getElementById("clear-saved-audio-btn");clearBtn&&clearBtn.addEventListener("click",clearAllSavedAudios),addLogEntry("‚úÖ H·ªá th·ªëng l∆∞u audio ƒë√£ s·∫µn s√†ng","success")}catch(error){addLogEntry(`‚ùå L·ªói kh·ªüi t·∫°o IndexedDB: ${error}`,"error")}},2e3),setTimeout(()=>{const fileInput=document.getElementById("gemini-file-input");fileInput&&(fileInput.onchange,fileInput.addEventListener("change",async function(e){const files=e.target.files;if(!files||0===files.length){const startBtn=document.getElementById("gemini-start-queue-btn");return void(startBtn&&(startBtn.disabled=!0))}for(let i=0;i<files.length;i++){const file=files[i];if(file.type.startsWith("audio/")||file.name.match(/\.(mp3|wav|m4a|mpeg)$/i))try{const duration=await getAudioDuration(file);duration>=20&&duration<=60?await saveAudioToIndexedDB(file,duration):addLogEntry(`‚ö†Ô∏è Audio "${file.name}" (${Math.floor(duration)}s) kh√¥ng h·ª£p l·ªá, kh√¥ng l∆∞u v√†o th∆∞ vi·ªán`,"warning")}catch(error){}}const startBtn=document.getElementById("gemini-start-queue-btn"),mainTextarea=document.getElementById("gemini-main-textarea");startBtn&&files.length>0&&(startBtn.disabled=!mainTextarea||""===mainTextarea.value.trim())},!1))},2500),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initHistoryModal):setTimeout(initHistoryModal,100);let batchState={files:[],selectedFiles:[],currentIndex:0,isProcessing:!1,isStopped:!1,successCount:0,failedCount:0};function readTextFile(file){return new Promise((resolve,reject)=>{const reader=new FileReader;reader.onload=e=>resolve(e.target.result),reader.onerror=e=>reject(e),reader.readAsText(file,"UTF-8")})}function renderBatchFilesList(){const listContainer=document.getElementById("batch-files-list"),startBtn=document.getElementById("start-batch-btn");if(0===batchState.files.length)return listContainer.innerHTML='\n                <div style="text-align: center; color: #94a3b8; padding: 40px;">\n                    <div style="font-size: 48px; margin-bottom: 10px;">üìÅ</div>\n                    <div>Ch∆∞a c√≥ file n√†o ƒë∆∞·ª£c ch·ªçn</div>\n                    <div style="font-size: 12px; margin-top: 5px;">Click n√∫t "Ch·ªçn file text" ƒë·ªÉ b·∫Øt ƒë·∫ßu</div>\n                </div>\n            ',void(startBtn.disabled=!0);let html='<div style="display: flex; flex-direction: column; gap: 8px;">';batchState.files.forEach((file,index)=>{const sizeKB=(file.size/1024).toFixed(2),isSelected=batchState.selectedFiles.includes(index);html+=`\n                <div style="display: flex; align-items: center; gap: 12px; padding: 12px; background: #282a36; border: 1px solid #6272a4; border-radius: 6px; transition: all 0.2s;">\n                    <input type="checkbox" class="batch-file-checkbox" data-index="${index}" ${isSelected?"checked":""} \n                           style="width: 18px; height: 18px; cursor: pointer;">\n                    <div style="flex: 1; min-width: 0;">\n                        <div style="color: #f8f8f2; font-weight: 600; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">\n                            üìÑ ${file.name}\n                        </div>\n                        <div style="color: #94a3b8; font-size: 12px; margin-top: 4px;">\n                            ${sizeKB} KB\n                        </div>\n                    </div>\n                    <div style="color: #8be9fd; font-size: 20px;">\n                        ${index+1}\n                    </div>\n                </div>\n            `}),html+="</div>",listContainer.innerHTML=html,document.querySelectorAll(".batch-file-checkbox").forEach(checkbox=>{checkbox.addEventListener("change",e=>{const index=parseInt(e.target.dataset.index);e.target.checked?batchState.selectedFiles.includes(index)||batchState.selectedFiles.push(index):batchState.selectedFiles=batchState.selectedFiles.filter(i=>i!==index),startBtn.disabled=0===batchState.selectedFiles.length})}),startBtn.disabled=0===batchState.selectedFiles.length}async function processSingleBatchFile(file,index,total){return new Promise(async(resolve,reject)=>{try{addLogEntry(`üìÑ [Batch ${index+1}/${total}] B·∫Øt ƒë·∫ßu x·ª≠ l√Ω: ${file.name}`,"info"),window.batchState||(window.batchState={}),window.batchState.isProcessing=!0,window.batchState.currentFileName=file.name;const textContent=await readTextFile(file);addLogEntry(`‚úÖ ƒê√£ ƒë·ªçc file (${(file.size/1024).toFixed(2)} KB)`,"info");const textarea=document.getElementById("gemini-main-textarea");if(!textarea)throw new Error("Kh√¥ng t√¨m th·∫•y textarea");textarea.value=textContent,document.getElementById("batch-current-file").textContent=file.name,document.getElementById("batch-progress-text").textContent=`${index+1}/${total}`;const progressPercent=Math.round((index+1)/total*100);document.getElementById("batch-progress-bar").style.width=`${progressPercent}%`;const startBtn=document.getElementById("gemini-start-queue-btn");if(!startBtn)throw new Error("Kh√¥ng t√¨m th·∫•y n√∫t Start");let audioCompleted=!1,checkInterval=null;const checkCompletion=()=>{const downloadBtn=document.getElementById("gemini-download-merged-btn"),finalResult=document.getElementById("gemini-final-result");finalResult&&"block"===finalResult.style.display&&downloadBtn&&downloadBtn.href&&downloadBtn.href.startsWith("blob:")&&(audioCompleted=!0,checkInterval&&clearInterval(checkInterval),addLogEntry(`‚úÖ [Batch ${index+1}/${total}] Ho√†n th√†nh: ${file.name}`,"success"),batchState.successCount++,window.batchState&&(window.batchState.currentFileName=null),setTimeout(()=>resolve(!0),2e3))};addLogEntry("üñ±Ô∏è ƒêang trigger t·∫°o audio...","info"),startBtn.click(),checkInterval=setInterval(checkCompletion,2e3)}catch(error){addLogEntry(`‚ùå [Batch ${index+1}/${total}] L·ªói: ${file.name} - ${error.message}`,"error"),batchState.failedCount++,window.batchState&&(window.batchState.currentFileName=null),reject(error)}})}async function processBatchQueue(){if(0===batchState.selectedFiles.length)return void addLogEntry("‚ö†Ô∏è Ch∆∞a ch·ªçn file n√†o ƒë·ªÉ x·ª≠ l√Ω","warning");batchState.isProcessing=!0,window.batchState=batchState,batchState.isStopped=!1,batchState.currentIndex=0,batchState.successCount=0,batchState.failedCount=0,document.getElementById("batch-progress").style.display="block",document.getElementById("start-batch-btn").style.display="none",document.getElementById("stop-batch-btn").style.display="block",document.getElementById("select-batch-files-btn").disabled=!0,addLogEntry(`üöÄ B·∫Øt ƒë·∫ßu t·∫°o file h√†ng lo·∫°t ${batchState.selectedFiles.length} file...`,"success");const sortedIndices=[...batchState.selectedFiles].sort((a,b)=>a-b);for(let i=0;i<sortedIndices.length;i++){if(batchState.isStopped){addLogEntry("‚èπÔ∏è T·∫°o file h√†ng lo·∫°t ƒë√£ b·ªã d·ª´ng b·ªüi ng∆∞·ªùi d√πng","warning"),batchState.isProcessing=!1;break}const fileIndex=sortedIndices[i],file=batchState.files[fileIndex];batchState.currentIndex=i,await processSingleBatchFile(file,i,sortedIndices.length),i<sortedIndices.length-1&&await new Promise(resolve=>setTimeout(resolve,2e3))}batchState.isProcessing=!1,document.getElementById("batch-progress").style.display="none",document.getElementById("start-batch-btn").style.display="block",document.getElementById("stop-batch-btn").style.display="none",document.getElementById("select-batch-files-btn").disabled=!1,addLogEntry("üéâ T·∫°o file h√†ng lo·∫°t ho√†n th√†nh!","success"),addLogEntry(`‚úÖ Th√†nh c√¥ng: ${batchState.successCount}/${sortedIndices.length}`,"success"),batchState.failedCount>0&&addLogEntry(`‚ùå Th·∫•t b·∫°i: ${batchState.failedCount}/${sortedIndices.length}`,"error"),Swal.fire({icon:0===batchState.failedCount?"success":"warning",title:"T·∫°o File H√†ng Lo·∫°t Ho√†n Th√†nh!",html:`\n                <div style="text-align: left;">\n                    <p>‚úÖ Th√†nh c√¥ng: ${batchState.successCount} file</p>\n                    ${batchState.failedCount>0?`<p>‚ùå Th·∫•t b·∫°i: ${batchState.failedCount} file</p>`:""}\n                    <p style="margin-top: 10px; color: #8be9fd;">Ki·ªÉm tra "Audio ƒë√£ t·∫°o" ƒë·ªÉ xem k·∫øt qu·∫£!</p>\n                </div>\n            `})}function initBatchModal(){addLogEntry("üîç [BATCH INIT] ƒêang kh·ªüi t·∫°o batch modal...","info"),addLogEntry("üîç [BATCH INIT] window.smartSplitter: "+typeof window.smartSplitter,"info"),addLogEntry("üîç [BATCH INIT] window.manageFullQueue: "+typeof window.manageFullQueue,"info"),addLogEntry("üîç [BATCH INIT] window.processingState: "+typeof window.processingState,"info");const openBtn=document.getElementById("open-batch-modal-btn"),modal=document.getElementById("batch-modal"),selectBtn=document.getElementById("select-batch-files-btn"),fileInput=document.getElementById("batch-files-input"),startBtn=document.getElementById("start-batch-btn"),stopBtn=document.getElementById("stop-batch-btn");openBtn&&modal?(addLogEntry("‚úÖ [BATCH INIT] Batch modal ƒë√£ s·∫µn s√†ng!","success"),openBtn.addEventListener("click",()=>{modal.style.display="flex"}),selectBtn.addEventListener("click",()=>{fileInput.click()}),fileInput.addEventListener("change",e=>{const files=Array.from(e.target.files);0!==files.length&&(batchState.files=files,batchState.selectedFiles=files.map((_,index)=>index),addLogEntry(`üìö ƒê√£ ch·ªçn ${files.length} file text`,"success"),renderBatchFilesList())}),startBtn.addEventListener("click",()=>{processBatchQueue()}),stopBtn.addEventListener("click",()=>{batchState.isStopped=!0,batchState.isProcessing=!1;const ps=window.processingState||processingState;ps&&(ps.isStopped=!0),addLogEntry("‚èπÔ∏è ƒêang d·ª´ng t·∫°o file h√†ng lo·∫°t...","warning")})):addLogEntry("‚ö†Ô∏è [BATCH INIT] Kh√¥ng t√¨m th·∫•y elements!","warning")}window.batchState=batchState,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{setTimeout(initBatchModal,2e3)}):setTimeout(initBatchModal,2e3),window.addEventListener("beforeunload",()=>{stopAutoReset403(),errorObserver&&errorObserver.disconnect(),db&&db.close()});